/*
 * Version:  5.6.192B207  
 * Copyright (c) 21-11-2018 GlassBox http://www.glassboxdigital.com
 */

 (function(cfg) {

	/* Expedia/Hotels configuration start */

	cfg.domKeepScriptMatching = 'commonDataBlock":{';
	cfg.domKeepComments = true;
	cfg.reportCorsTakeNativeCookies = ['MC1'];
	
	cfg.interceptAjax = true;
	cfg.ajaxRecordMetadata='never';
	cfg.ajaxRecordResponseBody= "uriMatches(evt\.klarna\.com\/.*\/load\_called|evt\.klarna\.com\/.*\/init\_called|x\.klarnacdn\.net\/kp\/lib\/v1\/api\.js)";
	cfg.maskCookies = ['egencia_globalcontext', 'legacy_globalcontext', 'egencia_authntoken', 'linfo'];

	cfg.valueAutoMasking = ['creditCard'];
	
    /* configuration end */

})(window._cls_config = window._cls_config || {}); 
 
!function(e,M,A,n,D){if(!function(e,n,t){if(void 0!==e[n])return void 0!==e.console&&"function"==typeof e.console.log&&console.log("WARNING[EyeView-1301]: detector script has been loaded more than once. Please fix to have a single detector loading. (Extra script loading will be ignored)"),!0;if(void 0===e.NodeFilter)return!0;if(e.sessionStorage["gb.disabled"])return console.log("Glassbox Detector is DISABLED, no recording is performed. To re-enable Glassbox Detector please invoke enable() method."),e[n]={version:t,enable:function(){delete e.sessionStorage["gb.disabled"],console.log("Glassbox Detector has been ENABLED. Please refresh the page or perform navigation for recording to start.")}},!0;return!1}(M,e,n)){var k={beaconVersion:"2"};k.mouseEvents=M.PointerEvent?{down:"pointerdown",up:"pointerup"}:{down:"mousedown",up:"mouseup"},k.eventTypes=[k.mouseEvents.down,k.mouseEvents.up,"touchstart","touchend","scroll","change","blur","focusout","keydown","submit","reset","load","unload","ajaxComplete","hashchange","navigation","popstate","focus","focusin","mouseenter","mousemove","error","beforeunload","resize","pagehide"],k.snapshotApplicableEventType=["pageUpdate","change","mousedown","scroll","touchstart","blur","submit","drag","formValidationError","navigation","unload","beforeunload","segmentChanged"],k.reportBase64URLs=!1,k.nobelEventTypes=["pageSnapshot"],k.socialNobelEventTypes=["resourceContent"],k.encodeSelectors=!0,k.encodeEventTypes=!0,k.useClassesInSelectors=!1,k.repeatingElementSelector="!",k.encoding={numberBase:36,rootSelector:"-",delimiters:{versionPayload:";",pages:"~~~",events:"~~",eventParts:"~",pageIdEvents:"_"},domSnapshotPrefix:"D",domSnapshotRefPrefix:"r",domSnapshotCompressedPrefix:"d",domSnapshotPlainPrefix:"P",valueEncodedPrefix:"E",valueNotEncodedPrefix:"N"},k.cookies={session:"_cls_s",visitor:"_cls_v",sub_session:"_cls_subs",supportMode:"_cls_sm"},k.maskingAttribute="cls_mask",k.ValueMaskingMode={BlackList:"blacklist",WhiteList:"whitelist"},k.Storage={BoundKeyPrefix:"gb.",UnboundKeyPrefix:"gb_unbound."},k.detectorScript=function(e,n){if(e)return e.hasAttribute(n)?e:A.querySelector("["+n+"]")||e;var t=A.querySelector("["+n+"]");return!t&&M._cls_config&&M._cls_config.detectorTagId&&(t=A.getElementById(M._cls_config.detectorTagId)),t||(t=A.getElementById("_cls_detector")),t}(A.currentScript,"data-clsconfig");var E={};void 0!==E&&Se(E),k.setup="dom",void 0!==E&&Ce(E);var t=",";void 0!==k&&k.detectorScript&&(t=k.detectorScript.getAttribute("data-clsarraydelim")||t);var r=function(e,n){if("TRUE"===e.toUpperCase())return!0;if("FALSE"===e.toUpperCase())return!1;throw"cannot parse boolean from '"+e+"'"},i=function(e){var n=-1==e.indexOf(".")?parseInt(e):parseFloat(e);if(isNaN(n))throw"cannot parse number from '"+e+"'";return n},v=function(e){return e},o=function(e){return null==e?[]:e.split(t)},a=function(e){return(Array.isArray?Array.isArray(e):e instanceof Array)?null:"array is expected"},u=function(e,n){for(var t=0;t<n.length;t++)if(typeof n[t]!==e)return"array element type mismatch. expected:"+e+" actual:"+typeof n[t];return null},c=function(){var r=arguments;return function(e){for(var n=0;n<r.length;n++){var t=r[n](e);if(null!=t)return t}return null}};Re.prototype.ignore=function(e){this[e.toLowerCase()]={name:e,ignore:!0}};var s={options:{caseSensitive:!0,errorOnUnknown:!(Re.newBuilder=function(){var t=new Re;return{bool:function(e,n){return t.add("boolean",!1,r,null,e,n),this},num:function(e,n){return t.add("number",!1,i,null,e,n),this},str:function(e,n){return t.add("string",!0,v,null,e,n),this},strarray:function(e,n){return t.add("object",!0,o,c(a,function(e){return u("string",e)}),e,n),this},ignore:function(e){return t.ignore(e),this},build:function(){return t}}})},validate:function(e,n){var t=new Te;if(this.parsingError)return t.addError(s.parsingError),t;n=n||{};var r=e.requiredFieldsMask();for(var i in n)if(n.hasOwnProperty(i)){var o=e[i.toLowerCase()];if(!o){(s.options.errorOnUnknown?t.addError:t.addWarning).call(t,"unknown configuration field",i);continue}if(o.ignore)continue;if(o.name!==i&&s.options.caseSensitive){t.addError("unknown configuration field (did you mean '"+o.name+"'?).",i),delete r[o.name];continue}var a=n[i];if(null==a){o.nullable||t.addError("value cannot be null, value of "+o.type+" type is expected.",i);continue}if(typeof a!==o.type){t.addError("value type mismatch. expected:"+o.type+" actual:"+typeof a,i);continue}if(o.required&&delete r[o.name],o.validator){var u=o.validator(a);u&&t.addError("value violation, "+u,i)}}for(var c in r)t.addError("missing required field",c);return t},onParsingError:function(e){s.parsingError=e}};Te.prototype.addError=function(e,n){this.errors.push({field:n,reason:e})},Te.prototype.addWarning=function(e,n){this.warnings.push({field:n,reason:e})},Te.prototype.toString=function(){var e=function(e){for(var n="",t=0;t<e.length;t++)return n+"\n"+(e[t].field?"'"+e[t].field+"': ":"")+e[t].reason;return n},n="\n"+this.errors.length+" error(s):";return n+=e(this.errors),n+="\n"+this.warnings.length+" warning(s):",n+=e(this.warnings)};var f=function(e,n,t,r,i){var o=function(e){return"function"!=typeof String.prototype.trim?e.replace(/^\s+|\s+$/g,""):e.trim()};e=e||{};for(var a=null!=t?t.split(n):[],u=0;u<a.length;u++){var c=a[u].split("=");if(2==c.length){var s,f=o(c[0]),l=o(c[1]),d=e[f.toLowerCase()];d?void 0===(s=d.parser)&&(s=v):s=v;try{r[f]=s(l)}catch(e){i&&i("'"+f+"': "+e)}}}},l=Re.newBuilder().ignore("injectionTime").ignore("visualName").ignore("detectionScriptURI").str("reportURI",!0).bool("recordMouseMoves",!1).bool("recordScrolls",!1).bool("recordErrors",!1).bool("reportValidationErrors",!1).strarray("domFormValidationClassErrors",!1).num("idleEventTimeInterval",!1).bool("botDetection",!1).bool("recordHovers",!1).bool("reportByPost",!1).num("maxPostReportSize",!1).num("reportPostInterval",!1).bool("postRetry",!1).bool("DOMBeaconImg",!1).num("reportInterval",!1).bool("reportAllOnUnload",!1).num("maxReportSize",!1).strarray("maskList",!1).strarray("maskClassList",!1).str("externalIdAttr",!1).bool("useIdSelectors",!1).bool("useNameInFormSelectors",!1).bool("preferNamesInFormSelectors",!1).strarray("noIdSelectorsForClassNames",!1).strarray("noIdSelectorsForIDs",!1).strarray("noIdSelectorsForAttrs",!1).bool("SCIntegration",!1).strarray("SCIntegrationURLsContainList",!1).strarray("SCIntegrationKeyList",!1).bool("reportAllResourcesLoad",!1).bool("reportExternalResources",!1).strarray("ignoreReportResourcesByTagNames",!1).strarray("reportScriptURLContainList",!1).strarray("reportScriptKeyList",!1).strarray("reportImageURLContainList",!1).strarray("reportImageKeyList",!1).bool("debugMode",!1).bool("traceMode",!1).bool("suppressMouseMovesDebug",!1).bool("visualNameDebug",!1).bool("timingMode",!1).num("maxReportsWithUnload",!1).num("minDragPixels",!1).bool("reportVisualNames",!1).num("titleCharsLimit",!1).num("maxTimeForIdleEvent",!1).num("validationValueForRenderTime",!1).bool("reportDebugInfo",!1).bool("supportNativeAutoComplete",!1).bool("recordEnterForInputs",!1).bool("recordTypingAll",!1).strarray("recordTypingForAttrs",!1).strarray("recordTypingForClasses",!1).strarray("recordTypingForIDs",!1).num("mmMaxMovesWithUnload",!1).num("mmMaxMovesInEventNoTimes",!1).num("mmMaxMovesInEventWithTimes",!1).num("mmMinStallingMoveTime",!1).num("mmMaxInMemoryMoves",!1).bool("mmDebug",!1).num("mhDeepLevel",!1).num("mhMaxListSize",!1).num("mhMaxInMemeoryHovers",!1).bool("mhDebug",!1).bool("dependentScroll",!1).num("minStallingScrollTime",!1).bool("scrollDebug",!1).bool("clsDebug",!1).num("clsDebugCharsLimit",!1).num("clsDebugMaxReports",!1).bool("domRecordEnabled",!1).strarray("domNewPageTriggers",!1).strarray("pageSnapshotTriggers",!1).num("domStartAfter",!1).num("domUpdateEveryWsMsgIn",!1).num("domRecordEnabledByChance",!1).str("domReportURI",!1).bool("domCompress",!1).strarray("domNewPageAjaxTriggers",!1).strarray("domIgnoredFormElements",!1).bool("semiDomEnabled",!1).bool("domRecordCssRules",!1).strarray("ignorableElementIds",!1).bool("recordAjaxCallsAnyway",!1).bool("truncateEventsWithUnload",!1).bool("mmRecordTimes",!1).num("mmDiluteMinPixels",!1).bool("reportHybrid",!1).str("customTLD",!1).num("enabledByChance",!1).strarray("domCloningBannedIds",!1).strarray("domCloningBannedClasses",!1).str("reportEncoding",!1).bool("reportCompress",!1).str("maskingMode",!1).strarray("reportAddUriParams",!1).bool("recordConsoleErrors",!1).strarray("domMaskContentById",!1).strarray("domMaskContentByClass",!1).strarray("domMaskOmitById",!1).strarray("domMaskOmitByClass",!1).strarray("domMaskedAttributes",!1).strarray("domMaskAttributesByTag",!1).strarray("domMaskSimpleSelector",!1).bool("reportPreferSendBeaconAPI",!1).bool("domKeepComments",!1).str("domKeepScriptMatching",!1).num("domExpireSnapshotAfter",!1).bool("reportCorsForceSafelistedHeaders",!1).bool("reportDisableCors",!1).strarray("reportCorsTakeNativeCookies",!1).strarray("maskCookies",!1).bool("reportToStorageAfterUnload",!1).bool("domOmitAfterUnload",!1).bool("duplicateIdCheck",!1).strarray("domPartialWhenLocationContains",!1).strarray("blackoutWhenLocationContains",!1).bool("iframesAutoInject",!1).bool("iframesRecordEnabled",!1).str("iframesParentOrigin",!1).num("iframesHandshakeTimeout",!1).bool("reportIncludeReferrer",!1).str("mobileHybridId",!1).bool("domAssignGlassboxId",!1).bool("interceptAjax",!1).bool("ajaxDebug",!1).bool("ajaxHashRecurrentUrls",!1).str("ajaxRecordMetadata",!1).str("ajaxRecordResponseBody",!1).str("ajaxRecordResponseHeaders",!1).str("ajaxRecordRequestBody",!1).str("ajaxRecordRequestHeaders",!1).bool("recordAjaxRequest",!1).bool("ajaxCaptureResponseHeaders",!1).num("ajaxCaptureResponseOnStatusGreater",!1).str("ajaxCaptureResponseContentWhenUrlMatches",!1).bool("ajaxCaptureFQDNOnly",!1).bool("reportCreateSubSessionCookie",!1).bool("resourcesRecordEnabled",!1).bool("resourcesRecordAllowCors",!1).num("resourcesRecordCount",!1).num("resourcesRecordChance",!1).strarray("resourceIgnoreWhenUrlContains",!1).bool("resourceTimingRecordEnabled",!1).num("resourceTimingRecordEnabledByChance",!1).bool("clientAttributesEnabled",!1).num("clientAttributeMaxLength",!1).bool("domIE11ForceMutationObserver",!1).str("detectorTagId",!1).bool("cookieAssignFQDN",!1).str("sessionIdByQueryParam",!1).str("visitorIdByQueryParam",!1).str("domIdentifyingAttribute",!1).bool("sendStateInfo",!1).strarray("valueAutoMasking",!1).num("debounceScrolls",!1).build();if(k.detectorScript){var d=k.detectorScript.getAttribute("data-clsdelim")||";",h=k.detectorScript.getAttribute("data-clsconfig");h&&f(l,d,h,E,s.onParsingError)}var p,m=M._cls_config||M._config||{};for(p in m)m.hasOwnProperty(p)&&(E[p]=m[p]);var g,y,b,w=(y=/\d{12,19}/g,g=[0,2,4,6,8,1,3,5,7,9],b=function(e){for(var n,t=e.length,r=1,i=0;t;)n=parseInt(e.charAt(--t),10),i+=(r^=1)?g[n]:n;return i&&i%10==0},{creditCard:function(e){return!!((e=(e||"").trim())&&e.match(y)&&b(e))},byTypes:function(e){var n,t,r=[];for(e=e||[],n=0;n<e.length;n++)this[e[n]]&&"byTypes"!==e[n]?r.push(this[e[n]]):console.error("[EyeView-1408]: Detector configuration error: auto masking of type '"+e[n]+"' is not supported.");return 1===r.length?r[0]:(t=r,function(e){var n;for(n=0;n<t[n];n++)if(t[n](e))return!0;return!1})}}),N=new function(a,e){var u={},c=e?"":";domain="+(n=a.location.host,t=n.split(":")[0]||"",r=t.split("."),r.length<=2?t:(r.shift(),"."+r.join(".")));var n,t,r;this.get=function(e){var n,t,r=u[e];return void 0===r&&(n=a,t=new RegExp("[,; ]"+e+"=([^\\s,;]*)","gi").exec(";"+n.cookie),r=t&&t[1]||null,u[e]=r),null==r?D:r},this.set=function(e,n,t){var r,i,o;u[e]=n,a.cookie=(r=n,i=t,o=encodeURIComponent(e)+"="+(r+"").replace(/[^!#-+\--:<-\[\]-~]/g,encodeURIComponent),o+=";path=/",o+=c,o+=i?";expires="+i.toUTCString():"")}}(A,E.cookieAssignFQDN),x=new function(i,o){i=i||{};var a=o.keysPrefix+"sid",u=function(){return e||(e=o.sessionIdFunc()),e};var e;function c(e){return o.keysPrefix+e}this.get=function(e){var n=u();if(!n)return D;try{if(n==i[a])return i[c(e)]}catch(e){}return D},this.set=function(e,n){var t=u();if(!t)return D;try{var r=i[a];return t!==r&&function(){var e;for(e in i)0===e.indexOf(o.keysPrefix)&&delete i[e]}(),i[a]=t,i[c(e)]=n}catch(e){}return D},this.remove=function(e){var n=u();if(!n)return!0;try{if(n==i[a])return delete i[c(e)]}catch(e){}return!0}}(M.localStorage,{keysPrefix:k.Storage.BoundKeyPrefix,sessionIdFunc:function(){return N.get(k.cookies.session)}}),S=new function(l){var n={tilda:"_clstil",asterisks:"_clsast",space:"_clsspc"};function d(e,n){if(p(e))return n?k.encoding.rootSelector:e.nodeName;var t=u(e.nodeName,n),r=function(e){if(!e.parentNode)return null;var n=e.parentNode.childNodes;if(n.length<2)return null;for(var t=e.nodeName,r=[],i=0;i<n.length;i+=1)n[i].nodeName===t&&r.push(n[i]);if(r.length<2)return null;for(var o=0;o<r.length;o+=1)if(r[o]===e)return o;return null}(e);if(null!==r)return function(e,n,t){var r=e;t||(r+=":eq");return r+"("+n+")"}(t,r,n);if(k.useClassesInSelectors){var i=L.getClassList(e);if(0<i.length){for(var o=t,a=0;a<i.length;a++)o+="."+i[a];return o}}return t}function v(e,n,t){if(p(e))return null;var r=L.getElementId(e);return(r&&-1!==r.indexOf("~")||-1!==r.indexOf("*")||-1!==r.indexOf(" "))&&(r=o(r)),n?u(e.nodeName,t)+"#"+r:"#"+r}function h(e,n){var t=typeof n;"string"!==t&&"number"!==t||e.unshift(n)}function u(e,n){return n?k.dictionary.encodeNodeName(e):e}function p(e){var n=e.nodeName;return"HTML"===n||"BODY"===n}function o(e){return e.replace(/~/g,n.tilda).replace(/\*/g,n.asterisks).replace(/ /g,n.space)}function m(e){for(var n=e.parentNode;null!==n;){if(void 0===n&&console.log("hasFormAncestor undefined node: ",e),"FORM"===n.nodeName)return!0;n=n.parentNode}return!1}function g(e,n,t){var r=e.getAttribute(n),i="["+n+"='"+r+"']";return-1===i.indexOf("~")&&-1===i.indexOf("*")&&-1===i.indexOf(" ")||(i=o(i)),u(e.nodeName,t)+i}function y(e,n){if(0===l.noIdSelectorsForClassNames.length&&0===l.noIdSelectorsForIDs.length&&0===l.noIdSelectorsForAttrs.length)return!0;var t,r=L.getClassList(e);for(t=0;t<l.noIdSelectorsForClassNames.length;t++)if(0<=O.indexOf(r,l.noIdSelectorsForClassNames[t]))return!1;for(t=0;t<l.noIdSelectorsForAttrs.length;t++)if(e.hasAttribute(l.noIdSelectorsForAttrs[t]))return!1;for(t=0;t<l.noIdSelectorsForIDs.length;t++){var i=l.noIdSelectorsForIDs[t];if(i&&0<=n.indexOf(i))return!1}return!0}this.getSelectorExpression=function(e,n,t){n=void 0!==n?n:k.encodeSelectors,t=t||{useId:!0};var r=l.useIdSelectors&&t.useId;if(null===e||O.isUndefined(e)||!L.isElement(e))return k.encoding.rootSelector;if(e.name&&l.preferNamesInFormSelectors&&m(e))return g(e,"name",n);if(r){var i=L.getElementId(e);if(i&&!L.isDuplicateElementId(i)&&y(e,i))return v(e,!0,n)}if(e.name&&l.useNameInFormSelectors&&m(e))return g(e,"name",n);if(t.identifyingAttribute&&e.hasAttribute(t.identifyingAttribute))return g(e,t.identifyingAttribute,n);for(var o=d(e,n),a=[o],u=e,c=n?"*":">";u.parentNode&&!p(u);)if(1===(u=u.parentNode).nodeType){var s=L.getElementId(u);if(s&&r&&!L.isDuplicateElementId(s)&&y(u,s))return h(a,v(u,!1)),a.join(c);var f=d(u,n);if(h(a,f),u===parent)return a.join(c)}return a.join(c)}}(E),C=new Ae({valueMaskingMode:E.maskingMode,valueMaskIds:E.maskList,valueMaskClasses:E.maskClassList,autoMaskPredicate:w.byTypes(E.valueAutoMasking)},Ve(),function(e){V.onAutoMaskingApplied(e)});!function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;var n=function(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var n,t=String(e),r=t.length,i=-1,o="",a=t.charCodeAt(0);++i<r;)0!=(n=t.charCodeAt(i))?o+=1<=n&&n<=31||127==n||0==i&&48<=n&&n<=57||1==i&&48<=n&&n<=57&&45==a?"\\"+n.toString(16)+" ":0==i&&1==r&&45==n||!(128<=n||45==n||95==n||48<=n&&n<=57||65<=n&&n<=90||97<=n&&n<=122)?"\\"+t.charAt(i):t.charAt(i):o+="ï¿½";return o};e.CSS||(e.CSS={}),e.CSS.escape=n}(M);var R,O=function(){var n=Object.prototype.toString;var r=e("indexOf");function e(e){return function(){return Array.prototype[e].apply(arguments[0],Array.prototype.slice.call(arguments,1))}}return{isFunction:function(e){return"function"==typeof e},isNumber:function(e){return"number"==typeof e||"[object Number]"===n.call(e)},isString:function(e){return"string"==typeof e||"[object String]"===n.call(e)},isUndefined:function(e){return void 0===e},last:function(e){return e&&e[e.length-1]},forOwn:function(e,n){for(var t in e)e.hasOwnProperty(t)&&n(e[t],t)},indexOf:r,pluck:function(e,n){return e?e.map(function(e){return e[n]}):[]},reduce:e("reduce"),contains:"function"==typeof Array.prototype.includes?e("includes"):function(e,n,t){return-1<r(e,n,t)},forEach:e("forEach")}}(),T=new function(e){var o={},a=[];(e=e||this).on=function(e,n,t){(o[e]=o[e]||[]).push([n,t])},e.off=function(e,n){e||(o={});for(var t=o[e]||a,r=t.length=n?t.length:0;r--;)n==t[r][0]&&t.splice(r,1)},e.emit=function(e){for(var n,t=o[e]||a,r=0<t.length?t.slice(0,t.length):t,i=0;n=r[i++];)n[0].apply(n[1],a.slice.call(arguments,1))}},L=function(i,o,a,t,e){t=t||{};var n,u={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",unload:"img",abort:"img",readystatechange:"XMLHttpRequest"},r=a.createElement("a"),c=o.console&&o.console.time&&o.console.timeEnd&&o.console.timeStamp,s=i.isFunction(String.prototype.startsWith);return{currentTimestamp:i.isFunction(Date.now)&&i.isNumber(Date.now())?Date.now:function(){return(new Date).getTime()},isElement:function(e){return"hasAttribute"in e},isDOMElement:function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},isOldIE:function(){return!a.addEventListener},hasTouch:function(){return"ontouchstart"in o},isChromeDesktop:function(){var e=navigator.userAgent,n=/Android|webOS|iPhone|iPad|iPod|Windows Phone|IEMobile|Opera Mini|Mobile|mobile|Tablet|CriOS/i.test(e),t=/Chrome/i.test(e);return!n&&t},getAttributeForElement:function(e,n){return e&&this.isElement(e)?(e.hasAttribute(n.toLocaleLowerCase())?t=e.getAttribute(n.toLocaleLowerCase()):e.hasAttribute(n.toLocaleUpperCase())&&(t=e.getAttribute(n.toLocaleUpperCase())),t&&(t=this.trim(t)),t||null):null;var t},getElementId:function(e){return e&&e.id?i.isString(e.id)||"function"!=typeof e.getAttribute?e.id:e.getAttribute("id"):null},isDuplicateElementId:function(e){if(!t.duplicateIdCheck)return!1;try{return"querySelectorAll"in a&&1<a.querySelectorAll("[id='"+e+"']").length}catch(e){return!1}},getMouseEnterTarget:function(){return"onmouseenter"in a?a:"onmouseenter"in o?o:a.body},hasTimingAPI:function(){return!i.isUndefined(o.performance)&&!i.isUndefined(o.performance.timing)},startsWith:function(e,n){return!(!i.isString(e)||!i.isString(n))&&(s?e.startsWith(n):e.slice(0,n.length)===n)},truncateStr:function(e,n,t){var r=e;return e&&e.length>n&&(r=e.substr(0,n),t&&(r=r.concat("..."))),r},getCoordinate:function(e){var n=e.changedTouches||e.touches,t=n&&0<n.length?n[0]:e,r=this.extractElementFromEvent(e);return this.isHybrid()||"HTML"===r.nodeName.toUpperCase()?new Xe(t.clientX,t.clientY):i.isUndefined(t.pageX)||i.isUndefined(t.pageY)?new Xe(e.clientX+a.body.scrollLeft+a.documentElement.scrollLeft,e.clientY+a.body.scrollTop+a.documentElement.scrollTop):new Xe(t.pageX,t.pageY)},getScrollTopLeft:function(){try{var e=null!==o.top&&o.top!==o.self?o.top:o;return{top:void 0!==e.pageYOffset?e.pageYOffset:(e.document.documentElement||e.document.body.parentNode||e.document.body).scrollTop,left:void 0!==e.pageXOffset?e.pageXOffset:(e.document.documentElement||e.document.body.parentNode||e.document.body).scrollLeft}}catch(e){return this.log("Failed getting scroll values: "+e.message,e),{top:0,left:0}}},getElementXYCoordinates:function(e){if(!e)return null;if(!("getBoundingClientRect"in e))return null;var n=e.getBoundingClientRect(),t=this.getScrollTopLeft();return new Xe(Math.round(n.left+t.left),Math.round(n.top+t.top))},isSameCoordinates:function(e,n){return e.x===n.x&&e.y===n.y},isCoordinatesDistLargerThan:function(e,n,t){return Math.abs(e.x-n.x)>t||Math.abs(e.y-n.y)>t},getCurrentScrollReach:function(){try{var e=null!==o.top&&o.top!==o.self?o.top:o;return(void 0!==e.pageYOffset?e.pageYOffset:(e.document.documentElement||e.document.body.parentNode||e.document.body).scrollTop)+(e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight)}catch(e){return this.log("Failed getting scroll reach: "+e.message,e),0}},getWindowSize:function(){return i.isNumber(o.innerWidth)&&i.isNumber(o.innerHeight)?this.validateSize(o.innerWidth,o.innerHeight):!i.isUndefined(a.body)&&i.isNumber(a.body.offsetWidth)&&i.isNumber(a.body.offsetHeight)?this.validateSize(a.body.offsetWidth,a.body.offsetHeight):null},getScreenSize:function(){return this.validateSize(screen.width,screen.height)},validateSize:function(e,n){return i.isNumber(e)&&i.isNumber(n)?{width:e,height:n}:null},indexOfNode:function(e,n,t){for(var r=t||0;r<e.length;r++)if(e[r]===n)return r;return-1},getLocationUrlSplitByHash:function(){var e=o.location.href,n=e.indexOf("#");return-1===n?{url:e,withoutHash:e,hash:null}:{url:e,withoutHash:e.slice(0,n),hash:e.slice(n+1,e.length)}},getHashFromUrl:function(e){var n=e.indexOf("#");return-1===n?"":e.slice(n+1,e.length)},stripHash:function(e){var n=e.indexOf("#");return-1===n?e:e.slice(0,n)},getReferrerUrlWithoutHash:function(){var e=o.document.referrer;if(!e||0===e.length)return null;var n=e.indexOf("#");return-1!==n?e.slice(0,n):e},encodeAsBase:function(e,n){return e.toString(n)},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})},addEventHandler:function(e,n,t,r){e.addEventListener?e.addEventListener(n,t,r):e.attachEvent&&e.attachEvent("on"+n,t)},removeEventHandler:function(e,n,t){i.isUndefined(e.removeEventListener)?i.isUndefined(e.detachEvent)||e.detachEvent("on"+n,t):e.removeEventListener(n,t,!0)},extractElementFromEvent:function(e){void 0===e&&(e=o.event);var n=e.target||e.srcElement;return null==n?null:3===n.nodeType?n.parentNode:n},isEventSupported:function(e){var n="on"+e;if(n in o||n in o.document)return!0;var t=a.createElement(u[n]||"div"),r=n in t;return r||(t.setAttribute(n,"return;"),r=i.isFunction(t[n])),t=null,r||this.log(e+" is not supported."),r},isConsoleSupported:function(){return!i.isUndefined(o.console)&&i.isFunction(o.console.log)},getReason:function(e){return i.isString(e)?"("+e+")":"(not specified)"},hashcode:function(e){var n=0;if(0===e.length)return n;for(var t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},trim:function(e){return"function"!=typeof String.prototype.trim?e.replace(/^\s+|\s+$/g,""):e.trim()},log:function(){if(!i.isUndefined(t.debugMode)&&t.debugMode){var e=Array.prototype.slice.call(arguments,0);if(e.unshift(this.currentTimestamp()),!0===V.page.frame&&e.push(" (in frame "+V.page.id+")"),this.isConsoleSupported())console.log.apply(console,e);else if(!i.isUndefined(o.console.log)){var n=e.join(" ");console.log(n)}}},trace:function(){t.traceMode&&this.log.apply(this,arguments)},time:function(e){t.timingMode&&c&&o.console.time(e)},timeEnd:function(e){t.timingMode&&c&&o.console.timeEnd(e)},timeStamp:function(e){t.timingMode&&c&&o.console.timeStamp(e)},isMaskedElement:function(e){var n=this.getElementId(e);return"password"===e.type||i.contains(t.maskList,n)||e.hasAttribute(k.maskingAttribute)},hasOneOfClassNames:function(e,n){for(var t=" "+this.getClass(e)+" ",r=0;r<n.length;r++)if(-1<t.indexOf(" "+n[r]+" "))return!0;return!1},getClass:function(e){return e.getAttribute&&e.getAttribute("class")||""},getClassList:function(e){var n=this.getClass(e);return n?n.split(" "):[]},hasClassName:function(e,n){return-1<(" "+this.getClass(e)+" ").indexOf(" "+n+" ")},getHybridType:function(){return"undefined"==typeof eyeViewHybridBridge?null:eyeViewHybridBridge.getHybridType()},isHybrid:function(){return"undefined"!=typeof eyeViewHybridBridge},isHybridAndroid:function(){return this.isHybrid()&&this.getHybridType()===eyeViewHybridBridge.HYBRID_ANDROID},isHybridIOS:function(){return this.isHybrid()&&this.getHybridType()===eyeViewHybridBridge.HYBRID_IOS},immutableSet:function(){for(var e={},n=0;n<arguments.length;n++)e[arguments[n]]=!0;return e},DOMElement2Str:function(e){return e instanceof CharacterData?e.textContent:e.outerHTML},dateFromNow:function(e){return new Date(this.currentTimestamp()+e)},isAttachedToDOM:function(e){for(;e;){if(e===a)return!0;e=e.parentNode}return!1},ensureProperty:function(e){for(var n=Array.prototype.slice.call(arguments,1),t=e,r=0;r<n.length;r++)t.hasOwnProperty(n[r])||(t[n[r]]={}),t=t[n[r]];return t},shallowExtend:function(e,n){var t,r={};for(t in e)r[t]=e[t];for(t in n)r[t]=n[t];return r},isEmpty:function(e){for(var n in e)if(e.hasOwnProperty(n))return!1;return!0},extractHostname:function(e){if(!e)return"";var n=e.indexOf("//");if(-1!==n){var t=e.indexOf("/",n+2);return e.substring(n+2,-1!==t?t:D)}return""},extractOrigin:function(e){if(!e)return"";if(r.href=e,!r.origin){var n=e.indexOf("://"),t=-1!==n&&-1!==e.indexOf(":",n+3);return r.hostname?r.protocol+"//"+r.hostname+(t&&r.port?":"+r.port:""):""}return r.origin},toAbsoluteUrl:function(e){return r.href=e,r.href},arrayToJsonSafe:function(e){return n||(n="function"==typeof Array.prototype.toJSON?function(e){var n=Array.prototype.toJSON;delete Array.prototype.toJSON;var t=JSON.stringify(e);return Array.prototype.toJSON=n,t}:JSON.stringify),n(e)},parseQuery:function(e){var n={};if(e){var t,r,i=e.split("&");for(t=0;t<i.length;t++)(r=i[t].split("="))[0]&&(n[r[0]]=r[1]?decodeURIComponent(r[1]):"")}return n},bus:e}}(O,M,A,void 0!==E?E:{},T),I={MASKING_CHAR:"*",maskValueOf:function(e){return new Array((""+(e||"")).length+1).join(this.MASKING_CHAR)},canBeValueMasked:function(e){if(!e)return!1;if("INPUT"===e.tagName){var n=(e.getAttribute("type")||"").toLowerCase();return"button"!==n&&"submit"!==n&&"reset"!==n}return!0}};Ae.attributeValueInRegexpArray=function(e,n){for(var t=0;t<n.length;t++)if(n[t].test(e))return!0;return!1},Ae.prototype.maskValue=function(e,n){var t=e,r=n?e.parentElement:e;if(!I.canBeValueMasked(r))return t.value;var i=this._options.valueMaskingMode===k.ValueMaskingMode.WhiteList;return"INPUT"===r.tagName&&"password"===r.type?i=!0:r.hasAttribute(k.maskingAttribute)?i=!0:L.hasClassName(r,"cls_mask")?i=!0:this._valueMaskIdsWithoutwildcards.length&&O.contains(this._valueMaskIdsWithoutwildcards,L.getElementId(r))?i=!i:this._valueMaskClassesWithoutwildcards.length&&L.hasOneOfClassNames(r,this._valueMaskClassesWithoutwildcards)?i=!i:this._regexpValueMaskIds.length&&Ae.attributeValueInRegexpArray(L.getElementId(r),this._regexpValueMaskIds)?i=!i:this._regexpValueMaskClasses.length&&Ae.attributeValueInRegexpArray(L.getClass(r),this._regexpValueMaskClasses)&&(i=!i),!i&&this._options.autoMaskPredicate(t.value)&&(this._autoMaskingCallback(t),i=!0),i?I.maskValueOf(t.value):t.value},De.prototype.open=function(e,n){this._url=n,this.readyState=XMLHttpRequest.OPENED,this.onreadystatechange&&this.onreadystatechange()},De.prototype.send=function(e){var n;if(this.readyState=XMLHttpRequest.LOADING,this._contentType){var t={type:this._contentType};n=new Blob([e],t)}else n=e;this.status=navigator.sendBeacon(this._url,n)?200:De.BEACON_ERROR_STATUS,200!==this.status&&L.log("failed posting new beacon using sendBeacon API. payload:  contentType:"+this._contentType),this.readyState=XMLHttpRequest.DONE,this.onreadystatechange&&this.onreadystatechange()},De.prototype.setRequestHeader=function(e,n){"Content-Type"===e&&(this._contentType=n)},De.prototype.getResponseHeader=function(){return null},De.canSend=(R=/chrome/.test(navigator.userAgent.toLowerCase()),function(e){return!(R&&e&&e.length>De.CHROME_PAYLOAD_LIMIT)}),De.isSupported=function(){return"function"==typeof navigator.sendBeacon},De.CHROME_PAYLOAD_LIMIT=61440,De.BEACON_ERROR_STATUS=400,ke.prototype.open=function(e,n){-1===n.indexOf("://")&&(n=location.protocol+"//"+location.hostname+(n.startsWith("/")?"":"/")+n),this.xdr.open(e,n),this.readyState=XMLHttpRequest.OPENED,this.onreadystatechange&&this.onreadystatechange()},ke.prototype.send=function(e){this.xdr.send(e),this.readyState=XMLHttpRequest.LOADING,this.onreadystatechange&&this.onreadystatechange()},ke.prototype.setRequestHeader=function(){},ke.prototype.getResponseHeader=function(){return null};var _=function(r){var i=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];if(void 0!==M.XDomainRequest&&/(msie 8\.0|msie 9\.0)/i.test(M.navigator.userAgent)&&i.unshift(function(){return new ke}),"undefined"!=typeof CordovaRequestAdapter){var e=new CordovaCookieAdapter(N),n=new CordovaContext(A,e);i.unshift(function(){return new CordovaRequestAdapter(n,e)})}var o=null,a=function(e){var n=e();return n.cls_own=!0,n};return{createXMLHTTPObject:function(e){if(r&&e&&De.isSupported()&&De.canSend(e))return new De;if(o)return a(o);var n,t;for(n=0;n<i.length;n++)try{return t=a(i[n]),o=i[n],t}catch(e){continue}return t}}}(E.reportPreferSendBeaconAPI);!function(n,e){"use strict";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=function(e){for(var n={},t=0,r=e.length;t<r;t++)n[e.charAt(t)]=t;return n}(i),a=String.fromCharCode,t=function(e){var n=e.charCodeAt(0);return n<128?e:n<2048?a(192|n>>>6)+a(128|63&n):a(224|n>>>12&15)+a(128|n>>>6&63)+a(128|63&n)},r=function(e){return e.replace(/[^\x00-\x7F]/g,t)},u=function(e){var n=[0,2,1][e.length%3],t=e.charCodeAt(0)<<16|(1<e.length?e.charCodeAt(1):0)<<8|(2<e.length?e.charCodeAt(2):0);return[i.charAt(t>>>18),i.charAt(t>>>12&63),2<=n?"=":i.charAt(t>>>6&63),1<=n?"=":i.charAt(63&t)].join("")},c="function"==typeof n.btoa?function(e){return n.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,u)},s="function"==typeof n.atob?function(e){return n.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,p)},f=function(e){return c(r(e))},l=function(e,n){return n?f(e).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}):f(e)},d=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}/g,v=function(e){return a(e.length<3?(31&e.charCodeAt(0))<<6|63&e.charCodeAt(1):(15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2))},h=function(e){return e.replace(d,v)},p=function(e){var n=e.length,t=n%4,r=(0<n?o[e.charAt(0)]<<18:0)|(1<n?o[e.charAt(1)]<<12:0)|(2<n?o[e.charAt(2)]<<6:0)|(3<n?o[e.charAt(3)]:0),i=[a(r>>>16),a(r>>>8&255),a(255&r)];return i.length-=[0,0,2,1][t],i.join("")},m=function(e){return n=e.replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""),h(s(n));var n};e.Base64={atob:s,btoa:c,fromBase64:m,toBase64:l,bytesToBase64:function(e){for(var n,t="",r=0;r<e.length;r+=3)n=(252&e[r])>>2,t+=i.charAt(n),n=(3&e[r])<<4,r+1<e.length?(n|=(240&e[r+1])>>4,t+=i.charAt(n),n=(15&e[r+1])<<2,r+2<e.length?(n|=(192&e[r+2])>>6,t+=i.charAt(n),n=63&e[r+2],t+=i.charAt(n)):(t+=i.charAt(n),t+="=")):(t+=i.charAt(n),t+="==");return t},utob:r,encode:l,encodeURI:function(e){return l(e,!0)},btou:h,decode:m}}(M,void 0!==L?L:{}),Ne.prototype.put=function(e,n){var t={key:e,value:n};if(this._keymap[e]=t,this.tail?(this.tail.newer=t).older=this.tail:this.head=t,this.tail=t,this.size===this.limit)return this.shift();this.size++},Ne.prototype.shift=function(){var e=this.head;return e&&(this.head.newer?(this.head=this.head.newer,this.head.older=D):this.head=D,e.newer=e.older=D,delete this._keymap[e.key]),e},Ne.prototype.get=function(e,n){var t=this._keymap[e];if(t!==D)return t===this.tail||(t.newer&&(t===this.head&&(this.head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=D,t.older=this.tail,this.tail&&(this.tail.newer=t),this.tail=t),n?t:t.value},Ne.prototype.find=function(e){return this._keymap[e]},Ne.prototype.set=function(e,n){var t,r=this.get(e,!0);return r?(t=r.value,r.value=n):(t=this.put(e,n))&&(t=t.value),t},Ne.prototype.toString=function(){for(var e="",n=this.head;n;)e+=String(n.key)+":"+n.value,(n=n.newer)&&(e+=" < ");return e},k.dictionary={eventTypes:{change:0,document:2,mousedown:3,touchstart:4,touchend:5,focusout:6,blur:7,unload:9,submit:10,reset:11,mouseup:12,drag:13,scroll:14,popstate:15,keydown:16,keyup:17,keypress:18,timing:20,idle:21,ajaxRequest:22,formValidationError:23,hashchange:25,botDetection:26,mouseenter:27,navigation:28,mousemove:29,error:30,thirdparty:31,custom:32,hover:33,thirdpartymap:34,performance:35,resource:36,clsdebug:37,resize:38,pageSnapshot:91,pageUpdate:92,resourceContent:93,corsDeniedResource:94,blackout:101,segmentChanged:102,titleChanged:103,clientAttribute:110,waterfall:111,lastSegment:112},elements:{DIV:0,SPAN:1,INPUT:2,FORM:3,SELECT:4,TEXTAREA:5,TABLE:6,TR:7,TD:8,IFRAME:9,TBODY:10,THEAD:11,LABEL:12},encodingTypes:{cd_number:0,cd_boolean:1,cd_string:2,cd_coordinate:3},performanceTimingEvents:{navigationStart:1,redirectStart:2,fetchStart:4,domainLookupStart:5,connectStart:7,secureConnectionStart:8,requestStart:10,responseStart:13,domLoading:15,domContentLoadedEventStart:17,domComplete:19,loadEventStart:20,loadEventEnd:21},encode:function(e,n){var t=n[e];return t!==D?t:e},encodeEventType:function(e){return k.dictionary.encode(e,k.dictionary.eventTypes)},encodeNodeName:function(e){return k.dictionary.encode(e,k.dictionary.elements)},encodeEncodingType:function(e){return k.dictionary.encode(e,k.dictionary.encodingTypes)},encodePerformanceTimingMeasurement:function(e){return k.dictionary.encode(e,k.dictionary.performanceTimingEvents)}},Oe.MAX_ENTRIES=150,Oe.DirectionType={BACK:1,FORWARD:2},Oe.UrlType={FUlL_URL:1,HASH_ONLY:2},Le.EVENTS={BlackoutEnter:"BlackoutEnter",BlackoutLeave:"BlackoutLeave"},Le.ALWAYS_FALSE=function(){return!1};var U,P={severity:{ERROR:0,WARN:1,INFO:2,DEBUG:3},types:{GENERAL_ERR:{code:100,count:0},INVALID_TIMING_ERR:{code:101,count:0},TOP_WINDOW_SIZE_ERR:{code:102,count:0},WINDOW_SIZE_NOT_VALID_ERR:{code:103,count:0},KEREN_ERR:{code:104,count:0}},currentDebugInfo:null,registerError:function(e,n){P.registerDebugInfo(P.severity.ERROR,e,n)},registerErrorAndLog:function(e,n){P.registerDebugInfoAndLog(P.severity.ERROR,e,n)},registerDebugInfoAndLog:function(e,n,t){P.registerDebugInfo(e,n,t),L.log(t)},registerDebugInfo:function(e,n,t){n.count++,null===P.currentDebugInfo&&(P.currentDebugInfo=new _e(e,n.code,n.count,t))},getRegisteredDebugInfo:function(e){var n=P.currentDebugInfo;return null===n||O.isUndefined(n)?null:(e&&P.clearDebugInfo(),n)},clearDebugInfo:function(){P.currentDebugInfo=null},setRegisteredDebugInfoOnEvent:function(e){if(null===e.getDebugInfo()||O.isUndefined(e.getDebugInfo())){var n=P.getRegisteredDebugInfo(!0);null!=n&&e.setDebugInfo(n)}},setErrorOnEvent:function(e,n,t){P.setDebugInfoOnEvent(e,P.severity.ERROR,n,t)},setErrorOnEventAndLog:function(e,n,t,r){P.setDebugInfoOnEvent(e,P.severity.ERROR,n,t),r?L.log(t,r):L.log(t)},setWarnOnEvent:function(e,n,t){P.setDebugInfoOnEvent(e,P.severity.WARN,n,t)},setDebugInfoOnEvent:function(e,n,t,r){if(null===e||O.isUndefined(e))L.log("Failed setting debug on non-existing event");else{var i=new _e(n,t.code,t.count,r);e.setDebugInfo(i)}}};U=function(t,r,i,u,c,o){var a={currentlyEncodedPageEvent:null};function s(e,n,t){var r=O.isNumber(e)&&O.isNumber(n);return r||o.setErrorOnEvent(a.currentlyEncodedPageEvent,o.types.WINDOW_SIZE_NOT_VALID_ERR,"Non valid values for window size for "+t+": x="+e+" y="+n),r?{width:e,height:n}:null}function f(e){return null!==e&&O.isNumber(e.width)&&O.isNumber(e.height)?e.width+"x"+e.height:"x"}function l(e){if(O.isNumber(e))return L.encodeAsBase(e,k.encoding.numberBase);L.log("Trying to encode a non-number "+e)}function d(e){if(O.isString(e))return l(L.hashcode(e));L.log("Trying to encode hashCode of a non-string "+e)}function n(e){if(O.isNumber(e.x)&&O.isNumber(e.y)){var n=Math.round(e.x),t=Math.round(e.y);return l(n)+"_"+l(t)}L.log("Trying to encode coordinate with non-numbers x,y : ("+e.x+","+e.y+")")}function v(e,n,t,r){O.isString(t)&&(r?e.push(L.Base64.encode(n)+"_"+L.Base64.encode(t)):e.push(n+"_"+t))}function h(e,n,t){O.isNumber(t)&&e.push(n+"_"+l(t))}function p(e,n,t,r){r=r||0;var i=u.mmRecordTimes?"_"+l(r):"",o=Math.round(n),a=Math.round(t);e.push(l(o)+"_"+l(a)+i)}return{encodePageDetails:function(e){var n=[];return e.frame&&v(n,"t",e.frame?"f":"p"),v(n,"u",d(e.urlWithoutHash)),e.hash&&v(n,"h",L.Base64.encode(e.hash)),i().state.lastSizes.window=O.isNumber(t.innerWidth)&&O.isNumber(t.innerHeight)?s(t.innerWidth,t.innerHeight,"[inner]"):!O.isUndefined(r.body)&&O.isNumber(r.body.offsetWidth)&&O.isNumber(r.body.offsetHeight)?s(r.body.offsetWidth,r.body.offsetHeight,"[offset]"):null,i().state.lastSizes.screen=s(t.screen.width,t.screen.height,"[screen]"),v(n,"s",f(i().state.lastSizes.window)),v(n,"sc",f(i().state.lastSizes.screen)),e.referrerWithoutHash&&v(n,"r",d(e.referrerWithoutHash)),k.reportBase64URLs&&v(n,"ub",L.Base64.encode(e.url)),n.join("*")},encodePageSnapshotData:function(e){var n="h",t=i().plugins.reporter.beaconEncoder.encodeSnapshotHtml(e.html);return t.compressed?n="hh":t.plain&&(n="p"),["sn_"+e.seq,"r_"+L.Base64.encode(e.referrer),"c_"+L.Base64.encode(e.cookie),"ch_"+e.charset,n+"_"+t.encoded].join("*")},encodeResize:function(e){var n=[];return v(n,"ws",f(e.window)),v(n,"sc",f(e.screen)),n.join("*")},encodeTimings:function(e){return O.reduce(e,function(e,n,t){var r="u_"+t+"*t_"+n.total;return O.isNumber(n.rendering)&&(r+="*r_"+n.rendering),O.isNumber(n.dns)&&(r+="*d_"+n.dns),O.isNumber(n.timeToFirstBuffer)&&(r+="*f_"+n.timeToFirstBuffer),O.isNumber(n.downloadTime)&&(r+="*w_"+n.downloadTime),O.isNumber(n.originalRenderTime)&&(r+="*o_"+n.originalRenderTime),O.isString(e)&&0<e.length?e+"**"+r:r},"")},encodeWaterfallTiming:function(e){var n=[];for(var t in e){var r,i=[],o={},a=[];for(r=0;r<e[t].length;r++){var u=[],c=null;for(var s in e[t][r])"name"===s?c=L.Base64.encode(e[t][r][s]):(o[s]===D&&(o[s]=a.length,a.push(s)),h(u,o[s],Math.round(e[t][r][s])));null!==c&&i.push(c+"_"+u.join("_")),c=null}0!==i.length&&n.push(t+"*"+a.join("_")+"*"+i.join("*"))}return n.join("**")},encodePerformanceTimings:function(e){var n=e.perf.timing,t=e.perf.navigation,r=e.browserTime,i=[];for(var o in n)void 0!==k.dictionary.performanceTimingEvents[o]&&h(i,k.dictionary.encodePerformanceTimingMeasurement(o),n[o]);return t&&O.isNumber(t.type)&&h(i,"nt",t.type),t&&O.isNumber(t.redirectCount)&&h(i,"rc",t.redirectCount),r&&h(i,"bt",r),i.join("*")},encodeAjaxRequest:function(e){var n=[];if(e.method&&v(n,"m",e.method),u.ajaxHashRecurrentUrls){var t=d(e.url),r=e.ajaxUrls.get(t);O.isUndefined(r)&&(e.ajaxUrls.set(t,e.url),v(n,"u",L.Base64.encode(e.url))),v(n,"uh",t)}else v(n,"u",L.Base64.encode(e.url));return e.duration&&v(n,"d",l(e.duration)),e.status&&v(n,"s",l(e.status)),e.statusText&&v(n,"st",L.Base64.encode(e.statusText)),e.requestHeaders&&v(n,"rqh",L.Base64.encode(e.requestHeaders)),e.requestContent&&v(n,"rqc",L.Base64.encode(e.requestContent)),e.responseHeaders&&v(n,"rh",L.Base64.encode(e.responseHeaders)),e.responseContent&&v(n,"rc",L.Base64.encode(e.responseContent)),n.join("*")},encodeResourceContent:function(e){var n=[];if(!O.isUndefined(e.url))return v(n,"u",L.Base64.encode(e.url)),e.type&&0<e.type.length&&v(n,"t",L.Base64.encode(e.type)),e.content&&0<e.content.length&&v(n,"dd",L.Base64.bytesToBase64(e.content)),e.error&&0<e.error.length&&v(n,"er",L.Base64.encode(e.error)),n.join("*")},encodeKeyValue:function(e){var n=[];return v(n,"n",L.Base64.encode(e.name)),v(n,"v",L.Base64.encode(""+e.val)),n.join("*")},encodeSegmentChanged:function(e){var n=[];return e.type&&n.push("t_"+e.type),e.current&&n.push("c_"+L.Base64.encode(e.current)),e.hint&&n.push("h_"+e.hint),e.last&&n.push("l_"+L.Base64.encode(e.last)),e.lastDwell&&n.push("ld_"+l(e.lastDwell)),n.join("*")},encodeKeyEvent:function(e){var n="";return e.unicode&&(n+=e.unicode),O.isUndefined(e.content)||(n+="_"+L.Base64.encode(e.content)),n},encodeClickDetails:function(e){return n(e.start)+"*"+n(e.end)+"*"+l(e.duration)},encodeMouseMove:function(e){u.mmDebug&&L.log("encoding coordArr["+e.length+"]:"+JSON.stringify(e));var n,t,r=[];for(n=0;n<e.length;n++)p(r,(t=e[n]).x,t.y,t.t);return r.join("*")},encodeHoverEvent:function(e){for(var n=[],t=[],r=e.length-1;0<=r;r--){var i=e[r];if(0<=t.indexOf(i))u.mhDebug&&L.log("encode hover skipping duplicate: ",i);else{var o=c.getSelectorExpression(i);if(n.push(o),t.push(i),t.length>=u.mhMaxListSize)break;u.mhDebug&&L.log("encoding hover selector: "+o,i)}}var a=n.join(" ");return u.mhDebug&&L.log("encoding total of ["+n.length+"] hovers: "+a),a},encodeKVMap:function(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&v(n,t,e[t],!0);return n.join("*")},encodeNumber:l,encodeBoolean:function(e){return e?"1":"0"},encodeCoordinate:function(e){if(O.isNumber(e.x)&&O.isNumber(e.y)){var n=Math.round(e.x),t=Math.round(e.y);return l(n)+"_"+l(t)}L.log("Trying to encode coordinate with non-numbers x,y : ("+e.x+","+e.y+")")},encodeCoordinate64:function(e){return L.Base64.encode(n(e))},encodeString:function(e){return L.Base64.encode(e)},encodeHashCode:d}}(M,A,function(){return V},E,S,P),Pe.prototype.add=function(e,n){return this._updates.push({ref:n,update:e}),this},Ue.INITIAL_COMPRESSION_FACTOR=.25,Ue.MINIMAL_COMPRESSION_FACTOR=.05,eventEncodingUtils={compress:function(e){return L.pako.gzip(e)},encodeTimestamp:function(e){var n=e.timestamp;return O.isNumber(n)||(L.log("Missing event timestamp",e),n=L.currentTimestamp()),U.encodeNumber(n)},encodeEventType:function(e){return k.encodeEventTypes?k.dictionary.encodeEventType(e):e},encodeExtraInfo:function(e){var n=e.extraInfo;if(O.isUndefined(n))return"";for(var t,r,i,o,a=[],u=We.prototype.extraInfoAttrs,c=0;c<u.length;c++){var s=u[c],f=n[s.name];O.isUndefined(f)||(t=a,r=s.encodeName,i=s.encodeFunc(f),o=s.encodeCode,O.isString(i)&&t.push(r+"."+o+"_"+i))}return a.join("*")},encodeDebugInfo:function(e){var n=e.debugInfo;if(O.isUndefined(n))return"-";var t=function(e,n,t){O.isUndefined(t)||e.push(n+"_"+t)},r=[];return t(r,"s",n.severity),t(r,"c",n.code),t(r,"i",n.count),n.msg&&n.count<=3&&t(r,"m",U.encodeString(n.msg)),r.join("*")}},je.COMPRESSED_INDICATION_CHARSET="ISO-8859-15",je.MINIMAL_COMPRESSION_FACTOR=.05,Be.currentRef=function(){return A.location.protocol+"//"+A.location.host+A.location.pathname},qe.prototype.track=function(e){var n=!this.current||this.current.ofSameSegment(e);return this.last=this.current,this.current=e,n},qe.prototype.getCurrent=function(){return this.current};var F,j,B,H,q,V={env:k,config:E,utils:L,_:O,sessionId:D,visitorId:D,debugHelper:(H=E,q=n,{visitLoadEvent:function(e){if(H.sendStateInfo){var n={};Se(n),Ce(n);var t={ver:q,config:function(e){var n,t={};for(n in H)H.hasOwnProperty(n)&&/glassboxid|mask|ajax|iframe|bychance/gi.test(n)&&("object"==typeof H[n]?0<(H[n].length||0):e[n]!==H[n])&&(t[n]=H[n]);return t}(n)};e.setExtraInfo(We.prototype.DETECTOR_CONFIG_ID,JSON.stringify(t))}},visitUnloadEvent:function(e){}}),page:{timing:{}},bindings:{registered:[],unsupportedEventTypes:[]},plugins:{},reports:{events:[],resources:[]},state:{loaded:!(qe.prototype.getLast=function(){return this.last||this.current}),clickStart:{},scrolling:{},unloading:!1,maxScrollReach:0,typableElementsLRUMap:new Ne(20),lastFocusData:{},mouseEnterReported:!1,hover:{hoverStartTimestamp:0,hoverElementList:[]},clsDebugCounter:0,lastSizes:{window:null,screen:null,dpr:M.devicePixelRatio}},touchDetected:!1,ajaxUrls:new Ne(20),historyManager:new Oe(M,T,M.history),blackoutManager:new Le(M,T,E.blackoutWhenLocationContains),debugInfoHandler:P,zoomType:{IN:1,OUT:2},version:"local_dev",segmentManager:new function(o,a){var e,u=!1,c=L.stripHash(o.location.href),s="",f={startedAt:L.currentTimestamp(),value:o.location.pathname,type:"path"};function r(e,n){var t="hash"===e?o.location.hash:o.location.pathname+o.location.hash,r=L.currentTimestamp(),i={type:e,hint:n,current:t,last:f.value,lastDwell:r-f.startedAt};f.startedAt=r,f.type=e,f.value=t,s=o.location.hash,c=L.stripHash(o.location.href),u=!0,a.emit("segmentChanged",i)}void 0!==We&&(e=We,We=function(){e.apply(this,arguments),this.subPage=s,this.referrer=c}),a.on("navigation",function(e){var n;e.direction===Oe.DirectionType.BACK?n="back":e.direction===Oe.DirectionType.FORWARD&&(n="forward");var t="path";e.urlType===Oe.UrlType.HASH_ONLY&&(t="hash"),r(t,n)}),a.on("init:loaded",function(){s=o.location.hash,c=L.stripHash(o.location.href),f.startedAt=L.currentTimestamp(),o.location.hash&&r("hash","load")}),this.createSegmentTracker=function(){return new qe},this.onUnload=function(){u&&a.emit("lastSegment",{last:f.value,lastDwell:L.currentTimestamp()-f.startedAt})}}(A,T),botDetector:new function(t,n,i){var o="bot.nh",r="bot.d",a={CLICKS_WITH_NO_MOUSE_MOVES:{code:"1",active:!0},NOT_TRUSTED_MOUSEEVENT:{code:"3",active:!0},INVALID_NAVIGATION_API_VALUES:{code:"4",active:!0},MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES:{code:"5",active:!0}},u={MANY_MOUSE_MOVES_BETWEEN_CLICKS:{code:"-1",active:!0}},c=!1,s=!1,f=null,l=null,d=0,v=100,h=0,p={robot:!1,human:!1},m=!1;function g(){e("mousemove",y),e("click",E),m=!1}function y(e){return c||(l=L.getCoordinate(e),d=L.currentTimestamp()),s&&h++,c=!0}function E(e){return e.type===k.mouseEvents.down&&function(e){if(e.type===k.mouseEvents.down){s=!0;var n,t=L.getCoordinate(e);null!==f?u.MANY_MOUSE_MOVES_BETWEEN_CLICKS.active&&!L.isSameCoordinates(t,f)?10<=h&&(n=u.MANY_MOUSE_MOVES_BETWEEN_CLICKS,L.log("Human Detected ["+n.code+"]"),p.human=!0,i.set(r,n.code),g()):a.CLICKS_WITH_NO_MOUSE_MOVES.active&&L.isCoordinatesDistLargerThan(t,f,10)&&0===h&&b(a.CLICKS_WITH_NO_MOUSE_MOVES):c&&function(e){if(a.MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES.active){var n=L.getCoordinate(e);if(null!==l&&L.isSameCoordinates(n,l)&&L.currentTimestamp()-d<v){var t=i.get(o);if(O.isUndefined(t))i.set(o,1);else{var r=parseInt(t);isNaN(r)&&(L.log("Bad format of non human counter in the robot cookie: "+r),r=1),r++,i.set(o,r),b(a.MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES),a.MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES.active=!1}}}}(e),h=0,f=t}}(e),n=e,a.NOT_TRUSTED_MOUSEEVENT.active&&"isTrusted"in n&&!1===n.isTrusted&&b(a.NOT_TRUSTED_MOUSEEVENT),!0;var n}function e(n,e){try{L.removeEventHandler(t.body,n,e)}catch(e){L.log("BotDetector failed to remove "+n+" listener. "+e.message(),e)}}function b(e){m&&(L.log("BotDetector has detected a bot with type: "+e.code),e.active=!1,i.set(r,e.code),p.robot=!0,g(),n.emit("botDetection",e.code))}this.init=function(){var e=i.get(r);e?L.log("Session was already Bot/Human classified with code: "+e):(m=!0,L.addEventHandler(t.body,"mousemove",y,!0),L.addEventHandler(t.body,"click",E,!0))},this.isActive=function(){return m},this.notifyMouseAction=E}(A,T,x),isCorsReporting:!Me(A,E.reportURI),initialize:function(e){if(V.version=e,L.log("Initializing Detector... ("+k.setup+" setup) VERSION:"+V.version),V.setClientCookies(),void 0!==E.enabledByChance&&!Ie(E.enabledByChance,x,"recording"))return k.disabled=!0,void L.log("recording is DISABLED (chances = "+E.enabledByChance+")");E.domRecordEnabled||void 0===E.domRecordEnabledByChance||Ie(E.domRecordEnabledByChance,x,"dom")&&"function"==typeof E.enableDomConfig&&(E.enableDomConfig(),L.log("DOM recording ENABLED (chances = "+E.domRecordEnabledByChance+")"));try{if(void 0!==l){var n=s.validate(l,E);if(0<n.errors.length)return void console.error("[EyeView-1401]: Detector configuration validation failure. validation report:"+n);L.log("configuration fields validation report:"+n)}else L.log("Warning: configuration scheme not set, skipping configuration validation.")}catch(e){return void console.error("[EyeView-1402]: Error while validating Detector configuration:"+e+". Detector is DISABLED.")}try{V.checkSupportModeSession(),V.initializePageDetails(),V.registerPlugins(),T.on(Le.EVENTS.BlackoutEnter,V.onBlackoutEnter),T.on(Le.EVENTS.BlackoutLeave,V.onBlackoutLeave),void 0!==V.plugins.domRecordingPlugin&&V.plugins.domRecordingPlugin.isSemiDomActivated()&&V.addDomReadyEventHandler(),V.updateScrollReach(),V.saveDocumentLoadEvent(V.page.initializationTimestamp),L.log("Extracted page details for "+V.page.id+" at "+V.page.urlWithoutHash),V.registerPreLoadEvents(),E.SCIntegration&&T.on("3rdpartymap:scReport",V.saveThirdPartyMapEvent),T.on("thirdPartyMap",function(e){V.saveThirdPartyMapEvent({value:e})}),T.emit("init:preloaded");var t=M.document.readyState;L.log("readyState on initialization: "+t),A.body&&"complete"===t?V.onLoad():L.addEventHandler(M,"load",V.onLoad,!1)}catch(e){L.log("ERROR: while initializing detector. Exception: ",e.stack?e.stack:e.message),console.log("WARNING[EyeView-1302]: Failed initializing detector script - "+e.message),V.saveClsDebugErrorEvent("initialize",e)}},disable:function(){sessionStorage["gb.disabled"]=!0,console.log("Glassbox Detector has been DISABLED. Starting from next navigation (or refresh of current page), recording is suspended. To re-enable Glassbox Detector please invoke enable() method.")},onBlackoutEnter:function(e){var n=V.createEventObject("blackout",L.currentTimestamp(),null);n.value=e,V.saveEvent(n)},onBlackoutLeave:function(){V.savePageUpdate()},onLoad:function(){L.log("onLoad - finalizing detector initialization. location:"+M.location.href);var e=L.currentTimestamp();V.state.loaded||(L.time("onLoadInitialization"),V.documentEvent&&0<A.title.length&&(void 0===V.page.title||0===V.page.title.length)&&(V.page.title=V.getPageTitle(),V.documentEvent.setExtraInfo(We.prototype.VISUAL_NAME,V.page.title)),E.botDetection&&!L.hasTouch()&&V.botDetector.init(),V.page.loadTimestamp=e,V.resolvePageLoadTime(V.page),E.reportValidationErrors&&T.on("formValidationError",V.saveValidationError),V.state.loaded=!0,T.emit("init:loaded"),V.registerPostLoadEvents(),V.plugins.domRecordingPlugin&&new mn(A,T),T.emit("init:post_binding"),L.timeEnd("onLoadInitialization"),L.log("onLoad - detector initialization completed. location:"+M.location.href))},registerPlugins:function(){var t=this;O.forOwn(V.plugins,function(e,n){e.initialize(T,t)&&L.log("Registered plugin: "+n)})},registerPreLoadEvents:function(){var e=function(){return V.state.unloading},n=[{type:"beforeunload",interception:V.interceptUnload,target:M,logicalName:"unload",filter:e},{type:"pagehide",interception:V.interceptUnload,target:M,logicalName:"unload",filter:e},{type:"resize",valueEncoding:U.encodeResize,filter:V.filterResize,interception:V.interceptResize,target:M},{type:V.getChangeEventType(),valueExtraction:V.extractElementValue,interception:V.interceptFocusLost,filter:V.filterNonChangableEventsElements,logicalName:"change",target:A},{type:"reset",target:A},{type:"submit",valueExtraction:V.extractElementSource,valueEncoding:U.encodeHashCode,target:A},{type:V.getFocusInEventType(),valueExtraction:V.extractElementValue,interception:V.interceptFocusIn,filter:V.filterNonTypableElements,target:A}];V.page.hasTouch?(n.push({type:"touchstart",interception:V.interceptClickStart,target:A}),n.push({type:L.isHybridAndroid()?"touchmove":"touchend",interception:V.interceptClickEnd,valueEncoding:U.encodeClickDetails,target:A})):(n.push({type:k.mouseEvents.down,interception:V.interceptClickStart,target:A,logicalName:"mousedown"}),n.push({type:k.mouseEvents.up,interception:V.interceptClickEnd,valueEncoding:U.encodeClickDetails,target:A,logicalName:"mouseup"})),"blur"!==V.getChangeEventType()&&n.push({preload:!0,type:"blur",valueExtraction:V.extractElementValue,interception:V.interceptBlur,filter:V.filterNonTypableElements,logicalName:"change",target:A}),E.recordMouseMoves&&n.push({type:"mousemove",valueExtraction:V.extractMouseMoveValue,valueEncoding:U.encodeMouseMove,encodeValue:!1,interception:V.interceptMouseMove,dependent:!0,dontSendElement:!0,target:A}),E.recordHovers&&n.push({type:"mouseover",encodeValue:!1,filter:V.filterHovers,interception:V.interceptMouseOver,valueEncoding:U.encodeHoverEvent,target:A}),E.recordScrolls&&n.push({type:"scroll",debounceBy:E.debounceScrolls,valueExtraction:V.extractScrollValue,valueEncoding:U.encodeCoordinate,filter:V.filterScrollElements,interception:V.interceptScroll,dependent:E.dependentScroll,target:A}),E.recordErrors&&n.push({type:"error",valueExtraction:V.extractErrorValue,interception:V.interceptError,target:M}),E.recordConsoleErrors&&function(e){if("object"==typeof console){var n,t=function(e,n){if("function"==typeof console[e]){var t=console[e];console[e]=function(){var e=Array.prototype.slice.call(arguments);t.apply(console,e),n(e)}}};for(n in e)t(n,e[n])}}({error:V.onConsoleError});var t=L.getMouseEnterTarget();t!==A&&t!==M||n.push({type:"mouseenter",interception:V.interceptMouseEnter,target:t}),V.shouldListenToKeyEvents()&&(n.push({type:"keydown",interception:V.interceptKeyboard,valueEncoding:U.encodeKeyEvent,dependent:!0,target:A}),n.push({type:"keypress",interception:V.interceptKeyboard,valueEncoding:U.encodeKeyEvent,dependent:!0,target:A})),E.domRecordEnabled&&(T.on("pageSnapshot:save",V.savePageSnapshotEvent),T.on("pageUpdate",V.savePageUpdate)),E.resourcesRecordEnabled&&T.on("saveResourceEvent",V.saveResourceDataEvent),E.resourcesRecordAllowCors&&T.on("saveCorsDeniedEvent",V.saveCorsDeniedDataEvent),E.clientAttributesEnabled&&T.on("clientAttribute",V.saveClientAttributeEvent),E.resourceTimingRecordEnabled&&Ie(E.resourceTimingRecordEnabledByChance,x,"performanceRecord")&&T.on("waterfall",V.savePerformanceDataEvent),V.page.hasTimingAPI&&!E.recordAjaxCallsAnyway||(T.on("ajax:load",V.recordAjaxResource),T.on("ajax:error",V.recordAjaxResource)),T.on("ajax:loadend",V.saveAjaxRequestEvent),T.on("segmentChanged",V.saveSegmentChangedEvent),T.on("lastSegment",V.saveLastSegmentEvent),T.on("titleChanged",V.saveTitleChanged),T.on("botDetection",V.saveBotDetectionEvent),T.on("reporter:idle",V.saveIdleEvent),V.bindPageEvents(n)},saveIdleEvent:function(e){var n=L.currentTimestamp(),t=V.createEventObject("idle",n,null);t.value=n-e.idleBaseTime,t.binding={valueEncoding:U.encodeNumber},t.setExtraInfo(We.prototype.TIME_SINCE_LAST_EVENT,n-e.latestEventTime),V.saveEvent(t)},saveBotDetectionEvent:function(e){var n=V.createEventObject("botDetection",L.currentTimestamp(),null);n.value=e,n.shouldEncodeValue=!1,V.saveEvent(n)},registerPostLoadEvents:function(){var e=[];V.state.mouseEnterReported||L.getMouseEnterTarget()!==A.body||e.push({type:"mouseenter",interception:V.interceptMouseEnter,target:A.body}),0<e.length&&V.bindPageEvents(e)},bindPageEvents:function(e){L.time("bindPageEvents"),O.forEach(e,function(e){V.registerEventBinding(e)}),L.log("Bound event types ("+V.bindings.registered.length+"): "+O.pluck(V.bindings.registered,"type")+(V.bindings.unsupportedEventTypes.length?" Unsupported event types: ["+V.bindings.unsupportedEventTypes.join(", ")+"].":"")),L.timeEnd("bindPageEvents")},registerEventBinding:function(n){var e=n.target||M.document.body;if(O.isUndefined(e)||null==e)L.log("Couldn't register '"+n.type+"' handler on a non-existing element.",n);else try{V.handleElementsEvents(e,n)}catch(e){L.log("Failed binding '"+n.type+"'. Error: "+e.message,e),M.console&&console.error(e)}},handleElementsEvents:function(e,n){var t=n.type;if(O.contains(k.eventTypes,t))if(L.isEventSupported(t)){var r=V.createHandler(n);L.addEventHandler(e,t,r,!0),V.bindings.registered.push({type:t,el:e,handler:r})}else V.bindings.unsupportedEventTypes.push(t)},createHandler:function(n){var e=function(e){if(we.bounceAll(e.type),V.handleDOMEvent(e,n),"beforeunload"!==e.type)return!0};if(0<(n.debounceBy||0)){var t=we[n.type];t?e=t(e,n.debounceBy).debouncedHandler:L.log("WARN: event de-bouncing for type '"+n.type+"' is not supported.")}return e},handleDOMEvent:function(n,e){try{if(n=n||M.event,!O.isUndefined(n._cls_handled)&&!0===n._cls_handled)return void L.log("WARN: handler already handled this event. skipping..",n);n._cls_handled=!0,L.time("handleDOMEvent_"+n.type);var t=L.extractElementFromEvent(n),r=L.getElementId(t);E.ignorableElementIds&&O.contains(E.ignorableElementIds,r)||V.handleEvent(n,t,e),L.timeEnd("handleDOMEvent_"+n.type)}catch(e){L.log("ERROR: while handling "+n.type+" DOM event ",n," Exception: ",e.stack?e.stack:e.message),V.saveClsDebugErrorEvent("handleDOMEvent",e,"event type="+n.type)}},handleEvent:function(e,n,t){if(!O.isFunction(t.filter)||!t.filter(n,e)){var r=L.currentTimestamp(),i=e.type;L.time("handleEvent_"+i);var o=V.createEventObject(i,r,n);o.domEvent=e;var a=!O.isUndefined(t.dontSendElement)&&!0===t.dontSendElement;if(o.selectorExpression=a?k.encoding.rootSelector:S.getSelectorExpression(n)||k.encoding.rootSelector,o.binding=t,O.isUndefined(t.encodeValue)||!1!==t.encodeValue||(o.shouldEncodeValue=!1),O.isUndefined(t.dependent)||!0!==t.dependent||(o.dependent=!0),V.extractValue(o,t),V.extractExternalId(o,n),V.interceptReport(o,t),E.reportVisualNames&&o.report&&!a){var u=V.extractVisualName(n);u&&o.setExtraInfo(We.prototype.VISUAL_NAME,u)}V.autoMaskingSignaled&&(o.setExtraInfo(We.prototype.AUTO_MASKING,!0),V.autoMaskingSignaled=!1),V.saveEvent(o),T.emit("event:"+o.type,o),L.timeEnd("handleEvent"+i)}},createEventObject:function(e,n,t){return new We(e,n,t,V.page.id)},onDomReady:function(){A.addEventListener?A.removeEventListener("DOMContentLoaded",V.onDomReady,!1):A.detachEvent("onreadystatechange",V.onDomReady),T.emit("init:domready")},onAutoMaskingApplied:function(e){L.log("auto masking was applied on element: "+e.tagName+" [id="+e.id+"]"),V.autoMaskingSignaled=!0},addDomReadyEventHandler:function(){"complete"!==A.readyState&&(A.addEventListener?M.addEventListener("DOMContentLoaded",V.onDomReady,!1):A.attachEvent("onreadystatechange",V.onDomReady))},extractValue:function(n,e){try{if(!O.isUndefined(e.valueExtraction)){var t=e.valueExtraction(n.domEvent,n.element);O.isUndefined(t)||null==t||(n.value=t)}}catch(e){L.log("Failed extracting value for event "+n.type+" - "+e.name+": "+e.message,e),"clsdebug"!==n.type&&V.saveClsDebugErrorEvent("extractValue",e,"event type="+n.type)}},extractExternalId:function(e,n){if(n&&L.isElement(n)&&!O.isUndefined(E.externalIdAttr)&&O.isString(E.externalIdAttr)&&0<E.externalIdAttr.length){var t=L.getAttributeForElement(n,E.externalIdAttr);null!==t&&0<t.length&&e.setExtraInfo(We.prototype.EXTERNAL_ID,t)}},interceptReport:function(n,e){if(!O.isUndefined(e.interception))try{n.report=e.interception(n)}catch(e){L.log("Failed intercepting "+n.type+" event: "+e.message,e,n),"clsdebug"!==n.type&&V.saveClsDebugErrorEvent("interceptReport",e,"event type="+n.type)}},addEvent:function(e){V.config.debugMode&&V.reports.events.push(e)},getFocusInEventType:function(){return L.isOldIE()?"focusin":"focus"},getChangeEventType:function(){return L.isOldIE()?"onfocusout"in A?"focusout":"blur":"change"},startFocusTiming:function(e){var n=L.currentTimestamp(),t=V.state.lastFocusData.startTime;V.state.lastFocusData={element:e,startTime:n,prevFocusStartTime:t}},endFocusTiming:function(e){if(V.state.lastFocusData.element===e){var n=L.currentTimestamp();V.state.lastFocusData.focusTime=n-V.state.lastFocusData.startTime}else L.trace("Cannot measure focus time because of element mismatch. ")},filterNonTypableElements:function(e,n){return null===e||(V.isChangebleElement(e)&&("focus"===n.type||"focusin"===n.type?V.startFocusTiming(e):"blur"===n.type&&V.endFocusTiming(e)),!V.isTypableElement(e))},filterNonChangableEventsElements:function(e,n){return null===e||null===n||(V.isChangebleElement(e)&&V.endFocusTiming(e),"change"!==n.type&&!V.isChangebleElement(e))},interceptFocusIn:function(e){return V.checkTypedContentHasChangedAndUpdate(e),!1},interceptFocusLost:function(e){return null!==e&&null!==e.element&&(V.state.lastFocusData.focusTime&&e.setExtraInfo(e.FOCUS_TIME_ATTR,V.state.lastFocusData.focusTime),!!V.isSelectableElement(e.element)||V.checkTypedContentHasChangedAndUpdate(e))},interceptBlur:function(e){return V.state.lastFocusData.focusTime&&e.setExtraInfo(e.FOCUS_TIME_ATTR,V.state.lastFocusData.focusTime),V.checkTypedContentHasChangedAndUpdate(e)},checkTypedContentHasChangedAndUpdate:function(e){var n="focus"===e.type||"focusin"===e.type,t="blur"===e.type||"focusout"===e.type,r=e.selectorExpression,i=e.value;if(null===i||O.isUndefined(i))return!1;var o={text:i,markAutoComplete:!1},a=V.state.typableElementsLRUMap.set(r,o),u=O.isUndefined(a);if(n&&!u&&a.text!==i&&0<=i.toLocaleLowerCase().indexOf(a.text.toLocaleLowerCase())&&(o.markAutoComplete=!0),t&&!u&&a.markAutoComplete){var c=V.state.lastFocusData.prevFocusStartTime;if(!O.isUndefined(c)&&O.isNumber(c)&&V.state.lastFocusData.element===e.element){var s=L.currentTimestamp()-c;e.setExtraInfo(e.FOCUS_TIME_ATTR,s)}else L.log("Unable to compute total auto-complete time"),e.setExtraInfo(e.FOCUS_TIME_ATTR,-1);return e.setExtraInfo(e.AUTO_COMPLETE_ATTR,!0),!0}return u||a.text!==i},isMouseEvent:function(e){return e===k.mouseEvents.down||e===k.mouseEvents.up},isTouchEvent:function(e){return"touchstart"===e||"touchend"===e||"touchmove"===e},interceptMouseEnter:function(e){if(V.state.mouseEnterReported)return!1;var n=L.getCoordinate(e.domEvent);return e.setExtraInfo(We.prototype.COORDINATE_ATTR,n),V.removeEventBinding("mouseenter"),V.state.mouseEnterReported=!0,V.page.hasTouch&&!V.touchDetected&&L.isChromeDesktop()&&(V.switchTouchToMouse(),V.page.hasTouch=!1),!0},switchTouchToMouse:function(){L.log("Mouse Detected. Switch touch event to mouse events"),V.removeEventBinding("touchstart"),L.isHybridAndroid()?V.removeEventBinding("touchmove"):V.removeEventBinding("touchend");var e=[{type:k.mouseEvents.down,interception:V.interceptClickStart,target:A,logicalName:"mousedown"},{type:k.mouseEvents.up,interception:V.interceptClickEnd,valueEncoding:U.encodeClickDetails,target:A,logicalName:"mouseup"}];V.bindPageEvents(e)},filterHovers:function(n,e){try{if("undefined"==typeof jQuery||O.isUndefined(jQuery)||O.isUndefined(jQuery._data))return!0;for(var t=n,r=1,i=O.isNumber(E.mhDeepLevel)?E.mhDeepLevel:1;null!==t&&t!==A.body&&r<=i;){var o=jQuery._data(t,"events");if(o&&o.mouseover&&0<o.mouseover.length)return E.mhDebug&&L.log("++ Hover adding element(level-"+r+") "+(t.id?t.id:""),t),V.addHoverElement(t),!0;r++,t=t.parentElement}}catch(e){L.log("Exception while extracting hover information for element : ",n,e.message,e),V.saveClsDebugErrorEvent("filterHovers",e,"element="+(n?n.nodeName:"null"))}return!0},addHoverElement:function(e){V.state.hover.hoverElementList.length<E.mhMaxInMemeoryHovers?(V.state.hover.hoverElementList.push(e),V.state.hover.hoverStartTimestamp=L.currentTimestamp()):L.log("warn: exceed size of hover elements (>100). skipping..")},cleanHoverElements:function(){E.mhDebug&&L.log("Hover cleaning"),V.state.hover.hoverElementList=[],V.state.hover.hoverStartTimestamp=0},filterResize:function(){return L.isOldIE()},interceptResize:function(e){var n=L.getWindowSize(),t=L.getScreenSize(),r=!1;return null===n||null===V.state.lastSizes.window||V.state.lastSizes.window.width===n.width&&V.state.lastSizes.window.height===n.height||(V.state.lastSizes.window=n,r=!0),null===t||null===V.state.lastSizes.screen||V.state.lastSizes.screen.width===t.width&&V.state.lastSizes.screen.height===t.height||(V.state.lastSizes.screen=t,r=!0),M.devicePixelRatio!==V.state.lastSizes.dpr&&(M.devicePixelRatio>V.state.lastSizes.dpr?e.setExtraInfo(e.ZOOM,V.zoomType.IN):e.setExtraInfo(e.ZOOM,V.zoomType.OUT),V.state.lastSizes.dpr=M.devicePixelRatio),e.value=V.state.lastSizes,r},interceptMouseOver:function(e){return!1},interceptClickStart:function(e){if(V.botDetector.isActive()&&V.isMouseEvent(e.type)&&V.botDetector.notifyMouseAction(e.domEvent),V.isTouchEvent(e.type)&&(V.touchDetected=!0),E.recordHovers&&V.saveHoverEvent(),V.state.clickStart=V.createClickDetailsObject(e),e.setExtraInfo(We.prototype.COORDINATE_ATTR,V.state.clickStart),!O.isUndefined(e.element)){var n=L.getElementXYCoordinates(e.element);n&&e.setExtraInfo(We.prototype.SYNC_COORDINATE,n)}return L.isHybrid()&&e.addHybridActionDataItem("start",{x:V.state.clickStart.x,y:V.state.clickStart.y}),!0},interceptClickEnd:function(e){V.botDetector.isActive()&&V.isMouseEvent(e.type)&&V.botDetector.notifyMouseAction(e.domEvent);var n={start:V.state.clickStart,end:V.createClickDetailsObject(e)};if(!(O.isNumber(n.start.x)&&O.isNumber(n.start.y)))return L.log("Dragging event with no captured click start."),!1;var t=Math.abs(n.end.x-n.start.x)>E.minDragPixels||Math.abs(n.end.y-n.start.y)>E.minDragPixels;if(t){e.type="drag",n.duration=n.start.timestamp?e.timestamp-n.start.timestamp:-1,e.value=n;var r=L.getElementXYCoordinates(n.start.elementObj);r&&e.setExtraInfo(We.prototype.SYNC_COORDINATE,r),L.isHybrid()&&(e.addHybridActionDataItem("start",{x:n.start.x,y:n.start.y}),e.addHybridActionDataItem("end",{x:n.end.x,y:n.end.y}))}return V.state.clickStart={},t},interceptError:function(e){return e.value&&0<e.value.length},interceptUnload:function(e){L.time("unload"),L.log("Unloading..."),V.state.unloading=!0,V.segmentManager.onUnload();var n=L.currentTimestamp();V.page.hasTimingAPI||(sessionStorage["gb.lastReferrer"]=U.encodeNumber(n)+"_"+L.Base64.encode(V.page.urlWithoutHash));var t=n-V.page.initializationTimestamp;return e.setExtraInfo(e.FOCUS_TIME_ATTR,t),e.setExtraInfo(e.SCROLL_REACH,Math.round(V.state.maxScrollReach)),V.debugHelper.visitUnloadEvent(e),L.timeEnd("unload"),e.timestamp=n,!0},updateScrollReach:function(){V.state.maxScrollReach=Math.max(V.state.maxScrollReach,L.getCurrentScrollReach())},interceptScroll:function(e){return"#document"===e.element.nodeName&&V.updateScrollReach(),!0},filterScrollElements:function(e,n){return!(null!=e&&"MARQUEE"!==e.nodeName)},interceptMouseMove:function(e){return e.lastSingleMoveTimestamp=e.timestamp,e.setExtraInfo(e.FOCUS_TIME_ATTR,0),!0},createClickDetailsObject:function(e){var n=L.getCoordinate(e.domEvent);return n.elementObj=e.element,n.el=e.selectorExpression,n.timestamp=e.timestamp,n},shouldListenToKeyEvents:function(){return E.recordEnterForInputs||V.recordAutoCompleteRelatedChars()},recordAutoCompleteRelatedChars:function(){return void 0===V.acCharsSupport&&(V.acCharsSupport=E.recordTypingAll||E.supportNativeAutoComplete||E.recordTypingForAttrs&&0<E.recordTypingForAttrs.length||E.recordTypingForClasses&&0<E.recordTypingForClasses.length||E.recordTypingForIDs&&0<E.recordTypingForIDs.length),V.acCharsSupport},resolveKeyData:function(e){var n=e.domEvent,t=e.element.value,r=e.element,i=n.keyCode||n.charCode;e.value={unicode:i};var o=L.isMaskedElement(r);return"keypress"===e.type?13!==i&&8!==i&&("0"!==n.charCode&&(o?e.value={unicode:42}:O.isUndefined(t)||null===t||(e.value.content=t+String.fromCharCode(i)),!0)):"keydown"===e.type&&(38===i||40===i||13===i?(o||(e.value.content=e.element.value),!0):8===i&&!O.isUndefined(t)&&null!==t&&!o&&(e.value.content=0<t.length?t.substring(0,t.length-1):"",!0))},interceptKeyboard:function(e){var n=e.element;if(!(n&&("INPUT"===n.nodeName||"BUTTON"===n.nodeName)))return!1;var t,r=13===(e.domEvent.keyCode||e.domEvent.charCode);if(e.shouldEncodeValue=!1,r&&E.recordEnterForInputs)return V.resolveKeyData(e);if(E.supportNativeAutoComplete&&(n.hasAttribute("autocomplete")||n.hasAttribute("aria-autocomplete")&&"none"!==n.getAttribute("aria-autocomplete")||n.hasAttribute("class")&&O.contains(n.getAttribute("class"),"autocomplete")))return V.resolveKeyData(e);if(E.recordTypingAll)return V.resolveKeyData(e);if(E.recordTypingForAttrs&&0<E.recordTypingForAttrs.length)for(t=0;t<E.recordTypingForAttrs.length;t++)if(n.hasAttribute(E.recordTypingForAttrs[t]))return V.resolveKeyData(e);if(n.hasAttribute("class")&&E.recordTypingForClasses&&0<E.recordTypingForClasses.length)for(t=0;t<E.recordTypingForClasses.length;t++)if(O.contains(n.getAttribute("class"),E.recordTypingForClasses[t]))return V.resolveKeyData(e);var i=L.getElementId(n);if(i&&E.recordTypingForIDs&&0<E.recordTypingForIDs.length)for(t=0;t<E.recordTypingForIDs.length;t++)if(i===E.recordTypingForIDs[t])return V.resolveKeyData(e);return!1},recordAjaxResource:function(e){V.addResource("ajax",e.url,e.timestamp)},addResource:function(e,n,t){var r=new ze(e,n,t);return V.reports.resources.push(r),T.emit("timingResource",r),r},saveEvent:function(e){if(!V.blackoutManager.isUnderBlackout()){var n=V.renameEventType(e);if(V.addEvent(e),P.setRegisteredDebugInfoOnEvent(e),E.debugMode&&(e.report||E.traceMode)){var t=e.type===n?e.type:e.type+"("+n+")",r=!O.isUndefined(e.selectorExpression)&&e.selectorExpression!==k.encoding.rootSelector&&"#document"!==e.selectorExpression;V.shouldLog(e.type)&&L.log("saving event: "+t+(r?" -> "+e.selectorExpression:"")+V.eventValueToString(e)+(e.report?"":" [not reported]"),e)}V.plugins.domRecordingPlugin&&V.plugins.domRecordingPlugin.getDomMasker().isDomMasked(e.element,ne.SELF_OR_ANY_PARENT,ee.OMIT)||e.report&&T.emit("saveEvent",e)}},shouldLog:function(e){return"mousemove"===e?!E.suppressMouseMovesDebug||E.mmDebug:"scroll"!==e||E.scrollDebug},renameEventType:function(e){var n=e.type;return O.isUndefined(e.binding)||O.isUndefined(e.binding.logicalName)||"drag"===e.type||(e.type=e.binding.logicalName),n},eventValueToString:function(e){var n=" {V="+(e.value||"NONE");if(e.extraInfo)for(var t in e.extraInfo)e.extraInfo.hasOwnProperty(t)&&(n=n+","+t+"="+e.extraInfo[t]);return null===e.getDebugInfo()||O.isUndefined(e.getDebugInfo())||(n=n+",DI-"+e.getDebugInfo().code),n+="}"},saveDocumentLoadEvent:function(e){var n=V.createEventObject("document",e,null);n.value=V.page,n.binding={valueEncoding:U.encodePageDetails},n.shouldEncodeValue=!1,V.page.title=V.getPageTitle(),V.page.title&&n.setExtraInfo(We.prototype.VISUAL_NAME,V.page.title),n.setExtraInfo(We.prototype.WINDOW_DEPTH,oe.tryGetCurrentDepth(M)),n.setExtraInfo(We.prototype.HISTORY_LENGTH,history.length),E.mobileHybridId&&n.setExtraInfo(We.prototype.MOBILE_HYBRID_ID,E.mobileHybridId),V.documentEvent=n;var t=function(){V.saveEvent(n),T.emit("event:document")};this.debugHelper.visitLoadEvent(n);V.documentEventHook?V.documentEventHook(n,t):t()},savePageUpdate:function(){var e=V.createEventObject("pageUpdate",L.currentTimestamp(),null);V.saveEvent(e)},onConsoleError:function(e){var n=V.createEventObject("error",L.currentTimestamp(),null);n.value=e.join(" "),n.shouldEncodeValue=!0,V.saveEvent(n)},saveTitleChanged:function(){var e=V.createEventObject("titleChanged",L.currentTimestamp(),null);e.value=A.title,e.shouldEncodeValue=!0,V.saveEvent(e)},saveSegmentChangedEvent:function(e){var n=V.createEventObject("segmentChanged",L.currentTimestamp(),null);n.value=e,n.shouldEncodeValue=!1,n.binding={valueEncoding:U.encodeSegmentChanged},V.saveEvent(n)},saveLastSegmentEvent:function(e){var n=V.createEventObject("lastSegment",L.currentTimestamp(),null);n.value=e,n.shouldEncodeValue=!1,n.binding={valueEncoding:U.encodeSegmentChanged},V.saveEvent(n)},savePageSnapshotEvent:function(e){var n=V.useCurrentTimeForPagesnapshot?L.currentTimestamp():V.page.initializationTimestamp,t=V.createEventObject("pageSnapshot",n,null);t.value=e,t.binding={valueEncoding:U.encodePageSnapshotData},t.shouldEncodeValue=!1,V.saveEvent(t)},saveAjaxRequestEvent:function(e){var n=V.createEventObject("ajaxRequest",L.currentTimestamp(),null);e.ajaxUrls=V.ajaxUrls,n.value=e,n.element=e.lastFocusedElement,n.selectorExpression=S.getSelectorExpression(e.lastFocusedElement)||k.encoding.rootSelector,n.binding={valueEncoding:U.encodeAjaxRequest},n.shouldEncodeValue=!1,V.saveEvent(n)},saveClsDebugErrorEvent:function(e,n,t){var r=V.formatClsDebugMessage(e,n,t);if(0!==r.length){var i=V.createEventObject("clsdebug",L.currentTimestamp(),null);i.value=r,V.saveEvent(i)}},formatClsDebugMessage:function(e,n,t){if(V.state.clsDebugCounter>=E.clsDebugMaxReports)return"";V.state.clsDebugCounter++;var r=n?n.stack?n.stack:n.name+": "+n.message:"";return"CLS Error in "+e+" "+(t?"{"+t+"} ":"")+(0<(r=L.truncateStr(r,E.clsDebugCharsLimit,!0)).length?": "+r:"")},eventSaver:function(t,r){return function(e){var n=V.createEventObject(t,L.currentTimestamp(),null);n.value=e,n.binding={valueEncoding:r},n.shouldEncodeValue=!1,V.saveEvent(n)}},saveValidationError:function(e){var n=V.createEventObject("formValidationError",L.currentTimestamp(),null);n.element=e.element,n.value=e.message,n.selectorExpression=e.selector,V.saveEvent(n)},saveHoverEvent:function(){var e=V.createEventObject("hover",V.state.hover.hoverStartTimestamp,null);0!==V.state.hover.hoverElementList.length?(E.mhDebug&&L.log("saving "+V.state.hover.hoverElementList.length+" hovers"),e.value=V.state.hover.hoverElementList,V.cleanHoverElements(),e.binding={valueEncoding:U.encodeHoverEvent},e.shouldEncodeValue=!1,V.saveEvent(e)):E.mhDebug&&L.log("no hovers to report")},saveCustomEvent:function(e){var n=V.createEventObject("custom",L.currentTimestamp(),null);n.value=e,!O.isUndefined(e.domEl)&&L.isDOMElement(e.domEl)&&(n.element=e.domEl,n.selectorExpression=S.getSelectorExpression(e.domEl)||k.encoding.rootSelector),n.binding={valueEncoding:U.encodeKeyValue},n.shouldEncodeValue=!1,V.saveEvent(n)},saveThirdPartyMapEvent:function(e){var n=V.createEventObject("thirdpartymap",L.currentTimestamp(),null);n.value=e.value,n.binding={valueEncoding:U.encodeKVMap},e.type&&n.setExtraInfo(We.prototype.TP_INTEGRATION_TYPE,e.type),e.element&&(n.element=e.element,n.selectorExpression=S.getSelectorExpression(e.element)||k.encoding.rootSelector),n.shouldEncodeValue=!1,V.saveEvent(n)},saveResourceDataEvent:function(e){var n=V.createEventObject("resourceContent",L.currentTimestamp(),null);n.value=e,n.binding={valueEncoding:U.encodeResourceContent},n.shouldEncodeValue=!1,V.saveEvent(n)},saveCorsDeniedDataEvent:function(e){var n=V.createEventObject("corsDeniedResource",L.currentTimestamp(),null);n.value=e,V.saveEvent(n)},saveClientAttributeEvent:function(e){var n=V.createEventObject("clientAttribute",L.currentTimestamp(),null);n.value=e,n.binding={valueEncoding:U.encodeKeyValue},n.shouldEncodeValue=!1,V.saveEvent(n)},savePerformanceDataEvent:function(e){var n=V.createEventObject("waterfall",L.currentTimestamp(),null);n.value=e,n.binding={valueEncoding:U.encodeWaterfallTiming},n.shouldEncodeValue=!1,V.saveEvent(n)},initializePageDetails:function(){L.time("initializePageDetails");var e=V.page;e.initializationTimestamp=L.currentTimestamp(),e.id=L.uuid(),e.frame=M.self!=top,e.frame&&(e.referrerWithoutHash=L.getReferrerUrlWithoutHash());var n=L.getLocationUrlSplitByHash();e.url=n.url,e.urlWithoutHash=n.withoutHash,e.hash=n.hash,e.hasTouch=L.hasTouch(),e.hasTimingAPI=L.hasTimingAPI(),e.title=V.getPageTitle(),L.timeEnd("initializePageDetails")},getPageTitle:function(){return L.truncateStr(A.title,E.titleCharsLimit,!0)},resolvePageLoadTime:function(e){if(e.hasTimingAPI)V.acquirePerformanceTiming();else{var n=sessionStorage["gb.lastReferrer"];if(n){var t=A.referrer.replace(/#.*/,""),r=n.split("_"),i=L.Base64.decode(r[1]);if(t===i){var o=parseInt(r[0],36);e.timing.total=e.loadTimestamp-o,V.saveTimingEvent({page:e.timing})}else L.log("Referrer does not match referrer stored in timing cookie: "+t+" != "+i)}}},saveTimingEvent:function(e){var n=V.createEventObject("timing",L.currentTimestamp(),M.document);n.value=e,n.binding={valueEncoding:U.encodeTimings},V.page.title&&n.setExtraInfo(We.prototype.VISUAL_NAME,V.page.title),V.saveEvent(n)},savePerformanceEvent:function(e){var n=V.createEventObject("performance",L.currentTimestamp(),M.document);M.performance&&M.performance.timing&&(n.value={perf:M.performance,browserTime:e},n.binding={valueEncoding:U.encodePerformanceTimings},V.page.title&&n.setExtraInfo(We.prototype.VISUAL_NAME,V.page.title),n.shouldEncodeValue=!1,V.saveEvent(n))},acquirePerformanceTiming:function(){if(0===M.performance.timing.loadEventEnd)M.setTimeout(V.acquirePerformanceTiming,300);else{var e=L.currentTimestamp()-V.page.initializationTimestamp;V.savePerformanceEvent(e)}},setClientCookies:function(){var e=function(e,n,t){var r,i;if(t.visitorIdByQueryParam||t.sessionIdByQueryParam){var o=L.parseQuery(e.location.search.substring(1));r=o[t.sessionIdByQueryParam],i=o[t.visitorIdByQueryParam]}var a,u,c,s,f,l,d,v,h=(s=c=u=!1,(a=i)?a!==n.get(k.cookies.visitor)&&(L.log("using provided visitor ID value: "+a),s=c=!0):(a=n.get(k.cookies.visitor))||(c=u=!0,a=L.uuid()),c&&(n.set(k.cookies.visitor,a,L.dateFromNow(15768e7)),L.log("set cookie with visitor ID: "+a)),{isNew:u,visitorId:a,corsReset:s}),p=(f=h.isNew,v=d=!1,(l=r)?l!==n.get(k.cookies.session)&&(L.log("using provided session ID value: "+l),v=d=!0):(l=n.get(k.cookies.session))||(l=L.uuid()+":"+(f?"0":"1"),d=!0),d&&(n.set(k.cookies.session,l),L.log("Set cookie with session ID: "+l)),{sessionId:l,corsReset:v});return{sessionId:p.sessionId,visitorId:h.visitorId,corsReset:p.corsReset||h.corsReset}}(A,N,E);this.isCorsReporting&&e.corsReset&&void 0!==Z&&Z.forceCorsReset(),this.visitorId=e.visitorId,this.sessionId=e.sessionId},registerPlugin:function(e,n){V.plugins[e]=n},removeEventBinding:function(e){for(var n=-1,t=0;t<V.bindings.registered.length;t++){var r=V.bindings.registered[t];r.type===e&&(L.removeEventHandler(r.el,e,r.handler),n=t)}0<=n&&V.bindings.registered.splice(n,1)},removeBindings:function(){O.forEach(V.bindings.registered,function(e){L.removeEventHandler(e.el,e.type,e.handler)}),V.bindings.registered=[],V.bindings.unsupportedEventTypes=[],L.log("Cleared detector bindings.")},getEncoder:function(){return U},supportModeOn:function(e){e=e||!1,V.applySupportMode(),e&&x.set("supportMode",!0)},isSupportModeSession:function(){return void 0!==N.get(k.cookies.supportMode)||x.get("supportMode")},checkSupportModeSession:function(){V.isSupportModeSession()&&V.applySupportMode()},applySupportMode:function(){E.reportAllOnUnload=!1},tryAttachSnapshotToEvent:(j=!1,B=-1,function(e){void 0===F&&(F=V.plugins.domRecordingPlugin||null),F&&E.domRecordEnabled&&!F.isAborted()&&(-1!==E.domExpireSnapshotAfter&&"pageSnapshot"!==e.type&&-1!==B&&e.timestamp-B>E.domExpireSnapshotAfter&&(F.reset(),V.useCurrentTimeForPagesnapshot=!0),(j=j||"pageUpdate"===e.type||"mousedown"===e.type||"touchstart"===e.type||"drag"===e.type||"keydown"===e.type||"unload"===e.type)&&-1!==k.snapshotApplicableEventType.indexOf(e.type)&&(e.domSnapshot=F.getDomSnapshot())),"pageSnapshot"!==e.type&&(B=e.timestamp)})};ze.prototype.toString=function(){return this.url},Xe.prototype.toString=function(){return"("+this.x+","+this.y+")"};var z={inMemoryMovesCounter:0,notifyEventsFlush:function(){z.inMemoryMovesCounter=0},hasDomUpdate:function(e){return e.domSnapshot&&e.domSnapshot.domChanges},diluteEvents:function(e,n){var t=O.last(e);if(!O.isUndefined(t)){if("resize"===n.type)return"resize"===t.type&&z.removeEventToReport(e,t),!0;if("scroll"===n.type){if("scroll"===t.type||V.page.hasTouch&&"drag"===t.type)return n.timestamp-t.timestamp>E.minStallingScrollTime||(n.selectorExpression=t.selectorExpression,z.removeEventToReport(e,t),E.scrollDebug&&L.trace("Diluted "+t.type+" event:",t)),!0;if("mousemove"===t.type&&1===t.value.length&&2<=e.length){var r=e[e.length-2];if("scroll"===r.type){if(n.timestamp-r.timestamp>E.minStallingScrollTime)return!0;n.selectorExpression=r.selectorExpression,z.removeEventToReport(e,t),z.removeEventToReport(e,r),E.scrollDebug&&L.trace("Diluted scroll & mousemove event (mousewheel rolling)"),z.inMemoryMovesCounter--}}return!0}if("mousemove"===n.type&&"mousemove"===t.type){var i=E.reportByPost?3e3:E.mmMaxMovesInEventWithTimes,o=E.reportByPost?3e3:E.mmMaxMovesInEventNoTimes;return E.mmRecordTimes&&t.value.length>=i||!E.mmRecordTimes&&t.value.length>=o?(E.mmDebug&&L.log("Too much moves in an event: "+t.value.length+". Starting a new move event."),z.inMemoryMovesCounter++,!0):!O.isUndefined(E.mmMinStallingMoveTime)&&n.timestamp-t.lastSingleMoveTimestamp>E.mmMinStallingMoveTime?(E.mmDebug&&L.log("Identified mouse move stalling: "+(n.timestamp-t.lastSingleMoveTimestamp)+" ms. Starting a new move event."),z.inMemoryMovesCounter++,!0):z.checkExceededInMemoryMoves()?(E.mmDebug&&L.log("Exceeded in memory mouse moves ("+E.mmMaxInMemoryMoves+") ignoring..."),!1):(z.removeEventToReport(e,t),z.diluteMoveEvents(t,n)&&z.inMemoryMovesCounter++,!0)}}return"mousemove"===n.type&&z.inMemoryMovesCounter++,!0},removeEventToReport:function(e,n){z.hasDomUpdate(n)||e.splice(O.indexOf(e,n),1)},checkExceededInMemoryMoves:function(){var e=E.reportByPost?3e3:E.mmMaxInMemoryMoves;return z.inMemoryMovesCounter>=e},diluteMoveEvents:function(e,n){var t=O.last(e.value),r=n.value[0],i=n.timestamp-e.lastSingleMoveTimestamp,o=e.getExtraInfo(e.FOCUS_TIME_ATTR);return Math.abs(t.x-r.x)>E.mmDiluteMinPixels||Math.abs(t.y-r.y)>E.mmDiluteMinPixels?(o+=r.t=i,n.setExtraInfo(n.FOCUS_TIME_ATTR,o),n.timestamp=e.timestamp,e.value.push(r),n.value=e.value,E.mmDebug&&L.log("updated mousemove value"+n.value),!0):(n.setExtraInfo(n.FOCUS_TIME_ATTR,o),n.timestamp=e.timestamp,n.value=e.value,n.lastSingleMoveTimestamp=e.lastSingleMoveTimestamp,E.mmDebug&&L.log("Diluting mousemove less than "+E.mmDiluteMinPixels+" pixels: "+r),!1)},truncateEventsForUnload:function(e){for(var n=[],t=E.mmMaxMovesWithUnload,r=0,i=!1,o=0;o<e.length;o++){var a=e[o];if("mousemove"===a.type){if(r>=E.mmMaxMovesWithUnload){L.trace(E.mmMaxMovesWithUnload+" moves limit exceeded. dropping mousemove event from unload report... ("+r+" moves dropped)"),i=!0;continue}var u=a.value.length,c=z.truncateMouseMoveEvent(a,t-r);r+=c,c<u&&(i=!0)}"unload"===a.type&&i&&a.setExtraInfo(a.MOVES_TRUNCATED,!0),n.push(a)}return n},truncateMouseMoveEvent:function(e,n){var t=e.value.length;return t<n?t:(L.trace("truncating mousemove on unload ("+t+" > "+n+" moves)"),e.value=e.value.slice(0,n),n)}};V.checkElementChangebility=function(e){var n=e.nodeName,t=e.type,r=!1,i=!1;switch(n){case"SELECT":i=!0;break;case"TEXTAREA":r=!0;break;case"INPUT":if(null===t)break;switch(t){case"checkbox":case"radio":i=!0;break;case"text":case"password":case"number":case"file":case"url":case"search":case"email":case"date":case"time":case"tel":case"range":case"month":case"week":case"datetime":case"datetime-local":case"color":r=!0}}return{isTypable:r,isSelectable:i}},V.isTypableElement=function(e){return V.checkElementChangebility(e).isTypable},V.isSelectableElement=function(e){return V.checkElementChangebility(e).isSelectable},V.isChangebleElement=function(e){return V.isTypableElement(e)||V.isSelectableElement(e)},void 0!==V&&function(e,o){e=e||{};var a=L.immutableSet("password","text","number","file","url","search","email","date","time","tel","range","month","week","datetime","datetime-local","color","radio");e.extractElementValue=function(e,n){var t=n.nodeName;if("INPUT"===t){var r=n.type;if(a[r])return o.maskValue(n);if("checkbox"===r)return n.checked?"true":"false"}else{if("TEXTAREA"===t)return o.maskValue(n);if("SELECT"===t){var i=n.options;if(!O.isUndefined(i)&&"number"==typeof i.length&&0<i.length){if(!O.isUndefined(n.multiple)&&n.multiple)return"["+function(e){for(var n=[],t=0;t<e.length;t++){var r=e[t];r.selected&&n.push(o.maskValue(r,!0))}return n}(i).join(",")+"]";if(!O.isUndefined(n.selectedIndex)&&!O.isUndefined(i[n.selectedIndex]))return o.maskValue(i[n.selectedIndex],!0)}}}},e.extractElementSource=function(e,n){var t=n.src||n.href;return O.isUndefined(t)||null==t?void 0:t},e.extractLocationHash=function(e,n){return L.getLocationUrlSplitByHash().hash},e.extractScrollValue=function(e,n){if("#document"===n.nodeName){var t=L.getScrollTopLeft();return new Xe(t.left,t.top)}return new Xe(n.scrollLeft,n.scrollTop)},e.extractMouseMoveValue=function(e,n){return[L.getCoordinate(e)]},e.extractErrorValue=function(e,n){var t="";return"string"==typeof e.message&&(t+=e.message),"string"==typeof e.url?t+="; URL: "+e.url:"string"==typeof e.filename&&(t+="; FILE: "+e.filename),"number"==typeof e.lineno&&(t+="; L: "+e.lineno),"number"==typeof e.colno&&(t+="; C: "+e.colno),t}}(V,C),We.prototype={toString:function(){return this.type},setExtraInfo:function(e,n){O.isUndefined(n)?L.log("Failed setting value for extra info attribute: "+e+". Value is undefined"):(O.isUndefined(this.extraInfo)&&(this.extraInfo={}),this.extraInfo[e]=n)},getExtraInfo:function(e){if(O.isUndefined(this.extraInfo))return null;var n=this.extraInfo[e];return void 0===n?null:n},setDebugInfo:function(e){O.isUndefined(this.debugInfo)&&(this.debugInfo={}),this.debugInfo=e},getDebugInfo:function(){return this.debugInfo},getSubPage:function(){return this.subPage},addHybridActionDataItem:function(e,n){O.isUndefined(n)?L.log("Failed setting value for hybrid action data item: "+e+". Value is undefined"):(O.isUndefined(this.hybridActionData)&&(this.hybridActionData={}),this.hybridActionData[e]=n)},getdHybridActionData:function(){return this.hybridActionData},ofSameSegment:function(e){return this.referrer===e.referrer&&this.subPage===e.subPage}},We.prototype.FOCUS_TIME_ATTR="focusTime",We.prototype.AUTO_COMPLETE_ATTR="autoComplete",We.prototype.VISUAL_NAME="visualName",We.prototype.WINDOW_DEPTH="windowDepth",We.prototype.CONTAINER_ID="containerId",We.prototype.PARENT_PAGE_ID="parentPageId",We.prototype.HISTORY_LENGTH="historyLen",We.prototype.TIME_SINCE_LAST_EVENT="timeSinceLastIdle",We.prototype.COORDINATE_ATTR="coordinate",We.prototype.SCROLL_REACH="scrollReach",We.prototype.MOVES_TRUNCATED="truncated",We.prototype.LOST_EVENTS_NUM="lostEvents",We.prototype.TP_INTEGRATION_TYPE="tpIntegrationType",We.prototype.EXTERNAL_ID="externalId",We.prototype.SYNC_COORDINATE="syncCoordinates",We.prototype.ZOOM="zoom",We.prototype.MOBILE_HYBRID_ID="mobileHybridId",We.prototype.DETECTOR_CONFIG_ID="detectorCfg",We.prototype.AUTO_MASKING="autoMasking",We.prototype.extraInfoAttrs=[{name:We.prototype.FOCUS_TIME_ATTR,encodeName:"ft",encodeFunc:U.encodeNumber,encodeCode:k.dictionary.encodeEncodingType("cd_number")},{name:We.prototype.AUTO_COMPLETE_ATTR,encodeName:"ac",encodeFunc:U.encodeBoolean,encodeCode:k.dictionary.encodeEncodingType("cd_boolean")},{name:We.prototype.VISUAL_NAME,encodeName:"vn",encodeFunc:U.encodeString,encodeCode:k.dictionary.encodeEncodingType("cd_string")},{name:We.prototype.WINDOW_DEPTH,encodeName:We.prototype.WINDOW_DEPTH,encodeFunc:U.encodeNumber,encodeCode:k.dictionary.encodeEncodingType("cd_number")},{name:We.prototype.CONTAINER_ID,encodeName:We.prototype.CONTAINER_ID,encodeFunc:U.encodeString,encodeCode:k.dictionary.encodeEncodingType("cd_string")},{name:We.prototype.PARENT_PAGE_ID,encodeName:We.prototype.PARENT_PAGE_ID,encodeFunc:U.encodeString,encodeCode:k.dictionary.encodeEncodingType("cd_string")},{name:We.prototype.HISTORY_LENGTH,encodeName:We.prototype.HISTORY_LENGTH,encodeFunc:U.encodeNumber,encodeCode:k.dictionary.encodeEncodingType("cd_number")},{name:We.prototype.TIME_SINCE_LAST_EVENT,encodeName:"tl",encodeFunc:U.encodeNumber,encodeCode:k.dictionary.encodeEncodingType("cd_number")},{name:We.prototype.COORDINATE_ATTR,encodeName:"co",encodeFunc:U.encodeCoordinate64,encodeCode:k.dictionary.encodeEncodingType("cd_coordinate")},{name:We.prototype.SCROLL_REACH,encodeName:"sr",encodeFunc:U.encodeNumber,encodeCode:k.dictionary.encodeEncodingType("cd_number")},{name:We.prototype.MOVES_TRUNCATED,encodeName:"tr",encodeFunc:U.encodeBoolean,encodeCode:k.dictionary.encodeEncodingType("cd_boolean")},{name:We.prototype.LOST_EVENTS_NUM,encodeName:"le",encodeFunc:U.encodeNumber,encodeCode:k.dictionary.encodeEncodingType("cd_number")},{name:We.prototype.TP_INTEGRATION_TYPE,encodeName:"tp",encodeFunc:U.encodeString,encodeCode:k.dictionary.encodeEncodingType("cd_string")},{name:We.prototype.EXTERNAL_ID,encodeName:"ei",encodeFunc:U.encodeString,encodeCode:k.dictionary.encodeEncodingType("cd_string")},{name:We.prototype.SYNC_COORDINATE,encodeName:"sy",encodeFunc:U.encodeCoordinate64,encodeCode:k.dictionary.encodeEncodingType("cd_coordinate")},{name:We.prototype.ZOOM,encodeName:"zo",encodeFunc:U.encodeNumber,encodeCode:k.dictionary.encodeEncodingType("cd_number")},{name:We.prototype.MOBILE_HYBRID_ID,encodeName:We.prototype.MOBILE_HYBRID_ID,encodeFunc:U.encodeString,encodeCode:k.dictionary.encodeEncodingType("cd_string")},{name:We.prototype.DETECTOR_CONFIG_ID,encodeName:We.prototype.DETECTOR_CONFIG_ID,encodeFunc:U.encodeString,encodeCode:k.dictionary.encodeEncodingType("cd_string")},{name:We.prototype.AUTO_MASKING,encodeName:We.prototype.AUTO_MASKING,encodeFunc:U.encodeBoolean,encodeCode:k.dictionary.encodeEncodingType("cd_boolean")}],void 0!==V&&V.registerPlugin("thirdPartyMapInterceptor",new function(e,o,r){r=r||[];var a=function(){var e,n=!1,t={};for(e=0;e<r.length;e++)0<r[e].uriContainsTokens.length&&0<r[e].queryKeys.length&&(t[r[e].tagName]={uriContainsTokens:r[e].uriContainsTokens,queryKeys:L.immutableSet.apply(null,r[e].queryKeys)},n=!0);return n?t:D}(),n=!!a,u=0;function t(e){var n=L.extractElementFromEvent(e);if(n&&a[n.tagName]){var t=n.src||n.href||"",r=t.split("?")[1];if(r&&function(e,n){if(!e)return!1;for(var t=0;t<n.length;t++)if(0<=e.indexOf(n[t]))return!0;return!1}(t,a[n.tagName].uriContainsTokens)){var i=function(e,n){for(var t,r,i={},o=e.split("&"),a=!1,u=0;u<o.length;u++)if(2===(t=o[u].split("=")).length)try{if(!n[r=decodeURIComponent(t[0])])continue;i[r]=decodeURIComponent(t[1]),a=!0}catch(e){L.log("failed parsing 3rd-party query string key-value pair: "+o[u],e)}return a?i:null}(r,a[n.tagName].queryKeys);i&&(u++,L.trace("intercepted third party parameters map for url: "+t),o.emit("thirdPartyMap",i))}}}this.initialize=function(){n&&(L.log("3rd party map interception has started."),L.addEventHandler(e,"load",t,!0))},this.isActive=function(){return n},this.getInterceptedCount=function(){return u}}(A,T,[{tagName:"IMG",uriContainsTokens:E.reportImageURLContainList||[],queryKeys:E.reportImageKeyList||[]},{tagName:"SCRIPT",uriContainsTokens:E.reportScriptURLContainList||[],queryKeys:E.reportScriptKeyList||[]}]));var X={initialize:function(e){return!(!E.SCIntegration||void 0===E.SCIntegrationURLsContainList||void 0===E.SCIntegrationKeyList||0===E.SCIntegrationKeyList.length)&&(e.on("init:preloaded",X.intercept),L.log("Intercepting SiteCatalyst reports."),!0)},intercept:function(){var r=M.Image;M.Image=function(e,n){var t=new r(e,n);try{t.addEventListener("load",function(){try{if(t.src&&resourceHandler.isUrlToReport(t.src,E.SCIntegrationURLsContainList)){L.trace("Image thirdparty intercepted: "+t.src);var e=resourceHandler.parseToKVMap(t.src,E.SCIntegrationKeyList);if(e){var n=new Ge(e);T.emit("3rdpartymap:scReport",n)}}}catch(e){L.log("Error while checking image "+t.src+" for SC integration: "+e.message,e)}})}catch(e){L.log("Failed intercepting Image constructor for SC integration. "+e.message,e)}return t}}};Ge.prototype.toString=function(){return this.type+": "+this.data},V.registerPlugin("SCIntegration",X),void 0!==V&&function(e,n,t){e=e||{};var r,o,a,u,c=(t||{}).visualName,i=(t||{}).visualNameDebug||!1,s=function(e){return void 0===r&&(r=n()),!!r&&r.isDomMasked(e,ne.SELF_OR_ANY_PARENT,ee.TEXT)},f=(o=t.noIdSelectorsForClassNames||[],a=t.noIdSelectorsForIDs||[],u=t.noIdSelectorsForAttrs||[],function(e){if(0===o.length&&0===a.length&&0===u.length)return!0;var n,t=e.getAttribute("id");if(t)for(n=0;n<a.length;n++){var r=a[n];if(r&&0<=t.indexOf(r))return!1}var i=L.getClassList(e);for(n=0;n<o.length;n++)if(0<=O.indexOf(i,o[n]))return!1;for(n=0;n<u;n++)if(e.hasAttribute(u[n]))return!1;return!0});e.extractVisualName=function(e){var n=null;if(!e||!L.isElement(e))return n;if(O.contains(c.filterNamingByTagName,e.tagName.toLocaleLowerCase()))return n;var t="";return(n=L.getAttributeForElement(e,c.CLS_NAME_ATTR))&&(t="by cls_vname"),!n&&c.by.title&&(n=L.getAttributeForElement(e,"title"))&&(t="by title"),!n&&c.by.alt&&(n=L.getAttributeForElement(e,"alt"))&&(t="by alt"),!n&&c.by.ariaLabel&&(n=L.getAttributeForElement(e,"aria-label"))&&(t="by aria-label"),!n&&c.by.inlineText&&(n=function(e){var n=e.tagName.toLocaleLowerCase();if("td"===n)return null;var t=L.getAttributeForElement(e,"class");if(t&&O.contains(c.filterInlineTextByClassName,t))return null;var r,i=null;if(("span"===n||"div"===n)&&1===e.childElementCount&&(r=e.firstElementChild)&&"a"===r.tagName.toLocaleLowerCase()&&0===r.childElementCount){var o=r.innerText;o&&(o=L.trim(o)),i=o}if(!i&&O.contains(c.filterInlineTextByTagName,n)){var a=e.parentElement?e.parentElement.tagName.toLocaleLowerCase():"";if("a"!==a&&"button"!==a)return null}if(i||0!==e.childElementCount||(i=e.innerText)&&(i=L.trim(i)),i||1===e.childElementCount&&0===(r=e.firstElementChild).childElementCount&&(i=r.innerText)&&(i=L.trim(i)),i)try{s(e)&&(i=I.maskValueOf(i))}catch(e){i=""}return i||null}(e))&&(t="by #text"),!n&&c.by.placeholder&&(n=L.getAttributeForElement(e,"placeholder"))&&(t="by placeholder"),n||!c.by.inputConsts&&!c.by.inputButtonsValue||(n=function(e){var n;if("input"===e.tagName.toLocaleLowerCase()){var t=e.type.toLocaleLowerCase();if("button"!==t&&"submit"!==t&&"reset"!==t||!c.by.inputButtonsValue||(n=e.value),!n&&c.by.inputConsts)switch(t){case"password":n="Password";break;case"button":case"submit":case"image":n="Submit";break;case"file":n="Choose File";break;case"reset":n="Reset"}}return n&&(n=L.trim(n)),n||null}(e))&&(t="by input specific"),!n&&c.by.name&&(n=L.getAttributeForElement(e,"name"))&&(t="by name"),!n&&c.by.id&&f(e)&&(n=L.getAttributeForElement(e,"id"))&&(t="by id"),!n&&c.by.parent&&(n=function(e){if(!O.contains(c.elementListToCheckParent,e.tagName.toLocaleLowerCase()))return null;var n=null,t=e.parentElement;return!t||"a"!==t.tagName.toLocaleLowerCase()&&"button"!==t.tagName.toLocaleLowerCase()||(n=L.getAttributeForElement(t,"title")||L.getAttributeForElement(t,"alt")||L.getAttributeForElement(t,"aria-label")||L.getAttributeForElement(t,"name")||L.getAttributeForElement(t,"id")),n||null}(e))&&(t="by parent"),!n&&c.by.child&&(n=function(e){if(!O.contains(c.elementListToCheckChild,e.tagName.toLocaleLowerCase()))return null;var n;if(1===e.childElementCount){var t=e.firstElementChild;n=L.getAttributeForElement(t,"title")||L.getAttributeForElement(t,"alt")||L.getAttributeForElement(t,"aria-label")||L.getAttributeForElement(t,"name")||L.getAttributeForElement(t,"id")}return n||null}(e))&&(t="by child"),n&&n.length>c.chatLimit&&(n=n.substr(0,c.chatLimit).concat("...")),i&&L.trace("VISUAL NAME: (on "+e.tagName+" "+(e.type?e.type:"")+") "+t+" - "+n),n}}(V,function(){return V.plugins.domRecordingPlugin?V.plugins.domRecordingPlugin.getDomMasker():null},E),V.triggerCustomEvent=function(n,t,r){try{if(O.isUndefined(n)||!O.isString(n)||0===n.length||O.isUndefined(t))return void L.log("triggerCustomEvent: bad argument: eventName="+n+" eventValue="+t);var e={name:""+n,val:""+t,domEl:r};V.saveCustomEvent(e)}catch(e){L.log("triggerCustomEvent: error while triggering event with name="+n+" value="+t+"domElement="+r,e.stack?e.stack:e.message)}},Ke.extractTLD=function(e){var n=e.split(".");return n.shift(),0<n.length?n.join("."):e},Je.cfgBackwardComp=function(e){var n=!1;if(void 0===e.ajaxRecordMatadata&&void 0!==e.recordAjaxRequest&&(e.ajaxRecordMetadata=""+e.recordAjaxRequest,n=!0),void 0===e.ajaxRecordResponseBody){var t=[];e.ajaxCaptureFQDNOnly&&t.push("fqdn"),e.ajaxCaptureResponseContentWhenUrlMatches&&t.push("uriMatches("+e.ajaxCaptureResponseContentWhenUrlMatches+")"),void 0!==e.ajaxCaptureResponseOnStatusGreater&&-1!==e.ajaxCaptureResponseOnStatusGreater&&t.push("statusGte("+e.ajaxCaptureResponseOnStatusGreater+")"),0<t.length&&(e.ajaxRecordResponseBody=t.join(","),n=!0)}return void 0===e.ajaxRecordResponseHeaders&&void 0!==e.ajaxCaptureResponseHeaders&&(e.ajaxRecordResponseHeaders=""+e.ajaxCaptureResponseHeaders,n=!0),n},Je.fixHeaders=function(e,n){var t=e.replace(/content-encoding:\sgzip/gi,"X-Glassbox-Orig-Content-Encoding: zip").replace(/transfer-encoding:\schunked/gi,"X-Glassbox-Orig-Transfer-Encoding: chunked");return n?t.replace(/content-length:/gi,"X-Glassbox-Orig-Content-Length:")+"Content-Length: "+n+"\r\n":t},Je.hasGzipContentEncoding=function(e){return null!==/content-encoding:\sgzip/gi.exec(e)},Je.isClsOwnAjax=function(e){return e.cls_own},Je.captureContent=function(e,n){var t=null;return""===e.responseType||"text"===e.responseType?t=e.responseText:"json"===e.responseType&&(t=JSON.stringify(e.response)),t},Je.supportAjaxOnProgressEvents=function(){return"onloadend"in new XMLHttpRequest},Je.safeEncodeURI=function(n){try{return n===decodeURI(n)?encodeURI(n):n}catch(e){return encodeURI(n)}},Qe.prototype.toString=function(){return this.method+" "+this.url+(this.status?" "+this.status:"")},void 0!==V&&void 0!==E&&E.interceptAjax&&V.registerPlugin("ajaxInterceptor",new Je(M,T,A.location.host,E,["adrum","dynatrace","appdynamics.com","tealeaf","/retail/discountinternet/portal/coex.asmx/keepalive","oauth/cc"])),Ye.READY_COOKIE="_cls_ready",Ye.CORS_READY_KEY="cors_ready",Ye.CORS_COOKIES=[k.cookies.session,k.cookies.visitor],Ye.STATE={INIT:0,HELPING:1,READY:2};var W,G,K,J,Q,Y,$,Z=(W=V.isCorsReporting,K=new Be((G=E).reportAddUriParams,N),J=W&&!G.reportDisableCors?new Ye(x,N,G.reportURI,G.reportCorsTakeNativeCookies):D,Q=!0,Y=function(e){Q=e},$=function(n,t,r,i,o){n=n||"",o=o||!1;var a=_.createXMLHTTPObject(n);if(!a)return L.log("Failed creating an XMLHttpRequest object"),void Y(!0);a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){Y(!0);var e=a.getResponseHeader("Content-Type");e&&-1!==e.indexOf("application/json")&&T.emit("handleGatewayResponse",a.response)}else G.postRetry&&!o?(L.log("Failed POST data ("+t+"): "+a.status+"  "+a.statusText+" ...retrying..."),$(n,t,r,i,!0)):(L.log("Failed "+(o?"again ":"")+"POST data ("+t+"): "+a.status+"  "+a.statusText+" . aborting. "),a.abort(),Y(!0))};try{a.open("POST",r,!0),a.onprogress=function(){},a.ontimeout=function(){},a.onerror=function(){},a.withCredentials=i,V.plugins.reporter&&V.plugins.reporter.beaconEncoder.visitXhr(a),setTimeout(function(){try{a.send(n)}catch(e){L.log("Failed sending (in) POST request ("+t+") to url "+r+": "+e.message,e),Y(!0)}},0)}catch(e){L.log("Failed sending POST request ("+t+") to url "+r+": "+e.message,e),Y(!0)}},{name:"POST",config:{maxReportSize:G.maxPostReportSize,maxReports:-1},gainLockToReport:function(){var e=Q;return e&&Y(!1),e},freeLock:function(){Y(!0)},flushEvents:function(n,t,e){var r;e&&(r=e.pid,delete e.pid);var i=function(e,n,t){var r=K.apply(G.reportURI,e,n);if(t){var i,o=[];for(i in t)o.push(i+"="+t[i]);0<o.length&&(r+=(-1===r.indexOf("?")?"?":"&")+o.join("&"))}return r}(t,r,e);J?J.help(_.createXMLHTTPObject,function(e){$(n,t,i,e)}):$(n,t,i)},forceCorsReset:function(){J&&J.reset()}});$e.loadAndClearReports=function(e){var n=e[$e.KEY_NAME];if(delete e[$e.KEY_NAME],n){var t,r=JSON.parse(n);for(t=0;t<r.length;t++)r[t].encoding===$e.ENCODING_BASE64&&(r[t].e=$e.toBytes(L.Base64.atob(r[t].e))),delete r[t].encoding;return r}return D},$e.toBytes=function(e){var n,t=new Uint8Array(new ArrayBuffer(e.length));for(n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t},$e.KEY_NAME="_cls_rpt",$e.ENCODING_BASE64="b64",void 0!==V&&V.registerPlugin("reporter",new function(t,r,C,R,i,f){var l,d,n,o=[],v=0,h=-1,a=0,u=0,c=0,p={count:0,flushedBytes:0,estimatedBytes:{expected:0,actual:0},encodingErrors:[]};function s(e){w(),f.reportCreateSubSessionCookie&&(N.set(k.cookies.sub_session,L.uuid()),e.cookie=A.cookie),h=e.seq}function m(){try{var e,n=$e.loadAndClearReports(M.sessionStorage);if(n)for(L.log("about to send "+n.length+" storage pending report(s)."),e=0;e<n.length;e++)l.flushEvents(n[e].e,n[e].sn,{pid:n[e].pid,storage:"true"})}catch(e){L.log("error: could not send pending storage reports. message:",e.message)}}function g(){m();var e=f.reportByPost?f.reportPostInterval:f.reportInterval;e&&!n&&(n=setInterval(x,e),L.log("Beacon: events will be reported in intervals of "+e+" ms."))}function y(e){if(z.diluteEvents(o,e)){i(e);var n=!1;"pageUpdate"!==e.type||e.domSnapshot||(n=!0),n||o.push(e)}a=u=L.currentTimestamp()}function E(e){f.reportAllOnUnload&&x(!0)}function b(e){L.log("Beacon: unloading page, "+o.length+" events to report."),f.reportToStorageAfterUnload&&(void 0!==$e&&void 0!==M.sessionStorage?(L.log("switching to StorageReporter, following 'unload' event"),l=new $e(M.sessionStorage,d)):L.log("error: either StorageReporter or window.sessionStorage is undefined, cannot switch to storage reporting.")),0<o.length&&(f.reportAllOnUnload||!f.truncateEventsWithUnload||f.reportByPost||(o=z.truncateEventsForUnload(o)),S(!0))}function w(){x(!0)}function x(e){try{if(e&&0<o.length)return void S();if(o.length>c)return f.reportAllOnUnload?void(c=o.length):function(e,n){for(var t=n;t<e.length;t++)if(!e[t].dependent)return!1;return!0}(o,c)?void(c=o.length):void S();0<f.idleEventTimeInterval&&L.currentTimestamp()-a>=f.idleEventTimeInterval&&L.currentTimestamp()-u<f.maxTimeForIdleEvent&&(n=a,t.emit("reporter:idle",{idleBaseTime:u,latestEventTime:n}),a=L.currentTimestamp())}catch(e){L.log("ERROR: while reporting queued events. Exception: ",e.stack?e.stack:e.message)}var n}function S(e){if(l.gainLockToReport()||e){var n=o;o=[];try{!function(e,n){n=n||!1;var t,r=l.config.maxReports;if(!f.reportByPost&&n&&(r=f.maxReportsWithUnload),n&&f.domOmitAfterUnload)for(t=0;t<e.length;t++)delete e[t].domSnapshot;!function(e,n,t){var r,i=function(){c++;var e=-1!==t&&t<=c;return e},o=null;-1!==t&&1<e.length&&"unload"===e[e.length-1].type&&(o=e.pop());for(var a,u,c=0,s=[],f="",l=0,d=e[0].type,v=R(),h=0;h<e.length;h++){r=e[h],u=v.track(r);var p=r.type,m=d===p,g=O.isUndefined(r.selectorExpression)||null==r.selectorExpression?k.encoding.rootSelector:r.selectorExpression,y=g;if(k.repeatingElementSelector&&!O.isUndefined(k.repeatingElementSelector)&&(g===k.encoding.rootSelector?f="":(g===f&&(y=k.repeatingElementSelector),f=g)),a=T(r,y))if(O.contains(k.nobelEventTypes,r.type))0<s.length&&I(s,v.getLast()),I([a],v.getCurrent()),s=[],l=0,f="",d=p;else{var E=!(0!==s.length&&!m&&(O.contains(k.socialNobelEventTypes,r.type)||O.contains(k.socialNobelEventTypes,d))),b=a.length+(0===s.length?0:k.encoding.delimiters.events.length),w=-1===n||C.estimateBeaconSize(l+b)<n;if(u&&w&&E)l+=b,s.push(a);else{if(0<s.length){if(i()){if(null!==o){var x=e.length-h;L.log("Reached max number of reports allowed ("+t+"). Lost "+x+" events."),o.setExtraInfo(o.LOST_EVENTS_NUM,x),a=C.encodeEvent(o),s.push(a),I(s,v.getLast(),l)}return}I(s,v.getLast(),l),s=[],l=0}y===k.repeatingElementSelector&&(a=T(r,g)),-1!==n&&C.estimateBeaconSize(a.length)>n?(I([a],v.getCurrent()),f=""):(s.push(a),l+=a.length)}d=p}}if(0<s.length){if(null!==o){var S=C.encodeEvent(o);s.push(S)}I(s,v.getCurrent(),l)}}(e,l.config.maxReportSize,r)}(n,e)}catch(e){L.log("ERROR: while reporting events. Exception: ",e.stack?e.stack:e.message),l.freeLock()}c=0,z.notifyEventsFlush()}else L.log("reporter not ready yet. postponing "+o.length+" events reports.")}function T(n,e){try{return C.encodeEvent(n,e)}catch(e){L.log("ERROR: while encoding event: "+n.type+" . Exception: ",e.stack?e.stack:e.message),p.encodingErrors.push(e.message)}}function I(e,n,t){v++;var r,i,o,a,u,c,s=(r=n.referrer,i=n.subPage,o=e,a=v,C.encodeBeacon(k.beaconVersion,a,f.reportIncludeReferrer?r:D,d,i,-1!==h?h:D,o));l.flushEvents(s,v),u=s.length,c=t,p.count++,p.flushedBytes+=u,c&&(p.estimatedBytes.actual+=u,p.estimatedBytes.expected+=c,p.estimationRatio=p.estimatedBytes.expected/p.estimatedBytes.actual),L.trace("Beacon["+v+" payload-len:"+s.length+"]: "+l.name+" reported "+e.length+" events"+(0<n.subPage.length?" [on "+n.subPage+"]":""),e)}this.initialize=function(e,n){if(!O.isUndefined(f.reportURI)&&0!==f.reportURI.length)return L.log("Reporting using: "+(f.reportByPost?"POST":"GET")),L.log("Report Encoding: "+C.name),L.log("Report Compression: "+(f.reportCompress?"ENABLED":"DISABLED")+" supported by encoder:"+C.supportsCompression),l=r(),d=n.page.id,a=u=L.currentTimestamp(),c=0,t.on("init:loaded",g),t.on("saveEvent",y),t.on("event:document",E),t.on("event:unload",b),t.on("reportImmediately",w),t.on("pageSnapshot:report",s),!0;console.log("ERROR[EyeView-1401]: Detector script is missing configuration for 'reportURI'. Please add it.")},this.sendStoragePendingReports=m,this.beaconEncoder=C,this.stats=function(){return p}}(T,function(){return"undefined"==typeof httpgetReporter?Z:E.reportByPost||E.domRecordEnabled?Z:httpgetReporter},function(e,n,t){if("json"===t.reportEncoding)return new je(O,k,L,eventEncodingUtils,{reportDebugInfo:t.reportDebugInfo,compress:t.reportCompress,domCompress:t.domCompress,corsSafelisted:n&&t.reportCorsForceSafelistedHeaders});var r=/SamsungBrowser\/7/gi.test(e.userAgent);function i(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}return new Fe(O,k,L,eventEncodingUtils,{reportDebugInfo:t.reportDebugInfo,domCompress:t.domCompress,base64UriEncoder:r?function(e){return e.replace(/\+|=|\//gi,i)}:encodeURIComponent})}(navigator,!Me(A,E.reportURI),E),function(){return V.segmentManager.createSegmentTracker()},function(e){V.tryAttachSnapshotToEvent(e)},E)),Ze.prototype.isDomMasked=function(e,n){var t,r,i=Array.prototype.slice.call(arguments,2);for(t=0;t<i.length;t++)if((r=this._selectorsByMaskingType[i[t].name])&&n.follow(e,r))return!0;return!1},Ze.prototype.domMaskNode=function(e){var n,t,r,i,o,a=Array.prototype.slice.call(arguments,1);for(n=0;n<a.length;n++)if(i=a[n],o=this._selectorsByMaskingType[i.name])for(r=[],e.nodeType===Node.ELEMENT_NODE&&Ze.elementMatches.call(e,o)&&r.push(e),"function"==typeof e.querySelectorAll&&(r=Array.prototype.concat.apply(r,e.querySelectorAll(o))),t=0;t<r.length;t++)i.apply(r[t],this)},Ze.prototype.domMaskNodeForce=function(e){var n,t=Array.prototype.slice.call(arguments,1);for(n=0;n<t.length;n++)t[n].apply(e,this)};var ee={TEXT:{name:"TEXT",apply:function(e){Ze.maskTextContent(Ze.textNodesOf(e))}},ATTRIBUTE:{name:"ATTRIBUTE",apply:function(e,n){var t;for(t=0;t<n.maskedAttributes.length;t++){var r=e.getAttribute(n.maskedAttributes[t]);r&&e.setAttribute(n.maskedAttributes[t],I.maskValueOf(r))}}},VALUE_ATTRIBUTE:{name:"VALUE_ATTRIBUTE",apply:function(e){if(I.canBeValueMasked(e)){var n=e.getAttribute("value");n&&e.setAttribute("value",I.maskValueOf(n))}}},OMIT:{name:"OMIT",apply:function(e){e.parentNode&&e.parentNode.removeChild(e)}}},ne={SELF:{follow:function(e,n){return!(e.nodeType!==Node.ELEMENT_NODE||!Ze.elementMatches.call(e,n))}},SELF_OR_ANY_PARENT:{follow:function(e,n){for(var t=e;t&&t.nodeType===Node.ELEMENT_NODE;){if(Ze.elementMatches.call(t,n))return!0;t=t.parentNode}return!1}},SELF_OR_ANY_CHILD:{follow:function(e,n){return!(e.nodeType!==Node.ELEMENT_NODE||!Ze.elementMatches.call(e,n))||"function"==typeof e.querySelectorAll&&0<e.querySelectorAll(n).length}}};Ze.textNodesOf=function(e){if(e.nodeType===Node.TEXT_NODE)return[e];for(var n,t=[],r=e.ownerDocument.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);n=r.nextNode();)t.push(n);return t},Ze.maskTextContent=function(e){var n,t,r,i;for(n=0;n<e.length;n++)e[n].textContent&&e[n].textContent.trim()&&(t=e[n].textContent.trim(),r=I.maskValueOf(t),t.length!==e[n].textContent.length&&(i=e[n].textContent.indexOf(t),r=e[n].textContent.substring(0,i)+r+e[n].textContent.substring(i+t.length)),e[n].textContent=r)},Ze.prepareWildCardSelector=function(e,n){return""===e[0]?"["+n+"$='"+e[1]+"']":""===e[1]?"["+n+"^='"+e[0]+"']":"["+n+"^='"+e[0]+"']["+n+"$='"+e[1]+"']"},Ze.elementMatches=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var n=(this.document||this.ownerDocument).querySelectorAll(e),t=n.length;0<=--t&&n.item(t)!==this;);return-1<t},en.prototype.maskCookie=function(e){if(!e||!this._cookieMaskSet)return e;var n,t,r,i,o,a=e.split(";"),u=[];for(n=0;n<a.length;n++)-1!==(r=(t=a[n]).indexOf("="))?(i=t.substring(0,r).trim(),o=t.substring(r+1),u.push(i+"="+(o&&this._cookieMaskSet.hasOwnProperty(i)?I.maskValueOf(o):o))):u.push(t);return u.join("; ")};var te,re,ie,oe={MAX_DEPTH_THRESHOLD:20,tryGetCurrentDepth:function(e){var n=0,t=e;try{for(;t.parent!=t&&n<=this.MAX_DEPTH_THRESHOLD;)t=t.parent,n++}catch(e){return L.log("could not retrieve current window's depth (a CORS issue?). errorL"+e),-1}return n>this.MAX_DEPTH_THRESHOLD?(L.log("nested iframe level calculation exceeded maximal threshold ("+this.MAX_DEPTH_THRESHOLD+")."),-1):n},isCrossOriginFrame:function(e,n){try{if(!e.contentWindow)return!0;var t=e.getAttribute("src");if(!t)return!1;var r=L.extractOrigin(t);return!!r&&n!==r}catch(e){return!0}},isEmpty:function(e){return!e.contentDocument||!e.contentDocument.body.hasChildNodes()}};void 0!==V&&E.iframesRecordEnabled&&V.registerPlugin("iframes",(te=new rn(M,E.iframesParentOrigin),re=new tn(M),ie=new an(function(){return V.plugins.domRecordingPlugin},function(){return V.plugins.reporter},V.savePageUpdate.bind(V)),new sn(M,T,new un(A,T),k.detectorScript?new nn(A,E,k.detectorScript,e):D,new on(M,te,re,ie),new cn(A,V.page,te,re,{containerIdAttribute:"gb_cid",mscTimeout:E.iframesHandshakeTimeout}),function(e,n){var t,r,i;function o(){i[n.containerIdKey]&&t.setExtraInfo(n.containerIdKey,i[n.containerIdKey]),i[n.parentPageIdKey]&&t.setExtraInfo(n.parentPageIdKey,i[n.parentPageIdKey]),r()}return n=n||{containerIdKey:"containerId",parentPageIdKey:"pageId"},e.documentEventHook=function(e,n){t=e,r=n,i&&o()},function(e,n){i={parentPageId:e,containerId:n},t&&r&&o()}}(V,{parentPageIdKey:We.prototype.PARENT_PAGE_ID,containerIdKey:We.prototype.CONTAINER_ID}),{autoInject:E.iframesAutoInject,storageOnUnload:E.reportToStorageAfterUnload}))),function(e,n){(("undefined"!==typeof L?L:{})||M||this).pako=function o(a,u,c){function s(t,e){if(!u[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(f)return f(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=u[t]={exports:{}};a[t][0].call(i.exports,function(e){var n=a[t][1][e];return s(n||e)},i,i.exports,o,a,u,c)}return u[t].exports}for(var f="function"==typeof require&&require,e=0;e<c.length;e++)s(c[e]);return s}({1:[function(e,n,t){"use strict";var a=e("./zlib/deflate"),u=e("./utils/common"),c=e("./utils/strings"),i=e("./zlib/messages"),o=e("./zlib/zstream"),s=Object.prototype.toString,f=0,l=-1,d=0,v=8;function h(e){if(!(this instanceof h))return new h(e);this.options=u.assign({level:l,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var n=this.options;n.raw&&0<n.windowBits?n.windowBits=-n.windowBits:n.gzip&&0<n.windowBits&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var t=a.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==f)throw new Error(i[t]);if(n.header&&a.deflateSetHeader(this.strm,n.header),n.dictionary){var r;if(r="string"==typeof n.dictionary?c.string2buf(n.dictionary):"[object ArrayBuffer]"===s.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(t=a.deflateSetDictionary(this.strm,r))!==f)throw new Error(i[t]);this._dict_set=!0}}function r(e,n){var t=new h(n);if(t.push(e,!0),t.err)throw t.msg||i[t.err];return t.result}h.prototype.push=function(e,n){var t,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=n===~~n?n:!0===n?4:0,"string"==typeof e?i.input=c.string2buf(e):"[object ArrayBuffer]"===s.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new u.Buf8(o),i.next_out=0,i.avail_out=o),1!==(t=a.deflate(i,r))&&t!==f)return this.onEnd(t),!(this.ended=!0);0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(c.buf2binstring(u.shrinkBuf(i.output,i.next_out))):this.onData(u.shrinkBuf(i.output,i.next_out)))}while((0<i.avail_in||0===i.avail_out)&&1!==t);return 4===r?(t=a.deflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===f):2!==r||(this.onEnd(f),!(i.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===f&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=h,t.deflate=r,t.deflateRaw=function(e,n){return(n=n||{}).raw=!0,r(e,n)},t.gzip=function(e,n){return(n=n||{}).gzip=!0,r(e,n)}},{"./utils/common":2,"./utils/strings":3,"./zlib/deflate":6,"./zlib/messages":7,"./zlib/zstream":9}],2:[function(e,n,t){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var t=n.shift();if(t){if("object"!=typeof t)throw new TypeError(t+"must be non-object");for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}}return e},t.shrinkBuf=function(e,n){return e.length===n?e:e.subarray?e.subarray(0,n):(e.length=n,e)};var i={arraySet:function(e,n,t,r,i){if(n.subarray&&e.subarray)e.set(n.subarray(t,t+r),i);else for(var o=0;o<r;o++)e[i+o]=n[t+o]},flattenChunks:function(e){var n,t,r,i,o,a;for(n=r=0,t=e.length;n<t;n++)r+=e[n].length;for(a=new Uint8Array(r),n=i=0,t=e.length;n<t;n++)o=e[n],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,n,t,r,i){for(var o=0;o<r;o++)e[i+o]=n[t+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},{}],3:[function(e,n,t){"use strict";var c=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new c.Buf8(256),r=0;r<256;r++)s[r]=252<=r?6:248<=r?5:240<=r?4:224<=r?3:192<=r?2:1;function f(e,n){if(n<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,c.shrinkBuf(e,n));for(var t="",r=0;r<n;r++)t+=String.fromCharCode(e[r]);return t}s[254]=s[254]=1,t.string2buf=function(e){var n,t,r,i,o,a=e.length,u=0;for(i=0;i<a;i++)55296==(64512&(t=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(t=65536+(t-55296<<10)+(r-56320),i++),u+=t<128?1:t<2048?2:t<65536?3:4;for(n=new c.Buf8(u),i=o=0;o<u;i++)55296==(64512&(t=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(t=65536+(t-55296<<10)+(r-56320),i++),t<128?n[o++]=t:(t<2048?n[o++]=192|t>>>6:(t<65536?n[o++]=224|t>>>12:(n[o++]=240|t>>>18,n[o++]=128|t>>>12&63),n[o++]=128|t>>>6&63),n[o++]=128|63&t);return n},t.buf2binstring=function(e){return f(e,e.length)},t.binstring2buf=function(e){for(var n=new c.Buf8(e.length),t=0,r=n.length;t<r;t++)n[t]=e.charCodeAt(t);return n},t.buf2string=function(e,n){var t,r,i,o,a=n||e.length,u=new Array(2*a);for(t=r=0;t<a;)if((i=e[t++])<128)u[r++]=i;else if(4<(o=s[i]))u[r++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&t<a;)i=i<<6|63&e[t++],o--;1<o?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return f(u,r)},t.utf8border=function(e,n){var t;for((n=n||e.length)>e.length&&(n=e.length),t=n-1;0<=t&&128==(192&e[t]);)t--;return t<0?n:0===t?n:t+s[e[t]]>n?t:n}},{"./common":2}],4:[function(e,n,t){"use strict";n.exports=function(e,n,t,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==t;){for(t-=a=2e3<t?2e3:t;i=i+n[r++]|0,o=o+i|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},{}],5:[function(e,n,t){"use strict";var u=function(){for(var e,n=[],t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;n[t]=e}return n}();n.exports=function(e,n,t,r){var i=u,o=r+t;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[255&(e^n[a])];return-1^e}},{}],6:[function(e,n,t){"use strict";var s,l=e("../utils/common"),f=e("./trees"),d=e("./adler32"),v=e("./crc32"),r=e("./messages"),h=0,p=4,m=0,g=-2,c=-1,y=4,i=2,E=8,b=9,o=286,a=30,u=19,w=2*o+1,x=15,S=3,C=258,R=C+S+1,T=42,I=113,M=1,A=2,D=3,k=4;function N(e,n){return e.msg=r[n],n}function O(e){return(e<<1)-(4<e?9:0)}function L(e){for(var n=e.length;0<=--n;)e[n]=0}function _(e){var n=e.state,t=n.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(l.arraySet(e.output,n.pending_buf,n.pending_out,t,e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,0===n.pending&&(n.pending_out=0))}function U(e,n){f._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,_(e.strm)}function P(e,n){e.pending_buf[e.pending++]=n}function F(e,n){e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=255&n}function j(e,n,t,r){var i=e.avail_in;return r<i&&(i=r),0===i?0:(e.avail_in-=i,l.arraySet(n,e.input,e.next_in,i,t),1===e.state.wrap?e.adler=d(e.adler,n,i,t):2===e.state.wrap&&(e.adler=v(e.adler,n,i,t)),e.next_in+=i,e.total_in+=i,i)}function B(e,n){var t,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,u=e.nice_match,c=e.strstart>e.w_size-R?e.strstart-(e.w_size-R):0,s=e.window,f=e.w_mask,l=e.prev,d=e.strstart+C,v=s[o+a-1],h=s[o+a];e.prev_length>=e.good_match&&(i>>=2),u>e.lookahead&&(u=e.lookahead);do{if(s[(t=n)+a]===h&&s[t+a-1]===v&&s[t]===s[o]&&s[++t]===s[o+1]){o+=2,t++;do{}while(s[++o]===s[++t]&&s[++o]===s[++t]&&s[++o]===s[++t]&&s[++o]===s[++t]&&s[++o]===s[++t]&&s[++o]===s[++t]&&s[++o]===s[++t]&&s[++o]===s[++t]&&o<d);if(r=C-(d-o),o=d-C,a<r){if(e.match_start=n,u<=(a=r))break;v=s[o+a-1],h=s[o+a]}}}while((n=l[n&f])>c&&0!=--i);return a<=e.lookahead?a:e.lookahead}function H(e){var n,t,r,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-R)){for(l.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,t=e.hash_size,n=t;r=e.head[--n],e.head[n]=a<=r?r-a:0,--t;);for(n=t=a;r=e.prev[--n],e.prev[n]=a<=r?r-a:0,--t;);i+=a}if(0===e.strm.avail_in)break;if(t=j(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=t,e.lookahead+e.insert>=S)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+S-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<S)););}while(e.lookahead<R&&0!==e.strm.avail_in)}function q(e,n){for(var t,r;;){if(e.lookahead<R){if(H(e),e.lookahead<R&&n===h)return M;if(0===e.lookahead)break}if(t=0,e.lookahead>=S&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==t&&e.strstart-t<=e.w_size-R&&(e.match_length=B(e,t)),e.match_length>=S)if(r=f._tr_tally(e,e.strstart-e.match_start,e.match_length-S),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=S){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=f._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(U(e,!1),0===e.strm.avail_out))return M}return e.insert=e.strstart<S-1?e.strstart:S-1,n===p?(U(e,!0),0===e.strm.avail_out?D:k):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?M:A}function V(e,n){for(var t,r,i;;){if(e.lookahead<R){if(H(e),e.lookahead<R&&n===h)return M;if(0===e.lookahead)break}if(t=0,e.lookahead>=S&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=S-1,0!==t&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-R&&(e.match_length=B(e,t),e.match_length<=5&&(1===e.strategy||e.match_length===S&&4096<e.strstart-e.match_start)&&(e.match_length=S-1)),e.prev_length>=S&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-S,r=f._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-S),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=S-1,e.strstart++,r&&(U(e,!1),0===e.strm.avail_out))return M}else if(e.match_available){if((r=f._tr_tally(e,0,e.window[e.strstart-1]))&&U(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return M}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=f._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<S-1?e.strstart:S-1,n===p?(U(e,!0),0===e.strm.avail_out?D:k):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?M:A}function z(e,n,t,r,i){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=r,this.func=i}function X(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*w),this.dyn_dtree=new l.Buf16(2*(2*a+1)),this.bl_tree=new l.Buf16(2*(2*u+1)),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(x+1),this.heap=new l.Buf16(2*o+1),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*o+1),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(e){var n;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=i,(n=e.state).pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?T:I,e.adler=2===n.wrap?0:1,n.last_flush=h,f._tr_init(n),m):N(e,g)}function G(e){var n,t=W(e);return t===m&&((n=e.state).window_size=2*n.w_size,L(n.head),n.max_lazy_match=s[n.level].max_lazy,n.good_match=s[n.level].good_length,n.nice_match=s[n.level].nice_length,n.max_chain_length=s[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=S-1,n.match_available=0,n.ins_h=0),t}function K(e,n,t,r,i,o){if(!e)return g;var a=1;if(n===c&&(n=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),i<1||b<i||t!==E||r<8||15<r||n<0||9<n||o<0||y<o)return N(e,g);8===r&&(r=9);var u=new X;return(e.state=u).strm=e,u.wrap=a,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=i+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+S-1)/S),u.window=new l.Buf8(2*u.w_size),u.head=new l.Buf16(u.hash_size),u.prev=new l.Buf16(u.w_size),u.lit_bufsize=1<<i+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new l.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=n,u.strategy=o,u.method=t,G(e)}s=[new z(0,0,0,0,function(e,n){var t=65535;for(t>e.pending_buf_size-5&&(t=e.pending_buf_size-5);;){if(e.lookahead<=1){if(H(e),0===e.lookahead&&n===h)return M;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+t;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,U(e,!1),0===e.strm.avail_out))return M;if(e.strstart-e.block_start>=e.w_size-R&&(U(e,!1),0===e.strm.avail_out))return M}return e.insert=0,n===p?(U(e,!0),0===e.strm.avail_out?D:k):(e.strstart>e.block_start&&(U(e,!1),e.strm.avail_out),M)}),new z(4,4,8,4,q),new z(4,5,16,8,q),new z(4,6,32,32,q),new z(4,4,16,16,V),new z(8,16,32,32,V),new z(8,16,128,128,V),new z(8,32,128,256,V),new z(32,128,258,1024,V),new z(32,258,258,4096,V)],t.deflateInit=function(e,n){return K(e,n,E,15,8,0)},t.deflateInit2=K,t.deflateReset=G,t.deflateResetKeep=W,t.deflateSetHeader=function(e,n){return e&&e.state?2!==e.state.wrap?g:(e.state.gzhead=n,m):g},t.deflate=function(e,n){var t,r,i,o;if(!e||!e.state||5<n||n<0)return e?N(e,g):g;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||666===r.status&&n!==p)return N(e,0===e.avail_out?-5:g);if(r.strm=e,t=r.last_flush,r.last_flush=n,r.status===T)if(2===r.wrap)e.adler=0,P(r,31),P(r,139),P(r,8),r.gzhead?(P(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),P(r,255&r.gzhead.time),P(r,r.gzhead.time>>8&255),P(r,r.gzhead.time>>16&255),P(r,r.gzhead.time>>24&255),P(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),P(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(P(r,255&r.gzhead.extra.length),P(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=v(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(P(r,0),P(r,0),P(r,0),P(r,0),P(r,0),P(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),P(r,3),r.status=I);else{var a=E+(r.w_bits-8<<4)<<8,u=-1;u=2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3,a|=u<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=I,F(r,a),0!==r.strstart&&(F(r,e.adler>>>16),F(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(e.adler=v(e.adler,r.pending_buf,r.pending-i,i)),_(e),i=r.pending,r.pending!==r.pending_buf_size));)P(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(e.adler=v(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=v(e.adler,r.pending_buf,r.pending-i,i)),_(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,P(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=v(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=v(e.adler,r.pending_buf,r.pending-i,i)),_(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,P(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=v(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&_(e),r.pending+2<=r.pending_buf_size&&(P(r,255&e.adler),P(r,e.adler>>8&255),e.adler=0,r.status=I)):r.status=I),0!==r.pending){if(_(e),0===e.avail_out)return r.last_flush=-1,m}else if(0===e.avail_in&&O(n)<=O(t)&&n!==p)return N(e,-5);if(666===r.status&&0!==e.avail_in)return N(e,-5);if(0!==e.avail_in||0!==r.lookahead||n!==h&&666!==r.status){var c=2===r.strategy?function(e,n){for(var t;;){if(0===e.lookahead&&(H(e),0===e.lookahead)){if(n===h)return M;break}if(e.match_length=0,t=f._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(U(e,!1),0===e.strm.avail_out))return M}return e.insert=0,n===p?(U(e,!0),0===e.strm.avail_out?D:k):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?M:A}(r,n):3===r.strategy?function(e,n){for(var t,r,i,o,a=e.window;;){if(e.lookahead<=C){if(H(e),e.lookahead<=C&&n===h)return M;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=S&&0<e.strstart&&(i=e.strstart-1,(r=a[i])===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+C;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=C-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=S?(t=f._tr_tally(e,1,e.match_length-S),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=f._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(U(e,!1),0===e.strm.avail_out))return M}return e.insert=0,n===p?(U(e,!0),0===e.strm.avail_out?D:k):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?M:A}(r,n):s[r.level].func(r,n);if(c!==D&&c!==k||(r.status=666),c===M||c===D)return 0===e.avail_out&&(r.last_flush=-1),m;if(c===A&&(1===n?f._tr_align(r):5!==n&&(f._tr_stored_block(r,0,0,!1),3===n&&(L(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),_(e),0===e.avail_out))return r.last_flush=-1,m}return n!==p?m:r.wrap<=0?1:(2===r.wrap?(P(r,255&e.adler),P(r,e.adler>>8&255),P(r,e.adler>>16&255),P(r,e.adler>>24&255),P(r,255&e.total_in),P(r,e.total_in>>8&255),P(r,e.total_in>>16&255),P(r,e.total_in>>24&255)):(F(r,e.adler>>>16),F(r,65535&e.adler)),_(e),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?m:1)},t.deflateEnd=function(e){var n;return e&&e.state?(n=e.state.status)!==T&&69!==n&&73!==n&&91!==n&&103!==n&&n!==I&&666!==n?N(e,g):(e.state=null,n===I?N(e,-3):m):g},t.deflateSetDictionary=function(e,n){var t,r,i,o,a,u,c,s,f=n.length;if(!e||!e.state)return g;if(t=e.state,2===(o=t.wrap)||1===o&&t.status!==T||t.lookahead)return g;for(1===o&&(e.adler=d(e.adler,n,f,0)),t.wrap=0,f>=t.w_size&&(0===o&&(L(t.head),t.strstart=0,t.block_start=0,t.insert=0),s=new l.Buf8(t.w_size),l.arraySet(s,n,f-t.w_size,t.w_size,0),n=s,f=t.w_size),a=e.avail_in,u=e.next_in,c=e.input,e.avail_in=f,e.next_in=0,e.input=n,H(t);t.lookahead>=S;){for(r=t.strstart,i=t.lookahead-(S-1);t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+S-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,--i;);t.strstart=r,t.lookahead=S-1,H(t)}return t.strstart+=t.lookahead,t.block_start=t.strstart,t.insert=t.lookahead,t.lookahead=0,t.match_length=t.prev_length=S-1,t.match_available=0,e.next_in=u,e.input=c,e.avail_in=a,t.wrap=o,m},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":2,"./adler32":4,"./crc32":5,"./messages":7,"./trees":8}],7:[function(e,n,t){"use strict";n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],8:[function(e,n,t){"use strict";var c=e("../utils/common"),u=0,s=1;function r(e){for(var n=e.length;0<=--n;)e[n]=0}var f=0,a=29,l=256,d=l+1+a,v=30,h=19,m=2*d+1,g=15,i=16,p=7,y=256,E=16,b=17,w=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=new Array(2*(d+2));r(T);var I=new Array(2*v);r(I);var M=new Array(512);r(M);var A=new Array(256);r(A);var D=new Array(a);r(D);var k,N,O,L=new Array(v);function _(e,n,t,r,i){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function o(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}function U(e){return e<256?M[e]:M[256+(e>>>7)]}function P(e,n){e.pending_buf[e.pending++]=255&n,e.pending_buf[e.pending++]=n>>>8&255}function F(e,n,t){e.bi_valid>i-t?(e.bi_buf|=n<<e.bi_valid&65535,P(e,e.bi_buf),e.bi_buf=n>>i-e.bi_valid,e.bi_valid+=t-i):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)}function j(e,n,t){F(e,t[2*n],t[2*n+1])}function B(e,n){for(var t=0;t|=1&e,e>>>=1,t<<=1,0<--n;);return t>>>1}function H(e,n,t){var r,i,o=new Array(g+1),a=0;for(r=1;r<=g;r++)o[r]=a=a+t[r-1]<<1;for(i=0;i<=n;i++){var u=e[2*i+1];0!==u&&(e[2*i]=B(o[u]++,u))}}function q(e){var n;for(n=0;n<d;n++)e.dyn_ltree[2*n]=0;for(n=0;n<v;n++)e.dyn_dtree[2*n]=0;for(n=0;n<h;n++)e.bl_tree[2*n]=0;e.dyn_ltree[2*y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function V(e){8<e.bi_valid?P(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function z(e,n,t,r){var i=2*n,o=2*t;return e[i]<e[o]||e[i]===e[o]&&r[n]<=r[t]}function X(e,n,t){for(var r=e.heap[t],i=t<<1;i<=e.heap_len&&(i<e.heap_len&&z(n,e.heap[i+1],e.heap[i],e.depth)&&i++,!z(n,r,e.heap[i],e.depth));)e.heap[t]=e.heap[i],t=i,i<<=1;e.heap[t]=r}function W(e,n,t){var r,i,o,a,u=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],i=e.pending_buf[e.l_buf+u],u++,0===r?j(e,i,n):(o=A[i],j(e,o+l+1,n),0!==(a=x[o])&&(i-=D[o],F(e,i,a)),o=U(--r),j(e,o,t),0!==(a=S[o])&&(r-=L[o],F(e,r,a))),u<e.last_lit;);j(e,y,n)}function G(e,n){var t,r,i,o=n.dyn_tree,a=n.stat_desc.static_tree,u=n.stat_desc.has_stree,c=n.stat_desc.elems,s=-1;for(e.heap_len=0,e.heap_max=m,t=0;t<c;t++)0!==o[2*t]?(e.heap[++e.heap_len]=s=t,e.depth[t]=0):o[2*t+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=s<2?++s:0,o[2*i]=1,e.depth[i]=0,e.opt_len--,u&&(e.static_len-=a[2*i+1]);for(n.max_code=s,t=e.heap_len>>1;1<=t;t--)X(e,o,t);for(i=c;t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],X(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=r,o[2*i]=o[2*t]+o[2*r],e.depth[i]=(e.depth[t]>=e.depth[r]?e.depth[t]:e.depth[r])+1,o[2*t+1]=o[2*r+1]=i,e.heap[1]=i++,X(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,n){var t,r,i,o,a,u,c=n.dyn_tree,s=n.max_code,f=n.stat_desc.static_tree,l=n.stat_desc.has_stree,d=n.stat_desc.extra_bits,v=n.stat_desc.extra_base,h=n.stat_desc.max_length,p=0;for(o=0;o<=g;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;t<m;t++)r=e.heap[t],o=c[2*c[2*r+1]+1]+1,h<o&&(o=h,p++),c[2*r+1]=o,s<r||(e.bl_count[o]++,a=0,v<=r&&(a=d[r-v]),u=c[2*r],e.opt_len+=u*(o+a),l&&(e.static_len+=u*(f[2*r+1]+a)));if(0!==p){do{for(o=h-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[h]--,p-=2}while(0<p);for(o=h;0!==o;o--)for(r=e.bl_count[o];0!==r;)i=e.heap[--t],s<i||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}(e,n),H(o,s,e.bl_count)}function K(e,n,t){var r,i,o=-1,a=n[1],u=0,c=7,s=4;for(0===a&&(c=138,s=3),n[2*(t+1)+1]=65535,r=0;r<=t;r++)i=a,a=n[2*(r+1)+1],++u<c&&i===a||(u<s?e.bl_tree[2*i]+=u:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*E]++):u<=10?e.bl_tree[2*b]++:e.bl_tree[2*w]++,o=i,(u=0)===a?(c=138,s=3):i===a?(c=6,s=3):(c=7,s=4))}function J(e,n,t){var r,i,o=-1,a=n[1],u=0,c=7,s=4;for(0===a&&(c=138,s=3),r=0;r<=t;r++)if(i=a,a=n[2*(r+1)+1],!(++u<c&&i===a)){if(u<s)for(;j(e,i,e.bl_tree),0!=--u;);else 0!==i?(i!==o&&(j(e,i,e.bl_tree),u--),j(e,E,e.bl_tree),F(e,u-3,2)):u<=10?(j(e,b,e.bl_tree),F(e,u-3,3)):(j(e,w,e.bl_tree),F(e,u-11,7));o=i,(u=0)===a?(c=138,s=3):i===a?(c=6,s=3):(c=7,s=4)}}r(L);var Q=!1;function Y(e,n,t,r){var i,o,a,u;F(e,(f<<1)+(r?1:0),3),o=n,a=t,u=!0,V(i=e),u&&(P(i,a),P(i,~a)),c.arraySet(i.pending_buf,i.window,o,a,i.pending),i.pending+=a}t._tr_init=function(e){Q||(function(){var e,n,t,r,i,o=new Array(g+1);for(r=t=0;r<a-1;r++)for(D[r]=t,e=0;e<1<<x[r];e++)A[t++]=r;for(A[t-1]=r,r=i=0;r<16;r++)for(L[r]=i,e=0;e<1<<S[r];e++)M[i++]=r;for(i>>=7;r<v;r++)for(L[r]=i<<7,e=0;e<1<<S[r]-7;e++)M[256+i++]=r;for(n=0;n<=g;n++)o[n]=0;for(e=0;e<=143;)T[2*e+1]=8,e++,o[8]++;for(;e<=255;)T[2*e+1]=9,e++,o[9]++;for(;e<=279;)T[2*e+1]=7,e++,o[7]++;for(;e<=287;)T[2*e+1]=8,e++,o[8]++;for(H(T,d+1,o),e=0;e<v;e++)I[2*e+1]=5,I[2*e]=B(e,5);k=new _(T,x,l+1,d,g),N=new _(I,S,0,v,g),O=new _(new Array(0),C,0,h,p)}(),Q=!0),e.l_desc=new o(e.dyn_ltree,k),e.d_desc=new o(e.dyn_dtree,N),e.bl_desc=new o(e.bl_tree,O),e.bi_buf=0,e.bi_valid=0,q(e)},t._tr_stored_block=Y,t._tr_flush_block=function(e,n,t,r){var i,o,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var n,t=4093624447;for(n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return u;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return s;for(n=32;n<l;n++)if(0!==e.dyn_ltree[2*n])return s;return u}(e)),G(e,e.l_desc),G(e,e.d_desc),a=function(e){var n;for(K(e,e.dyn_ltree,e.l_desc.max_code),K(e,e.dyn_dtree,e.d_desc.max_code),G(e,e.bl_desc),n=h-1;3<=n&&0===e.bl_tree[2*R[n]+1];n--);return e.opt_len+=3*(n+1)+5+5+4,n}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=t+5,t+4<=i&&-1!==n?Y(e,n,t,r):4===e.strategy||o===i?(F(e,2+(r?1:0),3),W(e,T,I)):(F(e,4+(r?1:0),3),function(e,n,t,r){var i;for(F(e,n-257,5),F(e,t-1,5),F(e,r-4,4),i=0;i<r;i++)F(e,e.bl_tree[2*R[i]+1],3);J(e,e.dyn_ltree,n-1),J(e,e.dyn_dtree,t-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),W(e,e.dyn_ltree,e.dyn_dtree)),q(e),r&&V(e)},t._tr_tally=function(e,n,t){return e.pending_buf[e.d_buf+2*e.last_lit]=n>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&n,e.pending_buf[e.l_buf+e.last_lit]=255&t,e.last_lit++,0===n?e.dyn_ltree[2*t]++:(e.matches++,n--,e.dyn_ltree[2*(A[t]+l+1)]++,e.dyn_dtree[2*U(n)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){var n;F(e,2,3),j(e,y,T),16===(n=e).bi_valid?(P(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):8<=n.bi_valid&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)}},{"../utils/common":2}],9:[function(e,n,t){"use strict";n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[1])(1)}(),ln.IGNORABLE_TAGS=L.immutableSet("NOSCRIPT","SCRIPT"),vn.GB_ID_ATTRIBUTE_NAME="gbid",gn.DefaultOptions={addHeader:!(yn.prototype.toString=function(){return"seq:"+this.seq+"referrer"+this.referrer+"charset:"+this.charset+"cookie-len"+(this.cookie?this.cookie.length:0)+(20<this.html.length?"html length: "+this.html.length:"html: "+this.html)})},gn.CLS_COMMENT_PREFIX=" CLS_DISABLED ",gn.CLS_HEADER_PREFIX=" GlassBox synthetic page ",gn.HTML_SCHEMA_PREFIX="<!DOCTYPE HTML>\n",gn.AttributeUpdaters={value:function(e,n){e.setAttribute("value",n?n.maskValue(e):e.value)},checked:function(e){e.checked&&e.setAttribute("checked","")},selectedIndex:function(e){var n=e.selectedIndex,t=e.getElementsByTagName("option");t[n]&&t[n].setAttribute("selected","")}},wn.prototype.selector=function(){return void 0===this._resolvedSelector&&(this._resolvedSelector=this.nodeCache.selectorFor(this.element,this._useId)),this._resolvedSelector},wn.prototype.invalidateId=function(){this._useId=!1,this._resolvedSelector=D},Sn.propertyForElement=function(e){return"SELECT"===e.tagName?"selectedIndex":"TEXTAREA"===e.tagName?"value":"INPUT"===e.tagName?"checkbox"===e.getAttribute("type")||"radio"===e.getAttribute("type")?"checked":"value":D},Sn.defaultValue=function(e,n){if("checked"===n)return e.hasAttribute("checked");if("selectedIndex"===n){var t=e.querySelector("option[selected]");return t?t.index:null!==e.querySelector("option")?0:-1}var r=e.getAttribute(n);return r||"value"!==n?r:""};var ae,ue,ce,se,fe,le,de,ve,he,pe,me,ge=(ae=new vn(function(e,n){if("HTML"===e.tagName)return"html";var t=S.getSelectorExpression(e,!1,{useId:n,identifyingAttribute:E.domIdentifyingAttribute});return null===t&&e===A.body&&(t="BODY"),t},E.domAssignGlassboxId),ue=new Ze({valueMaskingMode:E.maskingMode,valueMaskIds:E.maskList,valueMaskClasses:E.maskClassList,domMaskIds:E.domMaskContentById,domMaskClasses:E.domMaskContentByClass,domOmitIds:E.domMaskOmitById,domOmitClasses:E.domMaskOmitByClass,domMaskedAttributes:E.domMaskedAttributes,domMaskAttributesTags:E.domMaskAttributesByTag,domMaskSimpleSelector:E.domMaskSimpleSelector},Ve()),ce=C,se=new function(e){var n=e.implementation.createHTMLDocument("clonner-doc");this.cloneNode=function(e){return n.importNode(e,!0)}}(A),fe=new fn(!E.domKeepComments,["iframe","script","noscript"],null,E.domKeepScriptMatching),le=new fn(!E.domKeepComments,["script","noscript"],{input:E.domIgnoredFormElements},E.domKeepScriptMatching),de=function(e,n){var t;for(t=0;t<n.length;t++)if(-1!==e.indexOf(n[t]))return!0;return!1}(A.location.href,E.domPartialWhenLocationContains||[]),ve=function(e,n){V.saveClsDebugErrorEvent("domPlugin",n,e)},function(t,r,i,o,a){var u=!!r;a=a||{},ve=ve||function(){};var c=!1,s=!1,f=!1,l=0,d=0,e=0,n=function(){f=s=!1,l=0},v=function(){n(),h()},h=function(){if(!f&&!s)try{ae.introduceDocument(A),u&&r.start();var e=((n=o.take(d))&&(d++,t.emit("pageSnapshot:save",n),t.emit("pageSnapshot:report",n)),n);e?(t.emit("domTrackingStarted"),i.start(),s=!0,L.log("reporting full page snapshot and starting DOM mutations tracking. snapshotData:"+e)):3<=++l?(ve("pageSnapshotError(3)",o.lastError),L.log("DOM recording is aborted: failed to retrieve page snapshot after 3 attempts."),f=!0):L.log("could not take page snapshot (is it too early?) attempt "+l+" of 3")}catch(e){ve("startingError",e),L.log("error during DOM recording plugin starting. error: "+e)}var n;return s},p=function(e){if(!c)return D;var n;for(n=0;n<a.ajaxTriggers.length;n++)if(-1!==e.url.indexOf(a.ajaxTriggers[n]))return L.log("new dom-based page trigger by ajax. trigger uri:"+e.url),void v()},m=function(e){if(!c)return D;-1!==a.triggers.indexOf(e.selectorExpression)&&(L.log("new dom-based page trigger was clicked. selector:"+e.selectorExpression),v())},g=function(){u&&(r.start(),!c||s||f||void 0===a.onLoadTimeoutReport||-1===a.onLoadTimeoutReport||setTimeout(h,a.onLoadTimeoutReport))},y=function(){++e%a.updateOnWsCount==0&&(L.log("dispatching DOM update event. ws messages:"+e),t.emit("pageUpdate"))};return{initialize:function(e){return E.domRecordEnabled?(e.on("event:mousedown",m),e.on("ajax:send",p),e.on("init:loaded",g),u||L.log("WARNING: DOM changes are not tracked. DOM Observer is not supported by the browser."),-1!==a.updateOnWsCount&&new dn(M,y),a.compressionEnabled&&L.log("DOM snapshots compression ENABLED."),de&&L.log("DOM snapshots partial mode ENABLED (by location)."),c=!0):(L.log("DOM recording is disabled."),!1)},getDomSnapshot:function(){return c&&h()&&u?i.getSnapshot():D},ensureStarted:h,isAborted:function(){return f},isSemiDomActivated:function(){return!u},isStarted:function(){return s},reset:n,getObserverType:function(){return r.getName()},getDomMasker:function(){return ue},getNodeCache:function(){return ae}}}(T,((me=new hn(M,T,A,ln)).supported()?!E.domIE11ForceMutationObserver&&me.n()&&(me=new pn(T,A,ln)):me=E.semiDomEnabled?D:new pn(T,A,ln),me),new bn({usingGlassboxIds:E.domAssignGlassboxId},(pe=[{name:"DOM-mutations",tracker:new xn(T,ae),providers:de?[]:function(c,a,s,f,e){f=f||function(){return!1};var n=function(e,n){var t=e.attributes?Object.keys(e.attributes):[];if(t&&0<t.length&&!f(e.element)){var r,i,o={};for(r=0;r<t.length;r++)i=e.element.getAttribute(t[r]),"INPUT"===e.element.tagName&&"value"===t[r]&&(i="password"===e.element.getAttribute("type")?I.maskValueOf(i):a.maskValue(e.element)),o[t[r]]={value:i,ordinal:e.attributes[t[r]]};L.ensureProperty(n,"domChanges",e.selector()).attributes=o}},t=function(e,n){if(void 0!==e.characterDataChild){var t=L.indexOfNode(e.element.childNodes,e.characterDataChild);if(0<=t){var r=e.characterDataChild;if(f(r))return;s&&s.isDomMasked(e.element,ne.SELF_OR_ANY_PARENT,ee.TEXT)&&(r=c.cloneNode(e.characterDataChild),s.domMaskNodeForce(r,ee.TEXT)),L.ensureProperty(n,"domChanges",e.selector()).characterData={value:r.textContent,child:t}}}},r=function(e,n){if(void 0!==e.childListOrdinal){if(s.isDomMasked(e.element,ne.SELF_OR_ANY_PARENT,ee.OMIT))return;var t,r,i,o=[],a=!1,u=s.isDomMasked(e.element,ne.SELF_OR_ANY_PARENT,ee.TEXT);for(t=0;t<e.element.childNodes.length;t++)r=e.element.childNodes.item(t),f(r)||s.isDomMasked(r,ne.SELF,ee.OMIT)||(u?(r=c.cloneNode(r),s.domMaskNodeForce(r,ee.TEXT)):(a=!1,s.isDomMasked(r,ne.SELF_OR_ANY_CHILD,ee.OMIT)&&(r=c.cloneNode(r),s.domMaskNode(r,ee.OMIT),a=!0),s.isDomMasked(r,ne.SELF_OR_ANY_CHILD,ee.TEXT,ee.VALUE_ATTRIBUTE,ee.ATTRIBUTE)&&(a||(r=c.cloneNode(r)),s.domMaskNode(r,ee.TEXT,ee.VALUE_ATTRIBUTE,ee.ATTRIBUTE))),(i=L.DOMElement2Str(r))&&o.push(i));L.ensureProperty(n,"domChanges",e.selector()).children={ordinal:e.childListOrdinal,childList:o}}};return{all:function(){return[n,t,r]}}}(se,ce,ue,ln).all()},{name:"property",tracker:new Sn(A,ae,E.domIgnoredFormElements),providers:En(ce,{ignoredFormElement:E.domIgnoredFormElements}).all()}],E.domRecordCssRules&&pe.push({name:"css",tracker:new Cn(M,ae),providers:(he=function(e,n){e.rules&&0<e.rules.length&&(L.ensureProperty(n,"cssRuleChanges").rules=e.rules)},{all:function(){return[he]}}).all()}),pe)),new gn(A,se,ce,ue,new en({cookieMask:E.maskCookies}),fe,le,{domRecordCssRules:E.domRecordCssRules}),{triggers:E.domNewPageTriggers,ajaxTriggers:E.domNewPageAjaxTriggers,onLoadTimeoutReport:E.domStartAfter,updateOnWsCount:E.domUpdateEveryWsMsgIn,compressionEnabled:E.domCompress}));void 0!==V&&V.registerPlugin("domRecordingPlugin",ge);var ye,Ee,be,we=(ye=A,Ee=void 0!==E&&E.scrollDebug,{scroll:function(e,n){return be=function(a,u,c,s){var f,l,d=0,v=0;function h(){l&&(v++,l(),l=null,s&&console.log("SCROLL DEBUG: bounced invocation #"+v))}return{debouncedHandler:function(e){var n,t,r,i,o;clearTimeout(f),l=c.bind(this,e),(o=(i=e.target)===a?a.documentElement:i)._gb_scrollInfo||(o._gb_scrollInfo={lastScrollTop:o.scrollTop,lastVDelta:0}),t=(n=o).scrollTop-n._gb_scrollInfo.lastScrollTop,r=t*n._gb_scrollInfo.lastVDelta<0,n._gb_scrollInfo.lastVDelta=t,n._gb_scrollInfo.lastScrollTop=n.scrollTop,r?h():(f=setTimeout(h,u),d++,s&&d%20==0&&console.log("SCROLL DEBUG: de-bouncer - called:",v," of total:",d))},bounce:h}}(ye,n,e,Ee)},bounceAll:function(e){be&&"scroll"!==e&&be.bounce()}});if(M.performance&&void 0!==M.performance.getEntriesByType&&void 0!==M.MutationObserver&&V.registerPlugin("resourceRecorderPlugin",new function(e,n,t){if(E.resourcesRecordEnabled&&void 0!==e.XMLHttpRequest){var r=new In(e,new He(e.localStorage,{keysPrefix:k.Storage.UnboundKeyPrefix}),Tn,n,t,(i=E.resourcesRecordAllowCors,o=E.resourceIgnoreWhenUrlContains,function(e){if(!L.startsWith(e,"http")||!i&&L.extractOrigin(e)!==M.location.origin)return!0;for(var n=0;n<o.length;n++)if(-1!==e.indexOf(o[n]))return!0;return!1}),{electProbability:E.resourcesRecordChance,electAmount:E.resourcesRecordCount,maxPendingResources:5});n.on("init:loaded",function(){setTimeout(r.fetchResources.bind(r),5e3)}),n.on("event:unload",r.electResources.bind(r))}var i,o;if(E.resourceTimingRecordEnabled&&Ie(E.resourceTimingRecordEnabledByChance,x,"performanceRecord")){var a=new Mn(e,T,[{type:"resource",properties:["name","startTime","requestStart","responseStart","responseEnd","duration","decodedBodySize","async"],filterBy:"initiatorType",validFilterValues:L.immutableSet("link","css","font","img","input","script")}]);n.on("init:loaded",a.reportMeasurements.bind(a))}this.initialize=function(){},this.startRecordingAll=function(){console.log("Entering full resources recording mode."),r.recordAllResources()},this.stopRecordingAll=function(){console.log("Exiting full resources recording mode."),r.stopRecordAllResources()}}(M,T,new Rn(L.Base64))),E.reportValidationErrors&&V.registerPlugin("formValidationPlugin",new function(e,t,r,i){t.on("init:loaded",function(){if("undefined"!=typeof jQuery&&void 0!==jQuery.validator)new Dn(t,S).intercept();else{var n=new An(e,t,S,{domFormValidationClassErrors:i.domFormValidationClassErrors});t.on("event:mousedown",function(e){setTimeout(n.intercept.bind(n,e.element),r)})}}),this.initialize=function(){}}(M,T,500,{domFormValidationClassErrors:E.domFormValidationClassErrors})),E.clientAttributesEnabled&&void 0!==V){var xe=V.plugins.domRecordingPlugin&&V.plugins.domRecordingPlugin.getDomMasker();xe||(xe={isDomMasked:function(){return!1}}),V.registerPlugin("attributePlugin",new function(e,n){e.on("newRemoteConfig",function(e){e.attributeRules&&n.processRules(e.attributeRules)}),this.initialize=function(){},this.stats=function(){return n.getStats()}}(T,new function(f,l,i,o,a,d){var v={},h=[],u=["name","pageUrl","selector","accessorMethod","accessor","maxLength"],p={masked:0,reported:0,configured:0,configurationLastUpdatedAt:0,badRules:0,evalRoundsCount:0,evalDurationTotalMsc:0,evalDurationAverageMsc:0};function r(e){for(var n=0;n<u.length;n++)if(!e[u[n]])return;if(a[e.accessorMethod]&&o.isValidSelector(e.selector)&&"number"==typeof e.maxLength){var t,r=e.pageUrl;e.pageHash&&(r+="#"+e.pageHash);try{t=new RegExp("^"+r.split("*").join(".*")+"$")}catch(e){return void L.log("Exception occurred during parsing regular expression. Error: "+e.message,e)}return new i(e,o,a,t)}}function c(e,n){try{for(var t,r,i,o,a=f.location.href,u={},c=0;c<h.length;c++)if(i=Date.now(),t=h[c].evaluate(e,a,n,u),o=Date.now(),p.evalDurationTotalMsc+=o-i,p.evalRoundsCount++,p.evalDurationAverageMsc=p.evalDurationTotalMsc/p.evalRoundsCount,r=h[c].getRuleName(),t&&t.val&&v[r]!==t.val){if(t.isMasked())p.masked++;else{var s=Math.min(h[c].getRuleMaxLength(),d.clientAttributeMaxLength);l.emit("clientAttribute",{name:r,val:t.val.substring(0,s)}),p.reported++}v[r]=t.val}}catch(e){L.log("Exception occurred during rule evaluation. Error: "+e.message,e)}}l.on("domMutation",function(e){var n="characterData"===e.type,t=!n&&"attribute"===e.type,r=n?e.target.parentElement:e.target;n||"childList"!==e.type||(n=1===e.addedNodes.length&&e.addedNodes[0].nodeType===Node.TEXT_NODE);c(r,n||t)}),this.processRules=function(e){v={},p.configurationLastUpdatedAt=L.currentTimestamp(),function(e){for(var n,t=0;t<e.length;t++)(n=r(e[t]))&&h.push(n);p.configured=e.length,p.badRules=e.length-h.length}(e),c(f.document,!1)},this.getStats=function(){return p}}(M,T,kn,function(e){var r=e.createElement("div"),s=Element.prototype.matches||Element.prototype.msMatchesSelector,o=function(o){function a(e){return e.replace(/^[\s>]*|[\s>]*$/gi,"")}return function(e){for(var n,t=[],r=0,i=o.exec(e);null!==i;)i.index&&(n=a(e.substring(r,i.index)))&&t.push({selector:n,eqIndex:-1}),t.push({selector:a(i[1]),eqIndex:parseInt(i[2])}),r=i.index+i[0].length,i=o.exec(e);return r<e.length&&(n=a(e.substring(r)))&&t.push({selector:n,eqIndex:-1}),t}}(/([^>]*):eq\((\d+)\)/gi);function f(e,n,t,r,i){if("function"!=typeof e.querySelector)return[];if(-1!==n.eqIndex){if(1===r){var o=e.querySelectorAll(n.selector);return o[n.eqIndex]?[o[n.eqIndex]]:[]}var a,u=0;for(a=0;a<e.children.length;a++)if(s.call(e.children[a],n.selector)&&u++===n.eqIndex)return[e.children[a]];return[]}if(i&&t){var c=e.querySelector(n.selector);return c?[c]:[]}return Array.prototype.slice.call(e.querySelectorAll(n.selector))}function a(e,n,t){for(var r,i,o,a,u=n.length,c=[e];0<n.length;){for(r=n.shift(),o=[],i=0;i<c.length;i++){if(a=f(c[i],r,t,u,0===n.length),t&&0===r.length&&0<a.length)return[a[0]];o.push.apply(o,a)}c=o}return c}return{querySelector:function(e,n){return a(e,o(n),!0)[0]||null},querySelectorAll:function(e,n){return a(e,o(n),!1)},matches:function(e,n){var t,r,i=o(n);return 1===i.length&&-1===i[0].eqIndex?s&&s.call(e,n):-1!==(t=e.ownerDocument,r=n,a(t,o(r),!1)).indexOf(e)},isValidSelector:function(e){if(!e)return!1;try{var n,t=o(e);for(n=0;n<t.length;n++)f(r,t[0],!0,t.length,!0);return 0<t.length}catch(e){return!1}}}}(M.document),function(e,n,t){var r=L.immutableSet.apply(null,t.domMaskedAttributes),i=L.immutableSet.apply(null,t.domMaskAttributesByTag);function o(){return!("value"!==this.accessor||!e.isDomMasked(this.elem,ne.SELF,ee.ATTRIBUTE))||!!e.isDomMasked(this.elem,ne.SELF_OR_ANY_PARENT,ee.OMIT)||!(!r[this.accessor]||!i[this.elem.tagName.toLowerCase()])}function a(){return!!(n&&"value"===this.accessor&&n.isValueMasked(this.elem)||("innerText"===this.accessor||"textContent"===this.accessor)&&(e.isDomMasked(this.elem,ne.SELF_OR_ANY_CHILD,ee.TEXT)||e.isDomMasked(this.elem,ne.SELF_OR_ANY_PARENT,ee.TEXT))||"innerHTML"===this.accessor&&(e.isDomMasked(this.elem,ne.SELF_OR_ANY_CHILD,ee.TEXT,ee.ATTRIBUTE)||e.isDomMasked(this.elem,ne.SELF_OR_ANY_PARENT,ee.TEXT,ee.ATTRIBUTE))||"outerHTML"===this.accessor&&(e.isDomMasked(this.elem,ne.SELF_OR_ANY_CHILD,ee.TEXT,ee.ATTRIBUTE)||e.isDomMasked(this.elem,ne.SELF_OR_ANY_PARENT,ee.TEXT,ee.ATTRIBUTE))||e.isDomMasked(this.elem,ne.SELF_OR_ANY_PARENT,ee.OMIT))}function u(){return!!e.isDomMasked(this.elem,ne.SELF_OR_ANY_PARENT,ee.OMIT)}return{attribute:function(e,n){return{accessor:n,elem:e,val:e.getAttribute&&e.getAttribute(n),isMasked:o}},property:function(e,n){return{accessor:n,elem:e,val:""+(e[n]||""),isMasked:a}},constant:function(e,n){return{elem:e,val:n,isMasked:u}}}}(xe,C,{domMaskedAttributes:E.domMaskedAttributes,domMaskAttributesByTag:E.domMaskAttributesByTag}),{clientAttributeMaxLength:E.clientAttributeMaxLength})))}kn.prototype.matchPattern=function(e){return this._urlRegexp.test(e)},kn.prototype.getRuleName=function(){return this._rule.name},kn.prototype.getRuleMaxLength=function(){return this._rule.maxLength},kn.prototype.evaluate=function(e,n,t,r){if(this.matchPattern(n)){var i=r[this._rule.selector];if(i||(t?this._elementResolver.matches(e,this._rule.selector)&&(i=e):i=this._elementResolver.querySelector(e,this._rule.selector)),i)return r[this._rule.selector]=i,this._accessors[this._rule.accessorMethod](i,this._rule.accessor)}},void 0!==V&&V.registerPlugin("gatewayPlugin",new function(e,i){e.on("handleGatewayResponse",function(e){var n;try{n=JSON.parse(e)}catch(e){return void L.log("Failed parsing JSON of response: "+e.message,e)}var t=n.appId;for(var r in n)i[r]&&i[r].handle(n[r],t)}),this.initialize=function(){}}(T,{configuration:new function(t,r,i){var o;t.on("init:loaded",function(){(o=function(){var e,n=i.get("conf");if(n)try{e=r.decode(n)}catch(e){L.log("Failed parsing JSON for configuration: "+e.message,e)}return e}()||{}).configuration&&t.emit("newRemoteConfig",o.configuration)}),this.handle=function(e,n){o&&(o.configuration&&o.configuration.hash!==e.hash||o.appId!==n)&&(i.set("conf",r.encode({configuration:e,appId:n})),o.configuration=e,o.appId=n,e&&t.emit("newRemoteConfig",e))}}(T,new Rn(L.Base64),new He(M.localStorage,{keysPrefix:k.Storage.BoundKeyPrefix})),commands:new function(){this.handle=function(e,n){}}})),(M[e]=V).initialize(n)}function Se(e){e.debugMode=!1,e.traceMode=!1,e.suppressMouseMovesDebug=!0,e.reportByPost=!1,e.reportPreferSendBeaconAPI=!1,e.reportDisableCors=!1,e.timingMode=!1,e.useIdSelectors=!0,e.noIdSelectorsForClassNames=["skull_list"],e.noIdSelectorsForIDs=[],e.noIdSelectorsForAttrs=[],e.useNameInFormSelectors=!1,e.preferNamesInFormSelectors=!1,e.reportValidationErrors=!0,e.domFormValidationClassErrors=[],e.supportNativeAutoComplete=!1,e.recordEnterForInputs=!0,e.recordTypingAll=!1,e.recordTypingForAttrs=["bs-typeahead"],e.recordTypingForClasses=["tt-input"],e.recordTypingForIDs=[],e.ignorableElementIds=["cls_logger","cls_logger_tab"],e.idleEventTimeInterval=-1,e.maxTimeForIdleEvent=42e4,e.validationValueForRenderTime=2e4,e.titleCharsLimit=150,e.recordAjaxCallsAnyway=!1,e.ajaxDebug=!1,e.ajaxHashRecurrentUrls=!0,e.ajaxCaptureResponseHeaders=!1,e.ajaxCaptureFQDNOnly=!1,e.ajaxCaptureResponseContentWhenUrlMatches="",e.ajaxCaptureResponseOnStatusGreater=-1,e.reportVisualNames=!0,e.visualNameDebug=!1,e.visualName={chatLimit:40,CLS_NAME_ATTR:"cls_vname",filterNamingByTagName:["script","style"],by:{title:!0,alt:!0,ariaLabel:!0,inlineText:!0,placeholder:!0,inputConsts:!0,inputButtonsValue:!0,name:!0,id:!0,parent:!0,child:!0},elementListToCheckParent:["img","span","div"],elementListToCheckChild:["button"],filterInlineTextByTagName:["div","span","td"],filterInlineTextByClassName:[]},e.maskingMode=k.ValueMaskingMode.BlackList,e.maskList=[],e.maskClassList=[],e.maskCookies=[],e.cookieAssignFQDN=!1,e.recordErrors=!0,e.recordConsoleErrors=!0,e.minDragPixels=10,e.botDetection=!1,e.reportDebugInfo=!0,e.DOMBeaconImg=!1,e.reportAllOnUnload=!1,e.maxReportsWithUnload=4,e.truncateEventsWithUnload=!0,e.recordScrolls=!1,e.dependentScroll=!0,e.minStallingScrollTime=3e3,e.scrollDebug=!1,e.recordMouseMoves=!1,e.mmRecordTimes=!1,e.mmDiluteMinPixels=20,e.mmMaxMovesWithUnload=100,e.mmMaxMovesInEventNoTimes=180,e.mmMaxMovesInEventWithTimes=130,e.mmMinStallingMoveTime=1e4,e.mmMaxInMemoryMoves=600,e.mmDebug=!1,e.SCIntegration=!1,e.SCIntegrationURLsContainList=[],e.SCIntegrationKeyList=["pageName","v25","v11","v39"],e.externalIdAttr="id",e.recordHovers=!1,e.mhDeepLevel=2,e.mhMaxListSize=10,e.mhMaxInMemeoryHovers=100,e.mhDebug=!1,e.reportHybrid=!1,e.domRecordEnabled=!1,e.reportAllResourcesLoad=!1,e.ignoreReportResourcesByTagNames=[],e.reportExternalResources=!1,e.reportScriptURLContainList=[],e.reportScriptKeyList=[],e.reportImageURLContainList=[],e.reportImageKeyList=[],e.clsDebug=!0,e.clsDebugCharsLimit=1e3,e.clsDebugMaxReports=5,e.reportEncoding="formUrl",e.reportCompress=!1,e.reportAddUriParams=["clsjsv","_cls_s","_cls_v","pid","sn"],e.reportToStorageAfterUnload=!0,e.duplicateIdCheck=!1,e.blackoutWhenLocationContains=[],e.reportCorsForceSafelistedHeaders=!0,e.reportCorsTakeNativeCookies=[],e.reportIncludeReferrer=!0,e.reportCreateSubSessionCookie=!1,e.sessionIdByQueryParam="_cls_s",e.visitorIdByQueryParam="_cls_v",e.sendStateInfo=!0,e.debounceScrolls=500}function Ce(e){e.maxReportSize=1900,e.reportInterval=3e3,e.reportByPost=!0,e.maxPostReportSize=15e4,e.reportPostInterval=1e4,e.postRetry=!1,e.interceptAjax=!0,e.ajaxHashRecurrentUrls=!1,e.ajaxRecordMetadata="always",e.domNewPageTriggers=[],e.domNewPageAjaxTriggers=[],e.domStartAfter=1e4,e.domExpireSnapshotAfter=114e4,e.domUpdateEveryWsMsgIn=-1,e.domCompress=!0,e.domRecordCssRules=!0,e.domRecordEnabled=!0,e.resourcesRecordEnabled=!1,e.resourcesRecordCount=1,e.resourcesRecordChance=.5,e.resourcesRecordAllowCors=!0,e.resourceIgnoreWhenUrlContains=[],e.resourceTimingRecordEnabled=!1,e.resourceTimingRecordEnabledByChance=.01,e.clientAttributesEnabled=!1,e.clientAttributeMaxLength=30,e.semiDomEnabled=!0,e.domIgnoredFormElements=["__VIEWSTATE"],e.domMaskContentById=[],e.domMaskOmitByClass=[],e.domMaskOmitById=[],e.domMaskContentByClass=[],e.domMaskedAttributes=[],e.domMaskAttributesByTag=[],e.domMaskSimpleSelector=[],e.domPartialWhenLocationContains=[],e.domKeepComments=!1,e.domOmitAfterUnload=!1,e.domAssignGlassboxId=!1,e.domIE11ForceMutationObserver=!1,e.iframesRecordEnabled=!0,e.iframesAutoInject=!1,e.iframesHandshakeTimeout=2e3}function Re(){var a=[];this.add=function(e,n,t,r,i,o){this[i.toLowerCase()]={type:e,nullable:n,parser:t,name:i,required:o,validator:r},o&&a.push(i)},this.requiredFieldsMask=function(){for(var e={},n=0;n<a.length;n++)e[a[n]]=!0;return e}}function Te(){this.errors=[],this.warnings=[]}function Ie(e,n,t){if(void 0===e)return!1;var r,i=n.get(t+".bychance.enabled");return n.get(t+".bychance.prev_th")!==""+e&&(i=null),null===i?(r=Math.random()<e,n.set(t+".bychance.enabled",r),n.set(t+".bychance.prev_th",e)):r="true"===i,r}function Me(e,n){if(null==n)return!1;if(-1===n.indexOf("://"))return!0;var t=e.createElement("a");return t.href=n,t.hostname===e.location.hostname&&t.port===e.location.port&&t.protocol===e.location.protocol&&"file:"!==e.location.protocol}function Ae(e,a,n){function t(){return!1}function r(e,n,t){for(var r,i=[],o=0;o<e.length;o++)if(1===(i=e[o].split("*")).length)n.push(e[o]);else if(2===i.length)try{r=new RegExp("(^|\\s)"+i.join(".*")+"($|\\s)"),t.push(r)}catch(e){a.printErrorMsg("exception when creating a regular expression")}else a.printErrorMsg("more than one wildcard in string")}this._valueMaskIdsWithoutwildcards=[],this._valueMaskClassesWithoutwildcards=[],this._regexpValueMaskIds=[],this._regexpValueMaskClasses=[],this._options=e||{},this._options.valueMaskIds&&r(this._options.valueMaskIds,this._valueMaskIdsWithoutwildcards,this._regexpValueMaskIds),this._options.valueMaskClasses&&r(this._options.valueMaskClasses,this._valueMaskClassesWithoutwildcards,this._regexpValueMaskClasses),this._options.autoMaskPredicate=this._options.autoMaskPredicate||t,this._autoMaskingCallback=n||t}function De(){this.readyState=XMLHttpRequest.UNSENT,this.status=D,this._url=D,this._contentType=D,this.cls_own=!0}function ke(){this.readyState=XMLHttpRequest.UNSENT,this.status=D,this.xdr=new XDomainRequest,this.xdr.onprogress=function(){},this.xdr.ontimeout=function(){};var e=this;this.xdr.onload=function(){e.status=200,e.readyState=XMLHttpRequest.DONE,e.onreadystatechange&&e.onreadystatechange()},this.xdr.onerror=function(){e.status=400,e.readyState=XMLHttpRequest.DONE,e.onreadystatechange&&e.onreadystatechange()}}function Ne(e){this.size=0,this.limit=e,this._keymap={}}function Oe(n,v,t){var h=[],p=[];var e,m=(e=n.location||n.document.location,function(){return e.href});function r(){var e=m()||"",n=h.length;if(0===n)return h.push(e),!1;if(h[n-1]===e)return!1;var t=h[h.length-1],r=g(t),i=g(e),o=Oe.UrlType.FUlL_URL;2===r.length&&2===i.length&&r[0]===i[0]&&(o=Oe.UrlType.HASH_ONLY);var a=null;2<=n&&h[n-2]===e?(h.pop(),p.push(t),a=Oe.DirectionType.BACK):0<p.length&&p[p.length-1]===e?(p.pop(),h.push(e),a=Oe.DirectionType.FORWARD):(h.push(e),p=[]);var u,c,s,f,l=o===Oe.UrlType.FUlL_URL?e:i[1],d=o===Oe.UrlType.FUlL_URL?t:r[1];return u=a,c=o,s=d,f=l,v.emit("navigation",{direction:u,urlType:c,fromUrl:s,toUrl:f}),!0}function g(e){var n=(e||"").split("#");return[n[0],n[1]||""]}function i(n){if("function"==typeof t[n]){var e=t[n];t[n]=function(){try{3<=arguments.length&&setTimeout(function(){r()},0)}catch(e){L.log("error while intercepting history."+n+" method. error:"+e)}return e.apply(t,[].slice.call(arguments))}}}try{i("pushState"),i("replaceState")}catch(e){L.log("failed hooking native history manipulation methods.",e)}v.on("init:loaded",function(){var e=void 0!==n.onpopstate?"popstate":"hashchange";L.addEventHandler(n,e,function(){r()}),r()}),this.printHistory=function(){var e;for(e=0;e<h.length;e++)console.log("  - "+e+" : "+h[e])}}function Le(e,t,r){var i=r?function(e){var n;for(n=0;n<r.length;n++)if(-1!==e.indexOf(r[n]))return!0;return!1}:Le.ALWAYS_FALSE,o=!1;function n(e){if(i(e)!==o){var n=!o;L.log((n?"ENTERING":"LEAVING")+" recording blackout for new location:"+e),t.emit(n?Le.EVENTS.BlackoutEnter:Le.EVENTS.BlackoutLeave,e),o=n}}this.isUnderBlackout=function(){return o},t.on("init:loaded",function(){n(e.location.href)}),t.on("navigation",function(){n(e.location.href)})}function _e(e,n,t,r){this.severity=e,this.code=n,this.count=t,r&&(this.msg=r)}function Ue(r,t){this.compressionRatio=Ue.INITIAL_COMPRESSION_FACTOR,t||(t={compress:!0,forceBase64:!0});var n=t.compress||t.forceBase64?1.33:1,i=1,o=function(e,n){return(e?"1":"0")+(n?"1":"0")};this.newPayload=function(){return new Pe},this.encode=t.compress?function(e){if(0==e._updates.length)return"";var n=L.arrayToJsonSafe(e._updates),t=L.Base64.bytesToBase64(r.compress(n));return function(e){this.compressionRatio=Math.max(e,Ue.MINIMAL_COMPRESSION_FACTOR)}(t.length/n.length),o(!0,!0)+t}:function(e){if(0==e._updates.length)return"";var n=L.arrayToJsonSafe(e._updates);return o(!1,t.forceBase64)+(t.forceBase64?L.Base64.toBase64(n):n)},this.refForEvent=function(e){return""+i+++L.hashcode(e.type+e.timestamp)},this.estimatedDomUpdateSize=function(e){return(e?JSON.stringify(e).length:0)*n*(t.compress?this.compressionRatio:1)}}function Pe(){this._updates=[]}function Fe(s,f,l,d,v){v||(v={});var h=v.base64UriEncoder||encodeURIComponent,p=new Ue(d,{forceBase64:!0,compress:v.domCompress});this.name="FORM-URL",this.supportsCompression=!1,this.isCompressing=function(){return!1},this.visitXhr=function(e){e.setRequestHeader("Content-Type","application/x-www-form-urlencoded")},this.encodeSnapshotHtml=function(e){return v.domCompress?{encoded:l.Base64.bytesToBase64(d.compress(e)),plain:!1,compressed:!0}:{encoded:l.Base64.encode(e),plain:!1,compressed:!1}},this.estimateBeaconSize=function(e){return e},this.encodeEvent=function(e,n){var t=f.encoding.delimiters.eventParts,r=d.encodeTimestamp(e),i=d.encodeEventType(e.type),o=s.isUndefined(e.binding)||s.isUndefined(e.binding.valueEncoding)?e.value:e.binding.valueEncoding(e.value);void 0===n&&(n=s.isUndefined(e.selectorExpression)||null==e.selectorExpression?f.encoding.rootSelector:e.selectorExpression);var a=r+t+i+t+n;s.isString(o)&&0<o.length?a+=t+(e.shouldEncodeValue?f.encoding.valueEncodedPrefix:f.encoding.valueNotEncodedPrefix)+(e.shouldEncodeValue?l.Base64.encode(o):o):a+=t+"-";s.isUndefined(e.extraInfo)?a+=t+"-":a+=t+d.encodeExtraInfo(e);v.reportDebugInfo&&!s.isUndefined(e.debugInfo)?a+=t+d.encodeDebugInfo(e):a+=t+"-";var u="";e.domSnapshot&&(u=p.refForEvent(e),a+=t+f.encoding.domSnapshotRefPrefix+u),l.trace("encoding ("+e.type+") "+(s.contains(["webSocketFrame","resourceContent","pageSnapshot"],e.type)?r+t+i+t+"{event string is too long}":a)+(0<e.getSubPage().length?" [on "+e.getSubPage()+"]":""));var c={event:encodeURIComponent(a),domUpdate:e.domSnapshot,domUpdateRef:u};return c.length=c.event.length+p.estimatedDomUpdateSize(e.domSnapshot),c},this.encodeBeacon=function(e,n,t,r,i,o,a){var u,c=[],s=p.newPayload();for(u=0;u<a.length;u++)c.push(a[u].event),a[u].domUpdate&&s.add(a[u].domUpdate,a[u].domUpdateRef);return"v="+e+(void 0!==t?"&r="+encodeURIComponent(t):"")+"&sn="+n+"&p="+r+(void 0!==i?"&sp="+encodeURIComponent(i):"")+(void 0!==o?"&pssn="+o:"")+"&e="+c.join(f.encoding.delimiters.events)+"&dom="+h(p.encode(s))}}function je(a,u,v,h,p){p||(p={});var m=.25,g=new Ue(h,{forceBase64:!1,compress:!p.compress&&p.domCompress});this.name="JSON",this.supportsCompression=!0,this.isCompressing=function(){return!0},this.visitXhr=function(e){p.corsSafelisted?e.setRequestHeader("Content-Type","text/plain"+(p.compress?"; charset="+je.COMPRESSED_INDICATION_CHARSET:"")):(e.setRequestHeader("Content-Type","application/json"),p.compress&&e.setRequestHeader("Content-Encoding","gzip"))},this.encodeSnapshotHtml=function(e){return!p.compress&&p.domCompress?{encoded:v.Base64.bytesToBase64(h.compress(e)),plain:!1,compressed:!0}:{encoded:e,plain:!0,compressed:!1}},this.estimateBeaconSize=function(e){return p.compress?e*m:e},this.encodeEvent=function(e,n){var t={timestamp:h.encodeTimestamp(e),type:""+h.encodeEventType(e.type)};void 0===n&&(n=a.isUndefined(e.selectorExpression)||null==e.selectorExpression?u.encoding.rootSelector:e.selectorExpression),t.selector=n;var r=a.isUndefined(e.binding)||a.isUndefined(e.binding.valueEncoding)?e.value:e.binding.valueEncoding(e.value);if(a.isString(r)&&0<r.length){var i=e.shouldEncodeValue?u.encoding.valueEncodedPrefix:u.encoding.valueNotEncodedPrefix;r=e.shouldEncodeValue?v.Base64.encode(r):r,t.value=i+r}else t.value="-";a.isUndefined(e.extraInfo)?t.extraInfo="-":t.extraInfo=h.encodeExtraInfo(e),p.reportDebugInfo&&!a.isUndefined(e.debugInfo)?t.debugInfo=h.encodeDebugInfo(e):t.debugInfo="-";var o="";return e.domSnapshot?(o=g.refForEvent(e),t.domSnapshot=u.encoding.domSnapshotRefPrefix+o):t.domSnapshot="-",v.trace("json encoding ("+e.type+") "+t.timestamp+";"+t.type+" {event string is too long}"+(0<e.getSubPage().length?" [on "+e.getSubPage()+"]":"")),function(e){var n,t=0;for(n in e.event)"string"==typeof e.event[n]&&(t+=n.length+e.event[n].length+6);return e.length=t+2+g.estimatedDomUpdateSize(e.domUpdate),e}({event:t,domUpdate:e.domSnapshot,domUpdateRef:o})},this.encodeBeacon=function(e,n,t,r,i,o,a){var u,c=[],s=g.newPayload();for(u=0;u<a.length;u++)c.push(a[u].event),a[u].domUpdate&&s.add(a[u].domUpdate,a[u].domUpdateRef);var f={ver:e,sn:n,pageId:r,events:c,dom:g.encode(s)};t&&(f.referrer=t),void 0!==i&&0<i.length&&(f.subPage=i),void 0!==o&&(f.pssn=o);var l=JSON.stringify(f);if(p.compress){var d=h.compress(l);return m=Math.max(d.length/l.length,je.MINIMAL_COMPRESSION_FACTOR),v.log("applying json compression. before:"+l.length+" after:"+d.length+" (ratio:"+m+")"),d}return l}}function Be(e,o){var n,r=L.immutableSet.apply(null,e);function a(e,n){return e+"="+n}function t(e,n,t){t&&r[n]&&e.push(a(n,t))}if(e&&0!==e.length){function u(e){var n=[];return t(n,"clsjsv",encodeURIComponent(V.version)),t(n,"_cls_s",o.get(k.cookies.session)),t(n,"_cls_v",o.get(k.cookies.visitor)),t(n,"pid",e),n.join("&")}var c=function(){return n||(n=u(V.page.id)),n},s=r.sn,f=r.ref,l=r._cls_subs;this.apply=function(e,n,t){var r=t?u(t):c();if(!(r||s||l||f))return e;var i=[];return f&&i.push("ref="+encodeURIComponent(Be.currentRef())),r&&i.push(r),l&&o.get(k.cookies.sub_session)&&i.push(a("_cls_subs",o.get(k.cookies.sub_session))),s&&n&&i.push(a("sn",n)),0<i.length?e+(-1!==e.indexOf("?")?"&":"?")+i.join("&"):e}}else this.apply=function(e,n,t){return e}}function He(t,n){function r(e){return n.keysPrefix+e}t=t||{},this.get=function(e){try{return t[r(e)]}catch(e){return D}},this.set=function(e,n){try{return t[r(e)]=n}catch(e){return D}},this.remove=function(e){try{return delete t[r(e)]}catch(e){return D}}}function qe(){this.current=null,this.last=null}function Ve(){return{validateSelector:function(n){try{return A.querySelector(n),!0}catch(e){return this.printErrorMsg("selector not valid"),void 0!==V&&setTimeout(function(){V.saveClsDebugErrorEvent("maskingConfiguration",D,n)},0),!1}},printErrorMsg:function(e){console.error("[EyeView-403]: Error while processing masking configuration. Sensitive data might be recorded, verify detector masking configuration. Error cause: "+e)}}}function ze(e,n,t){this.url=n,this.timestamp=t,this.type=e}function Xe(e,n){this.x=e,this.y=n}function We(e,n,t,r){this.pageId=r,this.timestamp=n,this.type=e,this.element=t,this.report=!0,this.shouldEncodeValue=!0,this.dependent=!1,this.subPage=M.location.hash,this.referrer=L.stripHash(M.location.href)}function Ge(e){this.value=e}function Ke(t){var r=Ke.extractTLD(t),o={always:function(){return function(){return!0}},never:function(){return function(){return!1}},fqdn:function(){return function(e){var n=L.extractHostname(e.interception.url);return!n||n===t}},tld:function(){return function(e){var n=L.extractHostname(e.interception.url);return!n||Ke.extractTLD(n)===r}},statusgte:function(e){if(!e)throw new SyntaxError("illegal ajax predicate format: missing expected argument 'status'.");var n=parseInt(e);return function(e){return e.status>=n}},urimatches:function(e){if(!e)throw new SyntaxError("illegal ajax predicate format: missing expected argument 'pattern'.");var n=new RegExp(e);return function(e){return null!==n.exec(e.interception.url)}},and:function(e){if(!e)throw new SyntaxError("illegal ajax predicate format: missing expected argument 'inner arguments'.");var t=n(e);return function(e){var n;for(n=0;n<t.length;n++)if(!t[n](e))return!1;return!0}},or:function(e){if(!e)throw new SyntaxError("illegal ajax predicate format: missing expected argument 'inner arguments'.");var t=n(e);return function(e){var n;for(n=0;n<t.length;n++)if(t[n](e))return!0;return!1}}};function a(e){var n=e.indexOf("(");if(-1<n){var t,r=-1,i=1;for(t=n+1;t<e.length;t++)if("("===e.charAt(t)&&i++,")"===e.charAt(t)&&0==--i){r=t;break}if(-1===r)throw new SyntaxError("illegal ajax predicate format: missing argument closing ')'");return[L.trim(e.substring(0,n).toLowerCase()),L.trim(e.substring(n+1,r))]}return[e.toLowerCase()]}function n(e){var n,t,r=[],i=(e||"").split(",");for(n=0;n<i.length;n++){if(t=a(L.trim(i[n])),!o[t[0]])throw new SyntaxError("illegal ajax predicate format: unknown predicate type '"+t[0]+"'.");r.push(o[t[0]](t[1]))}return r}o.true=o.always,o.false=o.never,this.create=function(e){if(!e)return o.never();var n=a(e);if(!o[n[0]])throw new SyntaxError("illegal ajax predicate format: unknown predicate type '"+n[0]+"'.");return o[n[0]](n[1])}}function Je(e,f,n,i,o){var l=i.ajaxDebug,t=function(){return!1},r=t,d=t,v=t,h=t,p=t;function a(e){f.emit("ajax:load",new Qe(this,L.currentTimestamp())),l&&L.trace("AJAX load intercepted",this)}function u(e){f.emit("ajax:error",new Qe(this,L.currentTimestamp())),l&&L.trace("AJAX error intercepted",this)}function c(e){l&&L.trace("AJAX onLoadstart intercepted",this),this.interception?(this.interception.startTime=L.currentTimestamp(),this.interception.lastFocusedElement=A.activeElement):L.trace("AJAX onLoadstart - missing cls xhr interception data")}function s(e){if(l&&L.trace("AJAX onLoadend intercepted",this),this.interception){var i=this,o=L.currentTimestamp(),a=v(i),u=a||d(i),c=p(i),s=c||h(i);if(!(s||u||r(i)))return!1;setTimeout(function(){var e=i.getAllResponseHeaders(),n=a&&Je.hasGzipContentEncoding(e),t=a?Je.captureContent(i,n):null,r=new Qe(i,o,s&&i.interception.requestHeaders?i.interception.requestHeaders.join("\r\n"):null,c?i.interception.requestContent:null,u?Je.fixHeaders(e,t?t.length:D):null,t,n);0<i.interception.startTime?r.duration=o-i.interception.startTime:r.duration=-1,r.lastFocusedElement=i.interception.lastFocusedElement,r.status=i.status,r.statusText=i.statusText,f.emit("ajax:loadend",r)},0)}else L.trace("AJAX onLoadend - missing cls xhr interception data for url: "+(this.responseURL||""))}function m(){var t=XMLHttpRequest.prototype.open,r=XMLHttpRequest.prototype.send,n=XMLHttpRequest.prototype.setRequestHeader;t&&r?(e.XMLHttpRequest.prototype.open=function(){var n,e=this;try{(function(e,n){if(Je.isClsOwnAjax(e))return!1;if(0<=n.indexOf(i.reportURI))return!1;var t,r=n.toLowerCase();for(t=0;t<o.length;t++)if(0<=r.indexOf(o[t]))return!1;return!0})(e,n="object"==typeof arguments[1]?arguments[1].toString():arguments[1])&&(e.interception={uuid:L.uuid(),requestHeaders:[],method:arguments[0],url:n,async:arguments[2]},e.addEventListener("load",a,!1),e.addEventListener("error",u,!1),e.addEventListener("loadstart",c,!1),e.addEventListener("loadend",s,!1),f.emit("ajax:open",new Qe(e,L.currentTimestamp())),l&&L.trace("AJAX open intercepted",e))}catch(e){L.log("Exception occurred when intercepting ajax 'open' for url: "+n+" Error: "+e.message,e)}t.apply(this,arguments)},e.XMLHttpRequest.prototype.send=function(){if(this.interception)try{var e=arguments[0],n=new Qe(this,L.currentTimestamp());0<arguments.length&&(this.interception.requestContent=e,n.data=e),f.emit("ajax:send",n),l&&L.trace("AJAX send intercepted",this)}catch(e){L.log("Exception occurred when intercepting ajax 'send'. Error: "+e.message,e)}r.apply(this,arguments)},e.XMLHttpRequest.prototype.setRequestHeader=function(){var e=this;if(e.interception)try{e.interception&&e.interception.requestHeaders&&e.interception.requestHeaders.push(arguments[0]+": "+arguments[1]),l&&L.trace("AJAX 'setRequestHeader' intercepted",e)}catch(e){L.log("Exception occurred when intercepting ajax 'setRequestHeader'. Error: "+e.message,e)}n.apply(this,arguments)}):L.log("WARNING: cannot intercept ajax, XMLHttpRequest prototype was altered (other, earlier loaded, 3rd party js?).")}this.initialize=function(){try{Je.cfgBackwardComp(i)&&L.log("Warning: using deprecated ajax configuration modifiers.");var e=new Ke(n);i.ajaxRecordMetadata&&(r=e.create(i.ajaxRecordMetadata)),i.ajaxRecordResponseHeaders&&(d=e.create(i.ajaxRecordResponseHeaders)),i.ajaxRecordResponseBody&&(v=e.create(i.ajaxRecordResponseBody)),i.ajaxRecordRequestHeaders&&(h=e.create(i.ajaxRecordRequestHeaders)),i.ajaxRecordRequestBody&&(p=e.create(i.ajaxRecordRequestBody))}catch(e){return L.log("Error while parsing Ajax predicates from configuration. interception disabled. error:"+e),!1}return Je.supportAjaxOnProgressEvents()?(f.on("init:preloaded",m),L.log("Intercepting AJAX calls."),!0):(L.log("Ajax interception not supported."),!1)}}function Qe(e,n,t,r,i,o,a){try{if(!e.interception)return void(debugMode&&L.trace("AjaxCall - missing cls xhr interception data for url: "+(e.responseURL||"")));this.xhr=e,this.timestamp=n,this.interception=e.interception,this.url=Je.safeEncodeURI(e.interception.url),this.method=e.interception.method,this.requestHeaders=t||null,this.requestContent="string"==typeof r?r:null,this.responseHeaders=i,this.responseContent=o,this.responseCompressed=a}catch(e){console.log("Error in AjaxCall construction: "+e)}}function Ye(r,i,o,a){o=o||"",a=a||[];var u=i.get(Ye.READY_COOKIE)?Ye.STATE.READY:r.get(Ye.CORS_READY_KEY)?Ye.STATE.READY:Ye.STATE.INIT,c=[],s=function(e){e&&r.set(Ye.CORS_READY_KEY,!0);var n=c;c=[],u=Ye.STATE.READY;for(var t=0;t<n.length;t++)n[t](e)},f=function(e,n){var t,r;for(t=0;t<e.length;t++)(r=i.get(e[t]))&&n.push(e[t]+"="+encodeURIComponent(r))};this.help=function(e,n){if(u===Ye.STATE.READY)return n(!0);var t=[];if(f(Ye.CORS_COOKIES,t),f(a,t),c.push(n),0<t.length){if(u===Ye.STATE.HELPING)return;u=Ye.STATE.HELPING;var r=o+"?"+t.join("&"),i=e();i.onreadystatechange=function(){4===i.readyState&&(200===i.status?s(!0):(L.log("failed to execute CORS support request. statusCode:"+i.status),s(!1)))},i.open("GET",r,!0),i.withCredentials=!0,i.send()}else L.log("ERROR: could not retain cls cookies (was the TLD configured and detected correctly?)"),s(!1)},this.reset=function(){i.set(Ye.READY_COOKIE,""),u=Ye.STATE.INIT}}function $e(t,a){this.config={maxReportSize:-1,maxReports:-1},this.gainLockToReport=function(){return!0},this.freeLock=function(){},this.flushEvents=function(e,n){try{t[$e.KEY_NAME]=function(e,n,t,r){var i,o;if("object"==typeof n)i=L.Base64.bytesToBase64(n),o=$e.ENCODING_BASE64;else{if("string"!=typeof n)throw"cannot report to storage: unsupported input type: "+typeof n;i=n,o="plain"}return(e=e?JSON.parse(e):[]).push({ts:t,pid:a,sn:r,encoding:o,e:i}),L.arrayToJsonSafe(e)}(t[$e.KEY_NAME],e,L.currentTimestamp(),n)}catch(e){L.log("error: could not flush client events into storage. "+e.message),delete t[$e.KEY_NAME]}}}function Ze(e,s){function n(e,n,t,r){var i,o,a=[],u=[];if(t)for(i=0;i<t.length;i++)u.push(t[i]);if(e)for(i=0;i<e.length;i++)1===(a=(o=CSS.escape(e[i])).split("\\*")).length?u.push("#"+o):2===a.length?u.push(Ze.prepareWildCardSelector(a,"id")):s.printErrorMsg("more than one wildcard in id list");if(n)for(i=0;i<n.length;i++)1===(a=(o=CSS.escape(n[i])).split("\\*")).length?u.push("."+o):2===a.length?u.push(Ze.prepareWildCardSelector(a,"class")):s.printErrorMsg("more than one wildcard in class list");if(0===u.length)return null;if(r)return u.map(function(e){var n=e.split("][");return 2===n.length?":not("+n[0]+"]):not(["+n[1]+")":":not("+e+")"}).join("");var c=u.join(",");return s.validateSelector(c)?c:null}e=e||{},this._options=e,this._selectorsByMaskingType={},this._selectorsByMaskingType[ee.TEXT.name]=n(e.domMaskIds,e.domMaskClasses,e.domMaskSimpleSelector),this._selectorsByMaskingType[ee.OMIT.name]=n(e.domOmitIds,e.domOmitClasses),this._selectorsByMaskingType[ee.VALUE_ATTRIBUTE.name]="input"+n(e.valueMaskIds,["cls_mask"].concat(e.valueMaskClasses||[]),!1,k.ValueMaskingMode.WhiteList===e.valueMaskingMode),this._selectorsByMaskingType[ee.ATTRIBUTE.name]=function(e,n){if(0===(e||[]).length||0===(n||[]).length)return null;var t,r,i=[];for(t=0;t<n.length;t++)for(r=0;r<e.length;r++)i.push(n[t]+"["+e[r]+"]");return i.join(",")}(e.domMaskedAttributes,e.domMaskAttributesTags),this.maskedAttributes=e.domMaskedAttributes}function en(e){this._cookieMaskSet=e&&e.cookieMask?L.immutableSet.apply(null,e.cookieMask):null}function nn(n,e,t,r,i){var o,a,u,c=t.getAttribute("id"),s=(o=c,a=L.toAbsoluteUrl(t.getAttribute("src")),function(e){var n=e.createElement("script");return n.setAttribute("type","text/javascript"),o&&n.setAttribute("id",o),n.setAttribute("src",a),n.setAttribute("data-clsautoinjected","true"),n}),f=(u=e,function(){var e=L.shallowExtend(u,{});return e.reportToStorageAfterUnload=!0,e.iframesParentOrigin=n.location.origin,e});var l=function(n){return!((e=n).contentDocument&&"complete"===e.contentDocument.readyState&&e.contentDocument.body.hasChildNodes()&&!function(e){if(void 0!==e[r])return L.log("iframe detector injection skipped since the iframe already contains Glassbox detector."),!1;var n=e.document;return c&&n.querySelector("script[id='"+c+"']")?(L.log("iframe detector injection skipped since the iframe already contains Glassbox detector."),!1):(e._cls_config=f(e),n.head.appendChild(s(n)),i&&setTimeout(function(){i(e)},0),!0)}(n.contentWindow))&&(n.addEventListener("load",function e(){try{n.removeEventListener("load",e),function(e){try{return e.contentWindow.location.href,!0}catch(e){return!1}}(n)&&l(n)}catch(e){L.log("error during iframe injection after 'load' event. error:"+e)}}),!0);var e};this.inject=function(e){try{return l(e)}catch(e){L.log("error during iframe auto-injection (is cross origin frame?). error:"+e)}return!1}}function tn(e){var r={};function n(e){var n=e.data.message,t=r[n];t&&(e.stopImmediatePropagation(),t(e.source,e.data.value,e.origin))}e.addEventListener("message",n),this.onMessage=function(e,n){r[e]=n},this.revoke=function(){e.removeEventListener("message",n)}}function rn(e,i){i=i||"*",this.send=function(e,n,t,r){r=r||i,e.postMessage({message:n,value:t},r)}}function on(o,i,e,a,u){u=u||{mscThrottle:300};var c={};function s(e,n){if(n.propagate){var t,r=o.document.getElementsByTagName("iframe");for(t=0;t<r.length;t++)e!==r[t].contentWindow&&i.send(r[t].contentWindow,"frame:notification",{type:n.type,propagate:!0})}n.bubble&&o.parent!==o&&i.send(o.parent,"frame:notification",{type:n.type,bubble:!0,propagate:!0})}e.onMessage("frame:notification",function(e,n){var t,r,i;L.log("received iframe notification. type:"+n.type+" href:"+o.location.href),t=n.type,r=L.currentTimestamp(),(i=c[t])&&r-i<u.mscThrottle||(c[t]=r,0)?L.log("iframe notification dispatching aborted (throttled) . type:"+n.type+" href:"+o.location.href):(a[n.type]&&a[n.type](),s(e,n))}),this.notify=function(e,n,t){i.send(e,"frame:notification",{type:n},t)},this.notifyAll=function(e){s(D,{type:e,propagate:!0,bubble:!0})}}function an(e,n,t){this.unload=function(){n().sendStoragePendingReports()},this.domTrackingStarted=function(){e().ensureStarted()},this.pageUpdate=function(){t()}}function un(t,i){function o(e){i.emit("frame:detected",e)}function r(e){var n;if("childList"===e.type){var t,r=[];for(t=0;t<e.addedNodes.length;t++)"IFRAME"===e.addedNodes[t].tagName?r.push(e.addedNodes[t]):"function"==typeof e.addedNodes[t].getElementsByTagName&&Array.prototype.push.apply(r,e.addedNodes[t].getElementsByTagName("iframe"));for(t=0;t<r.length;t++)o(r[t]);n=0<r.length,r.length&&L.log(r.length+" iframes were detected during DOM update.")}else"attributes"===e.type&&"IFRAME"===e.actualTarget.tagName&&(n="IFRAME"===e.actualTarget.tagName||"function"==typeof e.actualTarget.getElementsByTagName&&0<e.actualTarget.getElementsByTagName("iframe").length);n&&i.emit("frame:domChange")}this.start=function(){var e,n=t.getElementsByTagName("iframe");for(e=0;e<n.length;e++)o(n[e]);L.log(n.length+" iframes were detected during document's initial scan."),i.on("domMutation",r)}}function cn(s,f,l,e,d){d=d||{containerIdAttribute:"gb_cid",mscTimeout:d.mscTimeout||2e3};var n,o,v,a,h=(n=100,function(){return""+n++});this.perform=function(e,n,t){L.log("performing iframes handshake: sending CLIENT hello. pageId:"+f.id),o=n,l.send(e,"child:hello",{pageId:f.id}),-1!==d.mscTimeout&&(a=setTimeout(t,d.mscTimeout))},this.setParentCallback=function(e){v=e},e.onMessage("child:hello",function(e,n,t){L.log("received CHILD hello, pageId:"+n.pageId);var r,i,o=s.getElementsByTagName("iframe");for(r=0;r<o.length;r++)if(e===o[r].contentWindow){i=o[r];break}if(!i)return L.log("could not complete iframe handshake: child frame could not be found. pageId:"+n.pageId+" origin:"+t),void(v&&v());var a,u,c=((u=(a=i).getAttribute(d.containerIdAttribute))||(u=h(),a.setAttribute(d.containerIdAttribute,u)),u);v&&v(c,n.pageId),l.send(i.contentWindow,"parent:hello",{containerId:c,parentPageId:f.id},t)}),e.onMessage("parent:hello",function(e,n,t){a&&clearTimeout(a);var r=n.containerId,i=n.parentPageId;L.log("received PARENT hello. containerId:"+r+" parentPageId:"+i),o&&o(i,r,t),o=D})}function sn(r,e,n,t,i,o,a,u){u=u||{};var c,s,f={detected:0,injected:0,injectionFailed:0,handshakesWithChildren:{success:0,error:0},handshakeWithParent:{startedAt:-1,completedAt:-1,timeout:!1}},l=r.top!==r;function d(){i.notifyAll("pageUpdate")}function v(e,n,t){c={pageId:e,containerId:n,origin:t},f.handshakeWithParent.completedAt=L.currentTimestamp(),f.handshakeWithParent.info=c,a(e,n),L.log("handshake completed. containerId:"+n+" parentId:"+e+" path:"+r.location.pathname)}function h(){L.log("iframes handshake failure: timeout while waiting for PARENT hello."),f.handshakeWithParent.timeout=!0,a()}function p(e){c&&i.notify(r.parent,e,c.origin)}o.setParentCallback(function(e,n){f.handshakesWithChildren.success+=e?1:0,f.handshakesWithChildren.error+=e?0:1}),this.initialize=function(){l||a()},this.stats=function(){return f},this.handshakeCompleted=function(){return!!c},e.on("saveEvent",function(e){s&&"pageUpdate"!==e.type&&-1!==k.snapshotApplicableEventType.indexOf(e.type)&&d()}),e.on("frame:detected",function(e){u.autoInject&&!oe.isCrossOriginFrame(e,r.location.origin)&&(t&&t.inject(e)?(L.log("a newly detected iframe was successfully injected."),f.injected++):f.injectionFailed++),f.detected++}),e.on("frame:domChange",d),e.on("init:loaded",function(){n.start(),l&&(f.handshakeWithParent.startedAt=L.currentTimestamp(),o.perform(r.parent,v,h))}),e.on("domTrackingStarted",function(){s=!0,p("domTrackingStarted")}),u.storageOnUnload&&e.on("event:unload",p.bind(null,"unload"))}function fn(i,o,a,u){u=u&&new RegExp(u);var c=function(e){var n,t=[],r=e.getElementsByTagName("script");for(n=0;n<r.length;n++)u.exec(r[n].innerText)||t.push(r[n]);return t};this.sanitize=function(e){var n,t,r=[];if(i&&Array.prototype.push.apply(r,function(e){var n=[];if(e.ownerDocument)for(var t,r=e.ownerDocument.createNodeIterator(e,NodeFilter.SHOW_COMMENT,null,!0);t=r.nextNode();)n.push(t);return n}(e)),o&&"function"==typeof e.getElementsByTagName)for(n=0;n<o.length;n++)u&&"script"===o[n]?Array.prototype.push.apply(r,c(e)):Array.prototype.push.apply(r,e.getElementsByTagName(o[n]));if(a&&"function"==typeof e.querySelector)for(t in a)for(n=0;n<a[t].length;n++)e.querySelector(t+"#"+a[t][n])&&r.push(e.querySelector(t+"#"+a[t][n]));!function(e){var n;for(n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n])}(r),L.log("sanitation of DOM element completed. removedNodes:"+r.length)}}function ln(e){return e instanceof Comment||(!("IFRAME"!==e.tagName||!e.parentNode||"HEAD"!==e.parentNode.tagName)||ln.IGNORABLE_TAGS.hasOwnProperty(e.nodeName))}function dn(e,r){if(e.WebSocket){var i=e.WebSocket,n=function(e,n){
// #preserve native
var t=n?new i(e,n):new i(e);try{t.addEventListener("message",r)}catch(e){L.log("failed intercepting WebSocket constructor: "+e.message,e)}return t};(n.prototype=i.prototype).constructor=i,n.CONNECTING=0,n.OPEN=1,n.CLOSING=2,n.CLOSED=3,e.WebSocket=n}else L.log("WebSocket interface is not supported by the browser.")}function vn(r,i){var e,t=(e=0,function(){return++e}),o=function(e){var n=e[vn.GB_ID_ATTRIBUTE_NAME];return n||(n=t(),e[vn.GB_ID_ATTRIBUTE_NAME]=n,i&&"function"==typeof e.setAttribute&&e.setAttribute(vn.GB_ID_ATTRIBUTE_NAME,n)),n};this.usingGlassboxIds=i,this.idOf=function(e,n){return n?e[vn.GB_ID_ATTRIBUTE_NAME]:o(e)},this.selectorFor=function(e,n){return i?(t=o(e),"["+vn.GB_ID_ATTRIBUTE_NAME+"='"+t+"']"):r(e,n);var t},this.introduceDocument=function(e){if(i&&!e._gb_scanned){for(var n,t=e.createNodeIterator(e.documentElement,NodeFilter.SHOW_ELEMENT,null,!0);n=t.nextNode();)o(n);e._gb_scanned=!0}}}function hn(t,r,i,o){var e,n=!1,a=null;"undefined"!=typeof MutationObserver?a=MutationObserver:"undefined"!=typeof WebKitMutationObserver&&(a=WebKitMutationObserver);var u=function(e){for(var n=0;n<e.length;n++)if(!o(e.item(n)))return!1;return!0},c=function(e){var n=e.target;if("attributes"===e.type){if(e.attributeName===vn.GB_ID_ATTRIBUTE_NAME)return}else"characterData"===e.type&&n instanceof CharacterData&&(n=n.parentNode||n);if(!o(n)){if("childList"===e.type){for(var t=0;t<e.removedNodes.length;t++)delete e.removedNodes.item(t)[vn.GB_ID_ATTRIBUTE_NAME];if(u(e.addedNodes)&&u(e.removedNodes))return}e.actualTarget=n,r.emit("domMutation",e)}},s={attributes:!0,childList:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1};this.getName=function(){return"MutationObserver based"},this.supported=function(){return null!==a},this.start=function(){if(!n){if(!e){if(!a)throw new Error("cannot start DomObserver: native interface not supported by the browser.");e=new a(function(e){e.forEach(c)})}e.observe(i,s),n=!0}},this.isActive=function(){return n},this.n=function(){if(a&&t.navigator.userAgent.match(/Trident\/(\d+)/)){var e=new a(function(e){});e.observe(i,{childList:!0,subtree:!0});var n=(new DOMParser).parseFromString("<?xml version='1.0' encoding='UTF-8'?><test><![CDATA[-5153879911146088898:4982669000430465522]]></test>","text/xml");return e.disconnect(),1<n.firstChild.childNodes.length}return!1}}function pn(u,n,c){var t=!1,r=function(e){var n,t,r,i=[],o=[],a=e.type;if("DOMNodeInserted"===e.type)n="childList",(t=e.target.parentNode)&&i.push(e.target);else if("DOMNodeRemoved"===e.type)delete e.target[vn.GB_ID_ATTRIBUTE_NAME],n="childList",(t=e.target.parentNode)&&o.push(e.target);else if("DOMCharacterDataModified"===e.type)n="characterData",t=e.target;else{if("DOMAttrModified"!==e.type)return;if(e.attrName===vn.GB_ID_ATTRIBUTE_NAME)return;n="attributes",t=e.target,r=e.attrName}c(t)||t&&u.emit("domMutation",{origType:a,type:n,actualTarget:t,attributeName:r,addedNodes:i,removedNodes:o})};this.getName=function(){return"DOM events based"},this.supported=function(){return"undefined"!=typeof MutationEvent},this.start=function(){var e;t||((e=n).addEventListener("DOMNodeInserted",function(e){r(e)},!1),e.addEventListener("DOMCharacterDataModified",function(e){r(e)},!1),e.addEventListener("DOMNodeRemoved",function(e){r(e)},!1),e.addEventListener("DOMAttrModified",function(e){r(e)},!1),t=!0)},this.isActive=function(){return t}}function mn(n,t){var r;t.on("init:loaded",function(){r=n.title}),t.on("domMutation",function(){var e;e=!r||r===n.title,r=n.title,e||setTimeout(function(){t.emit("titleChanged")},0)})}function gn(l,d,u,v,h,p,m,g){g=L.shallowExtend(gn.DefaultOptions,g);var y=function(e,n,t){var r,i,o,a=e.getElementsByTagName(n);for(r=0;r<a.length;r++)for(o=a[r],i=0;i<t.length;i++)gn.AttributeUpdaters[t[i]](o,u)};this.take=function(e){if(null===l.body)return D;var n,t,r,i=L.currentTimestamp();try{var o=d.cloneNode(l.documentElement),a=o.querySelector("head"),u=o.querySelector("body");p&&a&&p.sanitize(a),m&&u&&m.sanitize(u),y(o,"input",["value","checked"]),y(o,"select",["selectedIndex"]),g.addHeader&&(n=o,t=e,r=gn.CLS_HEADER_PREFIX+"[createdAt:"+L.currentTimestamp()+" seq:"+t+"] ",n.head.insertBefore(n.createComment(r),n.head.childNodes[0])),v&&v.domMaskNode(o,ee.OMIT,ee.TEXT,ee.VALUE_ATTRIBUTE,ee.ATTRIBUTE),g.domRecordCssRules&&function(e,n){for(var t,r,i,o=n.getElementsByTagName("style"),a=e.getElementsByTagName("style"),u=0;u<o.length;u++)if(i=o[u].textContent||"",o[u].sheet.gb_css_rules)a[u].textContent=i+o[u].sheet.gb_css_rules;else if(!i){t=o[u].sheet.cssRules,r="";for(var c=0;c<t.length;c++)"string"==typeof t[c].cssText&&(r+=t[c].cssText);a[u]&&(a[u].textContent=r)}}(o,l);var c=gn.HTML_SCHEMA_PREFIX+o.outerHTML,s=h?h.maskCookie(l.cookie):l.cookie;return new yn(c,l.referrer,e,s,l.characterSet)}catch(e){return L.log("could not obtain page snapshot. error: "+e),this.lastError=e,D}finally{var f=L.currentTimestamp();L.log("full page snapshot capturing took:"+(f-i)+"msc")}}}function yn(e,n,t,r,i){this.html=e,this.referrer=n,this.seq=t,this.charset=i,this.cookie=r}function En(f,l){var d=L.immutableSet("checkbox","radio"),v={INPUT:"inputs",SELECT:"selects",TEXTAREA:"textareas"},e=function(e,n){var t,r,i,o;if(!function(e){if(!l||void 0===l.ignoredFormElement)return!1;var n=L.getElementId(e);return!!n&&O.contains(l.ignoredFormElement,n)}(e.element)&&(e.properties&&0<e.properties.length)){var a,u,c=v[e.element.tagName],s={};if(c){for(a=0;a<e.properties.length;a++)i=e.element,o=e.properties[a],s[u="SELECT"===i.tagName?"selectedIndex":"INPUT"===i.tagName&&d[i.getAttribute("type")||""]?"checked":o]=(t=e.element,r=u,f&&"value"===r?f.maskValue(t):t[r]);L.ensureProperty(n,c)[e.selector()]=s}}};return{all:function(){return[e]}}}function bn(c,s){c=c||{},s=s||[];var f=0;function l(e,n,t){if(n.removed)return!1;var r;for(r=0;r<e.length;r++)e[r](n,t);return!0}this.getSnapshot=function(){var e,n,t,r,i,o,a={timestamp:f++,propertiesMode:"modifiedOnly",selectors:c.usingGlassboxIds?"gb":"native"},u=0;for(e=0;e<s.length;e++){for(n in o=0,t=(i=s[e]).tracker.track())r=t[n],l(i.providers,r,a)&&o++;u+=o,L.log(o+" change entries of type "+i.name+" were processed and assigned to DOM update.")}return 0===u&&(a=D),a},this.start=function(){var e;for(e=0;e<s.length;e++)s[e].tracker.start();L.log("dom mutation accumulation started.")}}function wn(e,n){this.element=e,this.nodeCache=n,this._useId=!0,this._resolvedSelector=D}function xn(e,a){var u={},c=0;function r(e){var n,t,r=0;if("function"==typeof e.element.contains)for(n in u)u[n].removed||(t=u[n].element)!==e.element&&e.element.contains(t)&&(u[n].removed=!0,r++);return r}function i(e){for(var n,t,r=e.element.parentNode;r;){if(t=u[a.idOf(r,!0)])for(n=0;n<t.length;n++)if(void 0!==t[n].childListOrdinal)return e.removed=!0,t[n]=e.childListOrdinal,1;r=r.parentNode}return 0}function n(e){var n,t,r,i=c++,o=(n=e.actualTarget,t=a.idOf(n),(r=u[t])||(r=new wn(n,a),u[t]=r),r);"characterData"===e.type?o.characterDataChild=e.target:"childList"===e.type?(o.childListOrdinal=i,o.characterDataChild=D):"attributes"===e.type&&(o.attributes||(o.attributes={}),o.attributes[e.attributeName]=i,"id"===e.attributeName&&o.invalidateId())}this.start=function(){e.on("domMutation",n),L.log("DOM mutation tracking started.")},this.track=function(){var e=u,n=function(){var e,n,t=0;for(e in u)(n=u[e]).removed||(L.isAttachedToDOM(n.element)?void 0!==n.childListOrdinal&&(t+=i(n),t+=n.removed?0:r(n)):(t++,n.removed=!0));return t}();return L.log("DOM changes log was compacted by "+n+" entries."),c=0,u={},e}}function Sn(u,c,s){var f=!0,l={};s=L.immutableSet.apply(null,s||[]);var d=function(e,n,t){var r=Sn.propertyForElement(e);if(r){var i=(l[n]||{})[r],o=e[r];(f?o!==Sn.defaultValue(e,r):i!==o)&&(t[n]||(t[n]=new wn(e,c),t[n].properties=[]),t[n].properties.push(r));var a={};a[r]=o,l[n]=a}};this.start=function(){L.log("DOM elements properties tracking started.")},this.track=function(){var e,n,t,r,i={},o={},a=u.querySelectorAll("input,select,textarea");for(e=0;e<a.length;e++)(t=a[e]).id&&s[t.id]||"hidden"===t.getAttribute("type")||(n=c.idOf(a[e]),d(a[e],n,i),o[n]=!0);for(r in l)o[r]||delete l[r];return f=!1,i}}function Cn(e,r){var n,i,t,o,a=[],u={};n=e.CSSStyleSheet.prototype,i=n.insertRule,n.insertRule=function(){var e=i.apply(this,arguments);try{var n=arguments[0];this.gb_css_rules?this.gb_css_rules+=n:this.gb_css_rules=n;var t=r.idOf(this.ownerNode);u[t]||(u[t]=new wn(this.ownerNode,r)),a.push({selector:t,type:"added",rule:n,index:e})}catch(e){L.log("Exception occurred during CSS insertRule interception. Error: "+e.message,e)}return e},L.log("CSS rule insertion tracking started."),t=e.CSSStyleSheet.prototype,o=t.deleteRule,t.deleteRule=function(){try{var e=arguments[0];if(this.cssRules[e]!==D){var n=r.idOf(this.ownerNode);u[n]||(u[n]=new wn(this.ownerNode,r)),a.push({selector:n,type:"deleted",index:e})}}catch(e){L.log("Exception occurred during CSS deleteRule interception. Error: "+e.message,e)}return o.apply(this,arguments)},L.log("CSS rule deletion tracking started."),this.start=function(){},this.track=function(){!function(){for(var e,n,t=0;t<a.length;t++)e=a[t].selector,n=u[e].selector(),a[t].selector=n}();var e={};return a.length&&(e.cssRules={rules:a}),a=[],u={},e}}function Rn(n){this.encode=function(e){return e.constructor===Array?n.encode(L.arrayToJsonSafe(e)):n.encode(JSON.stringify(e))},this.decode=function(e){return JSON.parse(n.decode(e))}}function Tn(n,t,r){var i={url:n};try{var o=new XMLHttpRequest;return!!o&&(o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var e=o.getResponseHeader("Content-Type");i.type=e,i.content=L.pako.gzip(o.response),t(i)}else 0===o.status?r(i.url):(L.log("Failed getting resource data by Ajax for url : "+n+" status:"+o.status+"  "+o.statusText),i.error="status: "+o.statusText+" ("+o.status+")",t(i))},o.cls_own=!0,o.open("GET",n,!0),o.responseType="arraybuffer",o.send(),!0)}catch(e){return console.log("Failed getting resource data by Ajax for url: "+n+": "+e.message,e),!1}}function In(u,c,t,n,s,f,l){var d=L.immutableSet("link","css","font","img","input");function v(){var e,n=c.get("res.pending");if(c.remove("res.pending"),n)try{e=s.decode(n)}catch(e){L.log("Failed parsing JSON for pending resources: "+e.message,e)}return e}function r(e){n.emit("saveResourceEvent",e)}function i(e){n.emit("saveCorsDeniedEvent",e)}this.fetchResources=function(){var e=v();if(e)for(var n=0;n<e.length;n++)if(!t(e[n],r,i)){L.log("Failed executing an XHR request for fetching a resource. Breaking the fetch loop.");break}},this.electResources=function(){var e,n=l.electAmount,t=l.maxPendingResources;if(c.get("res.all")&&(e=!0,n=Number.MAX_VALUE,t=Number.MAX_VALUE),e=e||Math.random()<l.electProbability){var r=u.performance.getEntriesByType("resource");r=function(e){for(var n=[],t=0;t<e.length;t++){var r=e[t];f(r.name)||d[e[t].initiatorType]&&n.push(r)}return n}(r);for(var i,o=v()||[],a=0;a<n&&0<r.length&&!(o.length>=t);a++)i=Math.floor(Math.random()*r.length),o.push(r[i].name),r.splice(i,1);c.set("res.pending",s.encode(o))}},this.recordAllResources=function(){c.set("res.all","true")},this.stopRecordAllResources=function(){c.remove("res.all")}}function Mn(f,t,r){function l(e,n,t){for(var r={},i=0;i<n.length;i++)e[n[i]]!==D&&(r[n[i]]=e[n[i]]);return r}function i(e,n,t,r,i){var o,a,u=[],c=f.performance.getEntriesByType(n);if(u=r&&i?c.filter(function(e){return i[e[r]]!==D}):c,"resource"===n){var s=function(){for(var e={},n=f.document.getElementsByTagName("script"),t=0;t<n.length;t++)n[t].src&&(e[n[t].src]=n[t].async?1:0);return e}();for(o=0;o<u.length;o++)"script"===(a=u[o]).initiatorType&&(a.async=s[a.name]?1:0)}for(e[n]=[],o=0;o<u.length;o++)e[n].push(l(u[o],t))}this.reportMeasurements=function(){for(var e={},n=0;n<r.length;n++)i(e,r[n].type,r[n].properties,r[n].filterBy,r[n].validFilterValues);t.emit("waterfall",e)}}function An(e,r,i,o){var n=["INPUT","SELECT","TEXTAREA"],a=n.join(),u=L.immutableSet.apply(L,n);function c(e,n){for(var t,r=[],i="."+n,o=e.querySelectorAll(i),a=0;a<o.length;a++)"hidden"!==(t=o[a].getAttribute("type"))&&"button"!==t&&r.push(o[a]);return r}function s(e,n){for(var t,r=0,i=[];r<e.length;)if(e[r+1]&&u[e[r].tagName]&&f(e[r]))(t=d(e[r+1]))&&i.push({elem:e[r],msg:l(t)}),r+=2;else if(e[r+1]&&u[e[r+1].tagName]&&f(e[r+1]))(t=d(e[r]))&&i.push({elem:e[r+1],msg:l(t)}),r+=2;else{if(t=l(d(e[r]))){var o=e[r].querySelector(a)||e[r].parentElement.querySelector(a);(o&&f(o)||!o)&&i.push({elem:o||n,msg:t})}r++}return i}function f(e){return e.gb_lastInputVal===D||e.gb_lastInputVal!==e.value?(e.gb_lastInputVal=e.value,!0):(e.gb_lastInputVal=e.value,!1)}function l(e){var n=e.split(".");return(2<n.length?n[0]+"."+n[1]+".":e).substring(0,200)}function d(e){var n;if(!e.childNodes.length)return"";for(var t=e.childNodes.length-1;0<=t;t--)if(n=(n=e.childNodes[t].textContent).trim())return n;return e.textContent.trim()}function v(e){for(var n,t=0;t<e.length;t++)n=i.getSelectorExpression(e[t].elem)||k.encoding.rootSelector,r.emit("formValidationError",{element:e[t].elem,message:e[t].msg,selector:n})}this.intercept=function(e){var n;try{if(n=function(e){for(;e;){if("FORM"===e.tagName)return e;e=e.parentElement}return null}(e))for(var t=0;t<o.domFormValidationClassErrors.length;t++)v(s(c(n,o.domFormValidationClassErrors[t]),n))}catch(e){L.log("exception occurred during form validation interception. Error: "+e.message,e)}}}function Dn(s,f){this.showErrorsLRU=new Ne(20),this.intercept=function(){L.log("Intercepting jQuery Validator errors.");var c=jQuery.validator.prototype.showErrors;jQuery.validator.prototype.showErrors=function(e){try{if(this.errorList&&0<this.errorList.length)for(var n=0;n<this.errorList.length;n++){var t=this.errorList[n].element,r=this.errorList[n].message,i="SAME - NOT REPORTING",o=f.getSelectorExpression(t)||k.encoding.rootSelector,a=this.showErrorsLRU.set(o,r);if(null===a||O.isUndefined(a))i="NEW";else if(a!==r)i="UPDATE";else if(a===r){var u=this.errorsFor(t);u&&0<u.length&&!O.isUndefined(u[0].innerHTML)&&(u[0].innerHTML===r&&jQuery(u[0]).is(":visible")||(i="SHOW"))}"NEW"!==i&&"UPDATE"!==i&&"SHOW"!==i||s.emit("formValidationError",{element:t,message:0<r.length?r:"NONE",selector:o})}}catch(e){L.log("Failed intercepting showErrors for validation error report. "+e.message,e)}c.call(this,e)}}}function kn(e,n,t,r){this._elementResolver=n,this._accessors=t,this._rule=e,this._urlRegexp=r}}("_detector",window,document,"5.6.192B207");
